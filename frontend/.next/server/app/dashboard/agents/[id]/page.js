(()=>{var e={};e.id=552,e.ids=[552],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2865:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>r.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>c}),s(7427),s(2834),s(8385),s(5866);var a=s(3191),l=s(8716),n=s(7922),r=s.n(n),i=s(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let c=["",{children:["dashboard",{children:["agents",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7427)),"/workspaces/AICallerSaaS/frontend/src/app/dashboard/agents/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2834)),"/workspaces/AICallerSaaS/frontend/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,8385)),"/workspaces/AICallerSaaS/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/workspaces/AICallerSaaS/frontend/src/app/dashboard/agents/[id]/page.tsx"],m="/dashboard/agents/[id]/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/dashboard/agents/[id]/page",pathname:"/dashboard/agents/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5817:(e,t,s)=>{Promise.resolve().then(s.bind(s,9103))},4361:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]])},7147:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]])},6333:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},4713:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},9734:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},7358:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},8393:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},1291:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3661:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Delete",[["path",{d:"M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z",key:"1oy587"}],["line",{x1:"18",x2:"12",y1:"9",y2:"15",key:"1olkx5"}],["line",{x1:"12",x2:"18",y1:"9",y2:"15",key:"1n50pc"}]])},2887:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9635:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9103:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var a=s(326),l=s(7577),n=s(5047),r=s(434),i=s(6226),d=s(7346),c=s(9752),o=s(1190),m=s(8069),x=s(4097),h=s(3566),u=s(6913),g=s(962),p=s(4603),f=s(4019),j=s(3661),b=s(7506);let N=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}];function v({agentId:e,agentName:t,callWindow:s,onClose:n,onCallInitiated:r}){let{toast:i}=(0,x.pm)(),[o,h]=(0,l.useState)(""),[u,v]=(0,l.useState)(!1),[y,w]=(0,l.useState)(!1),k=e=>e.length<=3?e:e.length<=6?`(${e.slice(0,3)}) ${e.slice(3)}`:e.length<=10?`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6)}`:`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6,10)}`,C=e=>{let t=o.replace(/\D/g,"");t.length<10&&h(k(t+e))},S=()=>{if(!s?.start||!s?.end)return!0;let e=new Date,t=`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`;return t>=s.start&&t<=s.end},Z=async()=>{let t=o.replace(/\D/g,"");if(t.length<10){i({title:"Invalid phone number",description:"Please enter a valid 10-digit phone number",variant:"destructive"});return}if(!S()){i({title:"Outside call window",description:`Calls can only be made between ${s?.start} and ${s?.end}`,variant:"destructive"});return}v(!0);try{let s=`+1${t}`,a=await m.h.makeOutboundCall(e,s);i({title:"Call initiated!",description:`Calling ${o}...`}),r&&r(a.data),n()}catch(e){i({title:"Error",description:e instanceof m.M?e.message:"Failed to initiate call",variant:"destructive"})}finally{v(!1)}},P=o.replace(/\D/g,"");if(!y)return null;let A=a.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 flex items-center justify-center p-4",children:(0,a.jsxs)(c.Zb,{className:"w-full max-w-sm",children:[(0,a.jsxs)(c.Ol,{className:"pb-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(p.Z,{className:"h-5 w-5 text-slate-600"}),a.jsx(c.ll,{className:"text-slate-600",children:"Make Outbound Call"})]}),a.jsx("button",{onClick:n,className:"text-muted-foreground hover:text-slate-600 transition-colors",children:a.jsx(f.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Place a call using ",a.jsx("span",{className:"font-medium text-slate-600",children:t})]})]}),(0,a.jsxs)(c.aY,{className:"space-y-4",children:[a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"h-10 flex items-center justify-center",children:o?a.jsx("span",{className:"text-2xl font-semibold text-slate-700 tracking-wide",children:o}):a.jsx("span",{className:"text-2xl text-slate-300",children:"(___) ___-____"})})}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:N.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>C(e.digit),className:"flex flex-col items-center justify-center h-16 rounded-full bg-slate-100 hover:bg-slate-200 active:bg-slate-300 transition-colors",disabled:u,children:[a.jsx("span",{className:"text-xl font-semibold text-slate-700",children:e.digit}),e.letters&&a.jsx("span",{className:"text-[10px] text-slate-400 tracking-widest",children:e.letters})]},e.digit))}),a.jsx("div",{className:"flex justify-end px-4",children:a.jsx("button",{type:"button",onClick:()=>{h(k(o.replace(/\D/g,"").slice(0,-1)))},className:"p-2 text-slate-400 hover:text-slate-600 transition-colors",disabled:!o||u,children:a.jsx(j.Z,{className:"h-6 w-6"})})}),s?.start&&s?.end&&!S()&&a.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-amber-700",children:["⚠️ Outside call window (",s.start," - ",s.end,")"]})}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[a.jsx(d.z,{type:"button",variant:"outline",onClick:n,className:"flex-1 text-slate-600",disabled:u,children:"Cancel"}),a.jsx(d.z,{type:"button",onClick:Z,className:"flex-1 bg-teal-600 hover:bg-teal-700",disabled:u||P.length<10,children:u?(0,a.jsxs)(a.Fragment,{children:[a.jsx(b.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Calling..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"Call Now"]})})]})]})]})});return(0,g.createPortal)(A,document.body)}var y=s(4361),w=s(4713),k=s(7147),C=s(6333),S=s(732),Z=s(2887),P=s(9734),A=s(1291),M=s(8378),D=s(8393),I=s(7358),$=s(9635);let O=e=>{let t=e.replace(/\D/g,"");return 11===t.length&&t.startsWith("1")?`(${t.slice(1,4)}) ${t.slice(4,7)}-${t.slice(7)}`:e},z=e=>{switch(e){case"INBOUND":return a.jsx(y.Z,{className:"h-4 w-4 text-teal-600"});case"OUTBOUND":return a.jsx(w.Z,{className:"h-4 w-4 text-teal-600"});case"HYBRID":return a.jsx(k.Z,{className:"h-4 w-4 text-teal-600"});default:return null}};function _(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),s=(0,n.useSearchParams)(),{toast:g}=(0,x.pm)(),[p,f]=(0,l.useState)(null),[j,b]=(0,l.useState)(!0),[N,y]=(0,l.useState)(!1),[w,k]=(0,l.useState)("true"===s.get("edit")),[_,E]=(0,l.useState)(!1),[F,T]=(0,l.useState)(""),[B,U]=(0,l.useState)(""),[W,G]=(0,l.useState)(""),[H,R]=(0,l.useState)(""),[q,L]=(0,l.useState)("INBOUND"),[Y,V]=(0,l.useState)(""),[X,J]=(0,l.useState)(""),[K,Q]=(0,l.useState)(""),[ee,et]=(0,l.useState)(!1),[es,ea]=(0,l.useState)(null),[el,en]=(0,l.useState)(""),[er,ei]=(0,l.useState)(null),[ed,ec]=(0,l.useState)([]),[eo,em]=(0,l.useState)(null),[ex,eh]=(0,l.useState)(""),[eu,eg]=(0,l.useState)(!0),[ep,ef]=(0,l.useState)(!1),[ej,eb]=(0,l.useState)(!1),[eN,ev]=(0,l.useState)(!1),ey=(0,l.useRef)(null),ew=async()=>{eg(!0);try{let t=await m.h.getTwilioSettings();if(ef(t.data?.configured||!1),t.data?.configured){let t=(await m.h.getPhoneNumbers()).data||[];ec(t);let s=t.find(t=>t.agent?.id===e.id);em(s||null),eh(s?.id||"")}}catch{}finally{eg(!1)}},ek=async t=>{ev(!0),eb(!1);try{eo&&eo.id!==t&&await m.h.updatePhoneNumber(eo.id,{agentId:null}),t&&await m.h.updatePhoneNumber(t,{agentId:e.id}),eh(t),await ew(),g({title:t?"Phone number assigned":"Phone number unassigned",description:t?"The phone number has been assigned to this agent.":"The phone number has been removed from this agent."})}catch(e){g({title:"Error",description:e instanceof m.M?e.message:"Failed to update phone number",variant:"destructive"}),eh(eo?.id||"")}finally{ev(!1)}},eC=async()=>{try{let t=await m.h.getAgent(e.id);t.data&&(f(t.data),T(t.data.name),U(t.data.systemPrompt),G(t.data.greeting||""),R(t.data.voice||h.Cy[0].id),L(t.data.mode||"INBOUND"),V(t.data.outboundGreeting||""),J(t.data.callWindowStart||""),Q(t.data.callWindowEnd||""),et(t.data.calendarEnabled||!1),en(t.data.callPurpose||""))}catch(e){g({title:"Error",description:e instanceof m.M?e.message:"Failed to load agent",variant:"destructive"}),t.push("/dashboard/agents")}finally{b(!1)}},eS=async()=>{y(!0);try{await m.h.updateAgent(e.id,{name:F,systemPrompt:B,greeting:W,voiceId:H,mode:q,outboundGreeting:Y||void 0,callWindowStart:X||void 0,callWindowEnd:K||void 0,calendarEnabled:ee,personaName:h.Cy.find(e=>e.id===H)?.name||void 0,callPurpose:el||void 0}),g({title:"Agent updated",description:"Your changes have been saved."}),k(!1),eC()}catch(e){g({title:"Error",description:e instanceof m.M?e.message:"Failed to update agent",variant:"destructive"})}finally{y(!1)}},eZ=async()=>{if(confirm("Are you sure you want to delete this agent?"))try{await m.h.deleteAgent(e.id),g({title:"Agent deleted",description:"The agent has been removed."}),t.push("/dashboard/agents")}catch(e){g({title:"Error",description:e instanceof m.M?e.message:"Failed to delete agent",variant:"destructive"})}};return j?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"text-muted-foreground",children:"Loading agent..."})}):p?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 min-w-0",children:[a.jsx(r.default,{href:"/dashboard/agents",className:"flex-shrink-0",children:(0,a.jsxs)(d.z,{variant:"ghost",size:"sm",className:"text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:[a.jsx(C.Z,{className:"h-4 w-4 mr-2"}),"Back"]})}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(S.Z,{className:"h-6 w-6 text-slate-600 flex-shrink-0"}),a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-600 truncate max-w-[200px] sm:max-w-[250px]",title:p.name,children:p.name})]}),(0,a.jsxs)("p",{className:"text-muted-foreground text-xs",children:[h.jt[p.mode]?.label||p.mode," agent"]})]})]}),(0,a.jsxs)("div",{className:"hidden lg:flex items-stretch gap-3 flex-1 mx-6",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-center px-4 py-2 bg-white rounded-lg border flex-1",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:"Total Calls"}),a.jsx("span",{className:"text-lg font-semibold text-slate-600",children:p.totalCalls||"—"})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-center px-4 py-2 bg-white rounded-lg border flex-1",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:"Avg Duration"}),a.jsx("span",{className:"text-lg font-semibold text-slate-600",children:p.avgDuration?`${Math.round(p.avgDuration)}s`:"—"})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-center px-4 py-2 bg-white rounded-lg border flex-1",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:"Status"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[a.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${p.isActive?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"}`,children:p.isActive?"Active":"Inactive"}),p.mode&&h.jt[p.mode]&&(0,a.jsxs)("span",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx("span",{className:"w-4 h-4 rounded-full flex items-center justify-center bg-teal-100",children:z(p.mode)}),h.jt[p.mode].label]})]})]})]}),a.jsx("div",{className:"flex gap-2 flex-shrink-0",children:w?(0,a.jsxs)(a.Fragment,{children:[a.jsx(d.z,{variant:"outline",onClick:()=>k(!1),className:"text-teal-600 border-teal-600 hover:bg-teal-50",children:"Cancel"}),a.jsx(d.z,{onClick:eS,disabled:N,className:"bg-teal-600 hover:bg-teal-700",children:N?"Saving...":"Save Changes"})]}):(0,a.jsxs)(a.Fragment,{children:[("OUTBOUND"===p.mode||"HYBRID"===p.mode)&&(0,a.jsxs)(d.z,{onClick:()=>E(!0),className:"bg-teal-600 hover:bg-teal-700",children:[a.jsx(Z.Z,{className:"h-4 w-4 mr-2"}),"Make Call"]}),a.jsx(d.z,{variant:"outline",onClick:()=>k(!0),className:"text-teal-600 border-teal-600 hover:bg-teal-50",children:"Edit"}),a.jsx(d.z,{variant:"destructive",onClick:eZ,children:"Delete"})]})})]}),(0,a.jsxs)("div",{className:"grid gap-4 grid-cols-3 lg:hidden",children:[a.jsx(c.Zb,{children:(0,a.jsxs)(c.Ol,{className:"p-3",children:[a.jsx(c.SZ,{className:"text-xs",children:"Total Calls"}),a.jsx(c.ll,{className:"text-xl text-slate-600",children:p.totalCalls||"—"})]})}),a.jsx(c.Zb,{children:(0,a.jsxs)(c.Ol,{className:"p-3",children:[a.jsx(c.SZ,{className:"text-xs",children:"Avg Duration"}),a.jsx(c.ll,{className:"text-xl text-slate-600",children:p.avgDuration?`${Math.round(p.avgDuration)}s`:"—"})]})}),a.jsx(c.Zb,{children:(0,a.jsxs)(c.Ol,{className:"p-3",children:[a.jsx(c.SZ,{className:"text-xs",children:"Status"}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${p.isActive?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"}`,children:p.isActive?"Active":"Inactive"})})]})})]})]}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[a.jsx(c.ll,{className:"text-slate-600",children:"Agent Configuration"}),a.jsx(c.SZ,{children:"Voice and AI model settings"})]}),a.jsx(c.aY,{className:"space-y-6",children:w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"name",className:"text-sm font-medium text-muted-foreground",children:"Agent Name"}),a.jsx(o.I,{id:"name",value:F,onChange:e=>T(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Organization"}),er?.organizationName?a.jsx("div",{className:"p-4 border rounded-lg border-teal-500 bg-teal-50",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-teal-100",children:a.jsx(P.Z,{className:"h-3 w-3 text-teal-600"})}),a.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:er.organizationName})]})}):a.jsx(r.default,{href:"/dashboard/settings?tab=preferences",className:"block",children:(0,a.jsxs)("div",{className:"p-4 border rounded-lg border-amber-300 bg-amber-50 hover:border-amber-400 transition-colors cursor-pointer",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-amber-100",children:a.jsx(A.Z,{className:"h-3 w-3 text-amber-600"})}),a.jsx("h3",{className:"font-semibold text-sm text-amber-800",children:"Not configured"})]}),a.jsx("p",{className:"text-xs text-amber-700",children:"Click to set up your organization profile in Settings"})]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone Number"}),eu?a.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading phone numbers..."}):ep?0===ed.length?(0,a.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-slate-100 border border-slate-200 rounded-md",children:[a.jsx(Z.Z,{className:"h-4 w-4 text-slate-500 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-slate-700",children:"No phone numbers available"}),a.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Import phone numbers from your Twilio account to assign to this agent."}),(0,a.jsxs)(r.default,{href:"/dashboard/settings",className:"inline-flex items-center gap-1 mt-2 text-xs text-teal-600 hover:underline",children:[a.jsx(M.Z,{className:"h-3 w-3"}),"Manage Phone Numbers"]})]})]}):a.jsx(a.Fragment,{children:(0,a.jsxs)("div",{className:"relative",ref:ey,children:[(0,a.jsxs)("button",{type:"button",onClick:()=>eb(!ej),disabled:eN,className:`flex items-center gap-3 px-3 py-2.5 text-sm border rounded-md w-full justify-between transition-colors disabled:opacity-50 ${ex?"border-teal-500 bg-teal-50":"bg-white hover:bg-slate-50"}`,children:[a.jsx("div",{className:"flex items-center gap-2.5 min-w-0",children:ex?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-teal-100 flex items-center justify-center flex-shrink-0",children:a.jsx(Z.Z,{className:"h-4 w-4 text-teal-600"})}),a.jsx("span",{className:"font-medium text-slate-600",children:O(ed.find(e=>e.id===ex)?.phoneNumber||"")})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center flex-shrink-0",children:a.jsx(Z.Z,{className:"h-4 w-4 text-muted-foreground"})}),a.jsx("span",{className:"text-muted-foreground",children:"No phone number assigned"})]})}),eN?a.jsx("span",{className:"text-xs text-muted-foreground",children:"Saving..."}):a.jsx(D.Z,{className:`h-4 w-4 text-muted-foreground flex-shrink-0 transition-transform ${ej?"rotate-180":""}`})]}),ej&&(0,a.jsxs)("div",{className:"absolute z-50 mt-1 w-full bg-white border rounded-md shadow-lg py-1 max-h-60 overflow-auto",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>ek(""),className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm hover:bg-slate-50 text-left",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center flex-shrink-0",children:a.jsx(Z.Z,{className:"h-4 w-4 text-muted-foreground"})}),a.jsx("span",{className:"text-muted-foreground",children:"No phone number"})]}),ed.map(t=>{let s=t.agent&&t.agent.id&&t.agent.id!==e.id,l=t.agent?.id===e.id;return(0,a.jsxs)("button",{type:"button",onClick:()=>ek(t.id),className:`w-full flex items-center gap-3 px-3 py-2.5 text-sm hover:bg-slate-50 text-left ${l?"bg-teal-50":""}`,children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${s?"bg-amber-100":"bg-teal-100"}`,children:a.jsx(Z.Z,{className:`h-4 w-4 ${s?"text-amber-600":"text-teal-600"}`})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("span",{className:"font-medium block truncate",children:O(t.phoneNumber)}),s&&(0,a.jsxs)("span",{className:"text-xs text-amber-600 block",children:["Currently assigned to: ",t.agent?.name]}),l&&a.jsx("span",{className:"text-xs text-teal-600 block",children:"Currently assigned to this agent"})]})]},t.id)})]})]})}):(0,a.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-md",children:[a.jsx(A.Z,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-amber-800",children:"Twilio not configured"}),a.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"Configure your Twilio credentials in Settings to enable phone number assignment."}),(0,a.jsxs)(r.default,{href:"/dashboard/settings",className:"inline-flex items-center gap-1 mt-2 text-xs text-teal-600 hover:underline",children:[a.jsx(M.Z,{className:"h-3 w-3"}),"Go to Settings"]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Agent Mode"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(h.jt).map(([e,t])=>(0,a.jsxs)("button",{type:"button",className:`p-3 border rounded-lg text-left hover:border-teal-500 transition-colors ${q===e?"border-teal-500 bg-teal-50":""}`,onClick:()=>L(e),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-teal-100",children:z(e)}),a.jsx("h3",{className:"font-semibold text-xs text-slate-600",children:t.label})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:t.description})]},e))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"callPurpose",className:"text-sm font-medium text-muted-foreground",children:"Call Purpose"}),a.jsx(o.I,{id:"callPurpose",value:el,onChange:e=>en(e.target.value),placeholder:"e.g., Schedule appointments, Answer support questions"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"voice",className:"text-sm font-medium text-muted-foreground",children:"Voice"}),a.jsx(u.$,{value:H,onChange:R})]}),("INBOUND"===q||"HYBRID"===q)&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"greeting",className:"text-sm font-medium text-muted-foreground",children:"Inbound Greeting (optional)"}),a.jsx(o.I,{id:"greeting",value:W,onChange:e=>G(e.target.value),placeholder:`e.g., Hi, this is ${h.Cy.find(e=>e.id===H)?.name||"your assistant"}. How can I help you today?`})]}),("OUTBOUND"===q||"HYBRID"===q)&&a.jsx(a.Fragment,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"outboundGreeting",className:"text-sm font-medium text-muted-foreground",children:"Outbound Greeting (optional)"}),a.jsx(o.I,{id:"outboundGreeting",value:Y,onChange:e=>V(e.target.value),placeholder:`e.g., Hi, this is ${h.Cy.find(e=>e.id===H)?.name||"your assistant"} calling from ${er?.organizationName||"[company]"}...`})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Call Window (optional)"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"From"}),a.jsx(o.I,{type:"time",value:X,onChange:e=>J(e.target.value),placeholder:"Start time",className:"flex-1 [&::-webkit-calendar-picker-indicator]:opacity-100 [&::-webkit-calendar-picker-indicator]:brightness-0 [&::-webkit-calendar-picker-indicator]:saturate-100 [&::-webkit-calendar-picker-indicator]:invert-[.5] [&::-webkit-calendar-picker-indicator]:sepia-[1] [&::-webkit-calendar-picker-indicator]:saturate-[10] [&::-webkit-calendar-picker-indicator]:hue-rotate-[130deg]"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"To"}),a.jsx(o.I,{type:"time",value:K,onChange:e=>Q(e.target.value),placeholder:"End time",className:"flex-1 [&::-webkit-calendar-picker-indicator]:opacity-100 [&::-webkit-calendar-picker-indicator]:brightness-0 [&::-webkit-calendar-picker-indicator]:saturate-100 [&::-webkit-calendar-picker-indicator]:invert-[.5] [&::-webkit-calendar-picker-indicator]:sepia-[1] [&::-webkit-calendar-picker-indicator]:saturate-[10] [&::-webkit-calendar-picker-indicator]:hue-rotate-[130deg]"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"systemPrompt",className:"text-sm font-medium text-muted-foreground",children:"System Prompt"}),a.jsx("textarea",{id:"systemPrompt",value:B,onChange:e=>U(e.target.value),className:"w-full min-h-[200px] px-3 py-2 border rounded-md bg-background"})]}),es?.connected&&(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Tool Access (optional)"}),(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border cursor-pointer hover:bg-slate-50 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:ee,onChange:e=>et(e.target.checked),className:"mt-0.5 h-4 w-4 rounded border-gray-300 text-teal-600 focus:ring-teal-500"}),a.jsx(I.Z,{className:"h-4 w-4 text-teal-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium text-sm text-slate-600",children:"Calendar"}),es?.provider&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-teal-100 text-teal-700",children:"calcom"===es.provider?"Cal.com":"Calendly"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"When enabled, this agent can check your availability and book appointments"})]})]})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start gap-6 pb-6 border-b",children:[a.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:h.Cy.find(e=>e.id===p.voice)?.avatar?a.jsx(i.default,{src:h.Cy.find(e=>e.id===p.voice).avatar,alt:h.Cy.find(e=>e.id===p.voice)?.name||"Voice",width:96,height:96,className:"w-full h-full object-cover"}):a.jsx($.Z,{className:"w-12 h-12 text-slate-400"})}),a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Voice"}),a.jsx("p",{className:"font-medium text-lg text-slate-600",children:h.Cy.find(e=>e.id===p.voice)?.name||p.voice}),a.jsx("p",{className:"text-sm text-muted-foreground",children:h.Cy.find(e=>e.id===p.voice)?.description}),a.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Powered by ElevenLabs and GPT-4o"})]})}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Tool Access"}),(0,a.jsxs)("div",{className:"flex items-start gap-3 mt-2",children:[a.jsx(I.Z,{className:"h-4 w-4 text-teal-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium text-sm text-slate-600",children:"Calendar"}),p.calendarEnabled&&es?.connected?a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-teal-100 text-teal-700",children:"calcom"===es.provider?"Cal.com":"Calendly"}):a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-slate-100 text-slate-600",children:"Disabled"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:p.calendarEnabled&&es?.connected?`Using "${es.eventTypeName}" for appointments`:es?.connected?"Calendar access not enabled for this agent":"Calendar not connected"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Organization"}),er?.organizationName?a.jsx("div",{className:"mt-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-teal-100",children:a.jsx(P.Z,{className:"h-3 w-3 text-teal-600"})}),a.jsx("span",{className:"font-medium text-slate-600",children:er.organizationName})]})}):(0,a.jsxs)("div",{className:"mt-1",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Not configured"}),(0,a.jsxs)(r.default,{href:"/dashboard/settings?tab=preferences",className:"inline-flex items-center gap-1 text-xs text-teal-600 hover:underline mt-1",children:[a.jsx(M.Z,{className:"h-3 w-3"}),"Set up in Settings"]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone Number"}),eu?a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Loading..."}):eo?a.jsx("div",{className:"mt-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-teal-100",children:a.jsx(Z.Z,{className:"h-3 w-3 text-teal-600"})}),a.jsx("span",{className:"font-medium text-slate-600",children:O(eo.phoneNumber)})]})}):(0,a.jsxs)("div",{className:"mt-1",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"No phone number assigned"}),(0,a.jsxs)(r.default,{href:"/dashboard/settings",className:"inline-flex items-center gap-1 text-xs text-teal-600 hover:underline mt-1",children:[a.jsx(M.Z,{className:"h-3 w-3"}),"Assign in Settings"]})]})]}),p.mode&&h.jt[p.mode]&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Mode"}),a.jsx("div",{className:"mt-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-teal-100",children:z(p.mode)}),a.jsx("span",{className:"font-medium text-slate-600",children:h.jt[p.mode].label})]})})]}),p.callPurpose&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Call Purpose"}),a.jsx("p",{className:"font-medium text-slate-600 mt-1",children:p.callPurpose})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),a.jsx("p",{className:"font-medium text-slate-600",children:new Date(p.createdAt).toLocaleDateString()})]}),("OUTBOUND"===p.mode||"HYBRID"===p.mode)&&p.callWindowStart&&p.callWindowEnd&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Call Window"}),(0,a.jsxs)("p",{className:"font-medium text-slate-600",children:[p.callWindowStart," - ",p.callWindowEnd]})]}),p.greeting&&(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Greeting"}),a.jsx("p",{className:"font-medium text-slate-600",children:p.greeting})]}),("OUTBOUND"===p.mode||"HYBRID"===p.mode)&&p.outboundGreeting&&(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Outbound Greeting"}),a.jsx("p",{className:"font-medium text-slate-600",children:p.outboundGreeting})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"System Prompt"}),a.jsx("p",{className:"font-medium text-slate-600 whitespace-pre-wrap bg-muted p-3 rounded-md text-sm mt-1",children:p.systemPrompt})]})]})]})})]}),_&&p&&a.jsx(v,{agentId:p.id,agentName:p.name,callWindow:p.callWindowStart&&p.callWindowEnd?{start:p.callWindowStart,end:p.callWindowEnd}:void 0,onClose:()=>E(!1),onCallInitiated:e=>{console.log("Call initiated:",e)}})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4",children:[a.jsx("div",{className:"text-muted-foreground",children:"Agent not found"}),a.jsx(r.default,{href:"/dashboard/agents",children:(0,a.jsxs)(d.z,{variant:"ghost",className:"text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:[a.jsx(C.Z,{className:"h-4 w-4 mr-2"}),"Back to Agents"]})})]})}},6913:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var a=s(326),l=s(7577),n=s(6226),r=s(3566),i=s(9635),d=s(8393);function c({value:e,onChange:t,disabled:s=!1}){let[c,o]=(0,l.useState)(!1),m=(0,l.useRef)(null),x=r.Cy.find(t=>t.id===e)||r.Cy[0],h=e=>{t(e),o(!1)};return(0,a.jsxs)("div",{className:"relative",ref:m,children:[(0,a.jsxs)("button",{type:"button",onClick:()=>!s&&o(!c),disabled:s,className:"w-full flex items-center gap-3 px-3 py-2.5 border rounded-md bg-white hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:x.avatar?a.jsx(n.default,{src:x.avatar,alt:x.name,width:48,height:48,className:"w-full h-full object-cover"}):a.jsx(i.Z,{className:"w-6 h-6 text-slate-400"})}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[a.jsx("div",{className:"font-medium text-sm text-slate-600",children:x.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:x.description})]}),a.jsx(d.Z,{className:`w-4 h-4 text-slate-400 transition-transform ${c?"rotate-180":""}`})]}),c&&a.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg max-h-80 overflow-y-auto",children:r.Cy.map(t=>(0,a.jsxs)("button",{type:"button",onClick:()=>h(t.id),className:`w-full flex items-center gap-3 px-3 py-2.5 hover:bg-slate-50 transition-colors ${t.id===e?"bg-primary/5":""}`,children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:t.avatar?a.jsx(n.default,{src:t.avatar,alt:t.name,width:48,height:48,className:"w-full h-full object-cover"}):a.jsx(i.Z,{className:"w-6 h-6 text-slate-400"})}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[a.jsx("div",{className:"font-medium text-sm text-slate-600",children:t.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:t.description})]}),t.id===e&&a.jsx("div",{className:"w-2 h-2 rounded-full bg-primary flex-shrink-0"})]},t.id))})]})}},1190:(e,t,s)=>{"use strict";s.d(t,{I:()=>r});var a=s(326),l=s(7577),n=s(1223);let r=l.forwardRef(({className:e,type:t,...s},l)=>a.jsx("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...s}));r.displayName="Input"},7427:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/workspaces/AICallerSaaS/frontend/src/app/dashboard/agents/[id]/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[172,285,323,978],()=>s(2865));module.exports=a})();