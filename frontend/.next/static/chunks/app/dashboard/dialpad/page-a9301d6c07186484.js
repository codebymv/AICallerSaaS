(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[770],{21969:function(e,t,n){Promise.resolve().then(n.bind(n,42696))},79205:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var a=n(2265);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&n.indexOf(e)===t).join(" ")};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:n="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...r,width:l,height:l,stroke:n,strokeWidth:c?24*Number(i)/Number(l):i,className:s("lucide",o),...m},[...u.map(e=>{let[t,n]=e;return(0,a.createElement)(t,n)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let n=(0,a.forwardRef)((n,r)=>{let{className:c,...o}=n;return(0,a.createElement)(i,{ref:r,iconNode:t,className:s("lucide-".concat(l(e)),c),...o})});return n.displayName="".concat(e),n}},82222:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},40875:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},50768:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("Delete",[["path",{d:"M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z",key:"1oy587"}],["line",{x1:"18",x2:"12",y1:"9",y2:"15",key:"1olkx5"}],["line",{x1:"12",x2:"18",y1:"9",y2:"15",key:"1n50pc"}]])},41217:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]])},51817:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},12194:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]])},99397:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},99376:function(e,t,n){"use strict";var a=n(35475);n.o(a,"useParams")&&n.d(t,{useParams:function(){return a.useParams}}),n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})},42696:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var a=n(57437),l=n(2265),s=n(99376),r=n(27648),i=n(79820),c=n(12381),o=n(75060),d=n(65670),u=n(71837),m=n(23340),f=n(51817),h=n(41217),x=n(82222),p=n(99397),g=n(50768),y=n(12194);let v=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}];function w(){(0,s.useRouter)();let{toast:e}=(0,m.pm)(),[t,n]=(0,l.useState)([]),[w,j]=(0,l.useState)(""),[b,N]=(0,l.useState)(""),[k,C]=(0,l.useState)(!0),[Z,E]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{let e=((await u.h.getAgents()).data||[]).filter(e=>("OUTBOUND"===e.mode||"HYBRID"===e.mode)&&e.isActive);n(e),e.length>0&&j(e[0].id)}catch(e){console.error("Failed to fetch agents:",e)}finally{C(!1)}})()},[]),(0,l.useEffect)(()=>{let e=e=>{!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)&&(Z||(/^[0-9*#]$/.test(e.key)?(e.preventDefault(),A(e.key)):"Backspace"===e.key?(e.preventDefault(),D()):"Enter"===e.key&&(e.preventDefault(),M())))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[b,Z,w,t]);let S=t.find(e=>e.id===w),_=e=>e.length<=3?e:e.length<=6?"(".concat(e.slice(0,3),") ").concat(e.slice(3)):e.length<=10?"(".concat(e.slice(0,3),") ").concat(e.slice(3,6),"-").concat(e.slice(6)):"(".concat(e.slice(0,3),") ").concat(e.slice(3,6),"-").concat(e.slice(6,10)),A=e=>{let t=b.replace(/\D/g,"");t.length<10&&N(_(t+e))},D=()=>{N(_(b.replace(/\D/g,"").slice(0,-1)))},W=()=>{if(!(null==S?void 0:S.callWindowStart)||!(null==S?void 0:S.callWindowEnd))return!0;let e=new Date,t="".concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"));return t>=S.callWindowStart&&t<=S.callWindowEnd},M=async()=>{let t=b.replace(/\D/g,"");if(!w){e({title:"No agent selected",description:"Please select an agent to make the call",variant:"destructive"});return}if(t.length<10){e({title:"Invalid phone number",description:"Please enter a valid 10-digit phone number",variant:"destructive"});return}if(!W()){e({title:"Outside call window",description:"Calls can only be made between ".concat(null==S?void 0:S.callWindowStart," and ").concat(null==S?void 0:S.callWindowEnd),variant:"destructive"});return}E(!0);try{await u.h.makeOutboundCall(w,"+1".concat(t)),e({title:"\uD83D\uDCF1 Dialing...",description:"Calling ".concat(b)})}catch(t){e({title:"Error",description:t instanceof u.M?t.message:"Failed to initiate call",variant:"destructive"})}finally{E(!1)}},P=b.replace(/\D/g,"");return k?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)(f.Z,{className:"h-8 w-8 animate-spin text-teal-600"})}):0===t.length?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(h.Z,{className:"h-8 w-8 text-slate-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-slate-600",children:"Dialpad"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Make outbound calls with your AI agents"})]})]}),(0,a.jsx)(i.Zb,{children:(0,a.jsx)(i.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-slate-100 flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"h-8 w-8 text-slate-400"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"No Outbound Agents"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-6",children:"You need at least one active agent with Outbound or Hybrid mode to make calls."}),(0,a.jsx)(r.default,{href:"/dashboard/agents/new",children:(0,a.jsxs)(c.z,{className:"bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Create an Agent"]})})]})})})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(h.Z,{className:"h-7 w-7 sm:h-8 sm:w-8 text-slate-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-600",children:"Dialpad"}),(0,a.jsx)("p",{className:"hidden sm:block text-muted-foreground text-sm",children:"Make outbound calls with your AI agents"})]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(i.Zb,{className:"max-w-md w-full",children:(0,a.jsxs)(i.aY,{className:"pt-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{className:"text-muted-foreground",children:"Select Agent"}),(0,a.jsx)(d.V,{agents:t,selectedAgentId:w,onSelect:j,emptyLabel:"none",size:"lg"})]}),(0,a.jsxs)("div",{className:"relative py-4",children:[(0,a.jsx)("div",{className:"h-12 flex items-center justify-center",children:b?(0,a.jsx)("span",{className:"text-3xl font-semibold text-slate-600 tracking-wide",children:b}):(0,a.jsx)("span",{className:"text-3xl text-slate-300",children:"(___) ___-____"})}),b&&(0,a.jsx)("button",{type:"button",onClick:D,className:"absolute right-0 top-1/2 -translate-y-1/2 p-2 text-slate-400 hover:text-slate-600 transition-colors",disabled:Z,children:(0,a.jsx)(g.Z,{className:"h-6 w-6"})})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3",children:v.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>A(e.digit),className:"flex flex-col items-center justify-center h-16 rounded-full bg-slate-100 hover:bg-slate-200 active:bg-slate-300 transition-colors",disabled:Z,children:[(0,a.jsx)("span",{className:"text-xl font-semibold text-slate-600",children:e.digit}),e.letters&&(0,a.jsx)("span",{className:"text-[10px] text-slate-400 tracking-widest",children:e.letters})]},e.digit))}),(null==S?void 0:S.callWindowStart)&&(null==S?void 0:S.callWindowEnd)&&!W()&&(0,a.jsx)("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-amber-700",children:["⚠️ Outside call window (",S.callWindowStart," - ",S.callWindowEnd,")"]})}),(0,a.jsx)(c.z,{type:"button",onClick:M,className:"w-full h-14 text-lg bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",disabled:Z||P.length<10||!w,children:Z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z,{className:"h-5 w-5 mr-2 animate-spin"}),"Calling..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{className:"h-5 w-5 mr-2"}),"Call"]})})]})})})]})}},65670:function(e,t,n){"use strict";n.d(t,{V:function(){return d}});var a=n(57437),l=n(2265),s=n(33145),r=n(82222),i=n(40875),c=n(78705);let o=e=>{if(!e)return null;let t=e.toLowerCase(),n=c.Cy.find(e=>e.id===t||e.name.toLowerCase()===t);return(null==n?void 0:n.avatar)||null};function d(e){let{agents:t,selectedAgentId:n,onSelect:c,disabled:d=!1,size:u="md",emptyLabel:m="none",showEmptyOption:f=!0,className:h=""}=e,[x,p]=(0,l.useState)(!1),g=(0,l.useRef)(null),y=t.find(e=>e.id===n),v=y?o(y.voice):null,w={sm:{avatar:32,icon:"h-4 w-4",containerClass:"w-8 h-8",minWidth:"min-w-[140px]"},md:{avatar:40,icon:"h-5 w-5",containerClass:"w-10 h-10",minWidth:"min-w-[180px]"},lg:{avatar:48,icon:"h-6 w-6",containerClass:"w-12 h-12",minWidth:"min-w-[200px]"}}[u],j="all"===m?"All Agents":"No agent";return(0,l.useEffect)(()=>{let e=e=>{g.current&&!g.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.jsxs)("div",{className:"relative ".concat(h),ref:g,children:[(0,a.jsxs)("button",{type:"button",onClick:()=>!d&&p(!x),disabled:d,className:"flex items-center gap-2.5 px-3 py-2 text-sm border rounded-md bg-white disabled:opacity-50 ".concat(w.minWidth," justify-between hover:bg-slate-50 transition-colors w-full"),children:[(0,a.jsx)("div",{className:"flex items-center gap-2.5 min-w-0",children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"".concat(w.containerClass," rounded-full bg-slate-100 flex items-center justify-center overflow-hidden flex-shrink-0"),children:v?(0,a.jsx)(s.default,{src:v,alt:y.name,width:w.avatar,height:w.avatar,className:"w-full h-full object-cover"}):(0,a.jsx)(r.Z,{className:"".concat(w.icon," text-muted-foreground")})}),(0,a.jsx)("span",{className:"truncate font-medium",children:y.name})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"".concat(w.containerClass," rounded-full bg-slate-100 flex items-center justify-center flex-shrink-0"),children:(0,a.jsx)(r.Z,{className:"".concat(w.icon," text-muted-foreground")})}),(0,a.jsx)("span",{className:"text-muted-foreground",children:j})]})}),(0,a.jsx)(i.Z,{className:"h-4 w-4 text-muted-foreground flex-shrink-0 transition-transform ".concat(x?"rotate-180":"")})]}),x&&(0,a.jsxs)("div",{className:"absolute z-50 mt-1 w-full min-w-[200px] bg-white border rounded-md shadow-lg py-1 max-h-60 overflow-auto right-0 sm:right-auto",children:[f&&(0,a.jsxs)("button",{type:"button",onClick:()=>{c(""),p(!1)},className:"w-full flex items-center gap-2.5 px-3 py-2.5 text-sm hover:bg-slate-50 text-left ".concat(n?"":"bg-blue-50"),children:[(0,a.jsx)("div",{className:"".concat(w.containerClass," rounded-full bg-slate-100 flex items-center justify-center flex-shrink-0"),children:(0,a.jsx)(r.Z,{className:"".concat(w.icon," text-muted-foreground")})}),(0,a.jsx)("span",{className:"text-muted-foreground",children:j})]}),t.map(e=>{let t=o(e.voice);return(0,a.jsxs)("button",{type:"button",onClick:()=>{c(e.id),p(!1)},className:"w-full flex items-center gap-2.5 px-3 py-2.5 text-sm hover:bg-slate-50 text-left ".concat(e.id===n?"bg-blue-50":""),children:[(0,a.jsx)("div",{className:"".concat(w.containerClass," rounded-full bg-slate-100 flex items-center justify-center overflow-hidden flex-shrink-0"),children:t?(0,a.jsx)(s.default,{src:t,alt:e.name,width:w.avatar,height:w.avatar,className:"w-full h-full object-cover"}):(0,a.jsx)(r.Z,{className:"".concat(w.icon," text-muted-foreground")})}),(0,a.jsx)("span",{className:"truncate font-medium",children:e.name})]},e.id)})]})]})}},75060:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});var a=n(57437),l=n(2265),s=n(93448);let r=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,a.jsx)("label",{ref:t,className:(0,s.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",n),...l})});r.displayName="Label"},94169:function(e,t,n){"use strict";n.d(t,{Z8:function(){return d},g7:function(){return u}});var a,l=n(2265),s=n(96923),r=n(57437),i=Symbol.for("react.lazy"),c=(a||(a=n.t(l,2)))[" use ".trim().toString()];function o(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function d(e){let t=function(e){let t=l.forwardRef((e,t)=>{let{children:n,...a}=e;if(o(n)&&"function"==typeof c&&(n=c(n._payload)),l.isValidElement(n)){var r;let e,i;let c=(r=n,(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref),o=function(e,t){let n={...t};for(let a in t){let l=e[a],s=t[a];/^on[A-Z]/.test(a)?l&&s?n[a]=(...e)=>{let t=s(...e);return l(...e),t}:l&&(n[a]=l):"style"===a?n[a]={...l,...s}:"className"===a&&(n[a]=[l,s].filter(Boolean).join(" "))}return{...e,...n}}(a,n.props);return n.type!==l.Fragment&&(o.ref=t?(0,s.F)(t,c):c),l.cloneElement(n,o)}return l.Children.count(n)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),n=l.forwardRef((e,n)=>{let{children:a,...s}=e;o(a)&&"function"==typeof c&&(a=c(a._payload));let i=l.Children.toArray(a),d=i.find(f);if(d){let e=d.props.children,a=i.map(t=>t!==d?t:l.Children.count(e)>1?l.Children.only(null):l.isValidElement(e)?e.props.children:null);return(0,r.jsx)(t,{...s,ref:n,children:l.isValidElement(e)?l.cloneElement(e,void 0,a):null})}return(0,r.jsx)(t,{...s,ref:n,children:a})});return n.displayName=`${e}.Slot`,n}var u=d("Slot"),m=Symbol("radix.slottable");function f(e){return l.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===m}}},function(e){e.O(0,[225,648,145,92,452,971,117,744],function(){return e(e.s=21969)}),_N_E=e.O()}]);