(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[770],{21969:function(e,t,n){Promise.resolve().then(n.bind(n,42696))},79205:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var l=n(2265);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&n.indexOf(e)===t).join(" ")};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,l.forwardRef)((e,t)=>{let{color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...m}=e;return(0,l.createElement)("svg",{ref:t,...r,width:s,height:s,stroke:n,strokeWidth:c?24*Number(i)/Number(s):i,className:a("lucide",o),...m},[...u.map(e=>{let[t,n]=e;return(0,l.createElement)(t,n)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let n=(0,l.forwardRef)((n,r)=>{let{className:c,...o}=n;return(0,l.createElement)(i,{ref:r,iconNode:t,className:a("lucide-".concat(s(e)),c),...o})});return n.displayName="".concat(e),n}},71866:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});let l=(0,n(79205).Z)("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]])},68428:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});let l=(0,n(79205).Z)("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]])},17580:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});let l=(0,n(79205).Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},82222:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});let l=(0,n(79205).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},40875:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});let l=(0,n(79205).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},50768:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});let l=(0,n(79205).Z)("Delete",[["path",{d:"M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z",key:"1oy587"}],["line",{x1:"18",x2:"12",y1:"9",y2:"15",key:"1olkx5"}],["line",{x1:"12",x2:"18",y1:"9",y2:"15",key:"1n50pc"}]])},41217:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});let l=(0,n(79205).Z)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]])},51817:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});let l=(0,n(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},12194:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});let l=(0,n(79205).Z)("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]])},99397:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});let l=(0,n(79205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},99376:function(e,t,n){"use strict";var l=n(35475);n.o(l,"useParams")&&n.d(t,{useParams:function(){return l.useParams}}),n.o(l,"usePathname")&&n.d(t,{usePathname:function(){return l.usePathname}}),n.o(l,"useRouter")&&n.d(t,{useRouter:function(){return l.useRouter}}),n.o(l,"useSearchParams")&&n.d(t,{useSearchParams:function(){return l.useSearchParams}})},42696:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var l=n(57437),s=n(2265),a=n(99376),r=n(33145),i=n(27648),c=n(79820),o=n(12381),d=n(75060),u=n(71837),m=n(23340),h=n(78705),f=n(71866),x=n(17580),p=n(68428),g=n(51817),y=n(41217),w=n(82222),v=n(99397),j=n(40875),b=n(50768),N=n(12194);let k=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}],Z=e=>{if(!e)return null;let t=h.Cy.find(t=>t.id===e.toLowerCase());return(null==t?void 0:t.avatar)||null},C=e=>{switch(e){case"INBOUND":return(0,l.jsx)(f.Z,{className:"h-3 w-3"});case"OUTBOUND":return(0,l.jsx)(x.Z,{className:"h-3 w-3"});case"HYBRID":return(0,l.jsx)(p.Z,{className:"h-3 w-3"});default:return null}};function E(){(0,a.useRouter)();let{toast:e}=(0,m.pm)(),[t,n]=(0,s.useState)([]),[h,f]=(0,s.useState)(""),[x,p]=(0,s.useState)(""),[E,D]=(0,s.useState)(!0),[S,M]=(0,s.useState)(!1),[_,A]=(0,s.useState)(!1),R=(0,s.useRef)(null);(0,s.useEffect)(()=>{(async()=>{try{let e=((await u.h.getAgents()).data||[]).filter(e=>("OUTBOUND"===e.mode||"HYBRID"===e.mode)&&e.isActive);n(e),e.length>0&&f(e[0].id)}catch(e){console.error("Failed to fetch agents:",e)}finally{D(!1)}})()},[]),(0,s.useEffect)(()=>{let e=e=>{R.current&&!R.current.contains(e.target)&&A(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.useEffect)(()=>{let e=e=>{!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)&&(S||(/^[0-9*#]$/.test(e.key)?(e.preventDefault(),W(e.key)):"Backspace"===e.key?(e.preventDefault(),H()):"Enter"===e.key&&(e.preventDefault(),B())))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[x,S,h,t]);let O=t.find(e=>e.id===h),P=e=>e.length<=3?e:e.length<=6?"(".concat(e.slice(0,3),") ").concat(e.slice(3)):e.length<=10?"(".concat(e.slice(0,3),") ").concat(e.slice(3,6),"-").concat(e.slice(6)):"(".concat(e.slice(0,3),") ").concat(e.slice(3,6),"-").concat(e.slice(6,10)),W=e=>{let t=x.replace(/\D/g,"");t.length<10&&p(P(t+e))},H=()=>{p(P(x.replace(/\D/g,"").slice(0,-1)))},L=()=>{if(!(null==O?void 0:O.callWindowStart)||!(null==O?void 0:O.callWindowEnd))return!0;let e=new Date,t="".concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"));return t>=O.callWindowStart&&t<=O.callWindowEnd},B=async()=>{let t=x.replace(/\D/g,"");if(!h){e({title:"No agent selected",description:"Please select an agent to make the call",variant:"destructive"});return}if(t.length<10){e({title:"Invalid phone number",description:"Please enter a valid 10-digit phone number",variant:"destructive"});return}if(!L()){e({title:"Outside call window",description:"Calls can only be made between ".concat(null==O?void 0:O.callWindowStart," and ").concat(null==O?void 0:O.callWindowEnd),variant:"destructive"});return}M(!0);try{await u.h.makeOutboundCall(h,"+1".concat(t)),e({title:"\uD83D\uDCF1 Dialing...",description:"Calling ".concat(x)})}catch(t){e({title:"Error",description:t instanceof u.M?t.message:"Failed to initiate call",variant:"destructive"})}finally{M(!1)}},I=x.replace(/\D/g,"");return E?(0,l.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,l.jsx)(g.Z,{className:"h-8 w-8 animate-spin text-teal-600"})}):0===t.length?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(y.Z,{className:"h-8 w-8 text-slate-600"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-slate-600",children:"Dialpad"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Make outbound calls with your AI agents"})]})]}),(0,l.jsx)(c.Zb,{children:(0,l.jsx)(c.aY,{className:"pt-6",children:(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-slate-100 flex items-center justify-center",children:(0,l.jsx)(w.Z,{className:"h-8 w-8 text-slate-400"})}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"No Outbound Agents"}),(0,l.jsx)("p",{className:"text-muted-foreground mb-6",children:"You need at least one active agent with Outbound or Hybrid mode to make calls."}),(0,l.jsx)(i.default,{href:"/dashboard/agents/new",children:(0,l.jsxs)(o.z,{className:"bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:[(0,l.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),"Create an Agent"]})})]})})})]}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(y.Z,{className:"h-7 w-7 sm:h-8 sm:w-8 text-slate-600"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-600",children:"Dialpad"}),(0,l.jsx)("p",{className:"hidden sm:block text-muted-foreground text-sm",children:"Make outbound calls with your AI agents"})]})]}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)(c.Zb,{className:"max-w-md w-full",children:(0,l.jsxs)(c.aY,{className:"pt-6 space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(d._,{className:"text-muted-foreground",children:"Select Agent"}),(0,l.jsxs)("div",{className:"relative",ref:R,children:[(0,l.jsxs)("button",{type:"button",onClick:()=>A(!_),className:"flex items-center gap-3 px-3 py-2.5 text-sm border rounded-md bg-background w-full justify-between hover:bg-slate-50 transition-colors",children:[(0,l.jsx)("div",{className:"flex items-center gap-3 min-w-0",children:O?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-full bg-teal-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:Z(O.voice)?(0,l.jsx)(r.default,{src:Z(O.voice),alt:O.name,width:40,height:40,className:"w-full h-full object-cover"}):(0,l.jsx)(w.Z,{className:"h-5 w-5 text-teal-600"})}),(0,l.jsxs)("div",{className:"text-left min-w-0",children:[(0,l.jsx)("span",{className:"font-medium text-slate-600 block truncate",children:O.name}),(0,l.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[C(O.mode),"HYBRID"===O.mode?"Hybrid":"Outbound"]})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center flex-shrink-0",children:(0,l.jsx)(w.Z,{className:"h-5 w-5 text-muted-foreground"})}),(0,l.jsx)("span",{className:"text-muted-foreground",children:"Select an agent"})]})}),(0,l.jsx)(j.Z,{className:"h-4 w-4 text-muted-foreground flex-shrink-0 transition-transform ".concat(_?"rotate-180":"")})]}),_&&(0,l.jsx)("div",{className:"absolute z-50 mt-1 w-full bg-white border rounded-md shadow-lg py-1 max-h-60 overflow-auto",children:t.map(e=>{let t=Z(e.voice);return(0,l.jsxs)("button",{type:"button",onClick:()=>{f(e.id),A(!1)},className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm hover:bg-slate-50 text-left ".concat(e.id===h?"bg-teal-50":""),children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-full bg-teal-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:t?(0,l.jsx)(r.default,{src:t,alt:e.name,width:40,height:40,className:"w-full h-full object-cover"}):(0,l.jsx)(w.Z,{className:"h-5 w-5 text-teal-600"})}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("span",{className:"font-medium text-slate-600 block truncate",children:e.name}),(0,l.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[C(e.mode),"HYBRID"===e.mode?"Hybrid":"Outbound"]})]})]},e.id)})})]})]}),(0,l.jsxs)("div",{className:"relative py-4",children:[(0,l.jsx)("div",{className:"h-12 flex items-center justify-center",children:x?(0,l.jsx)("span",{className:"text-3xl font-semibold text-slate-600 tracking-wide",children:x}):(0,l.jsx)("span",{className:"text-3xl text-slate-300",children:"(___) ___-____"})}),x&&(0,l.jsx)("button",{type:"button",onClick:H,className:"absolute right-0 top-1/2 -translate-y-1/2 p-2 text-slate-400 hover:text-slate-600 transition-colors",disabled:S,children:(0,l.jsx)(b.Z,{className:"h-6 w-6"})})]}),(0,l.jsx)("div",{className:"grid grid-cols-3 gap-3",children:k.map(e=>(0,l.jsxs)("button",{type:"button",onClick:()=>W(e.digit),className:"flex flex-col items-center justify-center h-16 rounded-full bg-slate-100 hover:bg-slate-200 active:bg-slate-300 transition-colors",disabled:S,children:[(0,l.jsx)("span",{className:"text-xl font-semibold text-slate-600",children:e.digit}),e.letters&&(0,l.jsx)("span",{className:"text-[10px] text-slate-400 tracking-widest",children:e.letters})]},e.digit))}),(null==O?void 0:O.callWindowStart)&&(null==O?void 0:O.callWindowEnd)&&!L()&&(0,l.jsx)("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:(0,l.jsxs)("p",{className:"text-sm text-amber-700",children:["⚠️ Outside call window (",O.callWindowStart," - ",O.callWindowEnd,")"]})}),(0,l.jsx)(o.z,{type:"button",onClick:B,className:"w-full h-14 text-lg bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",disabled:S||I.length<10||!h,children:S?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.Z,{className:"h-5 w-5 mr-2 animate-spin"}),"Calling..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(N.Z,{className:"h-5 w-5 mr-2"}),"Call"]})})]})})})]})}},75060:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});var l=n(57437),s=n(2265),a=n(93448);let r=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,l.jsx)("label",{ref:t,className:(0,a.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",n),...s})});r.displayName="Label"},94169:function(e,t,n){"use strict";n.d(t,{g7:function(){return d}});var l,s=n(2265),a=n(96923),r=n(57437),i=Symbol.for("react.lazy"),c=(l||(l=n.t(s,2)))[" use ".trim().toString()];function o(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var d=function(e){let t=function(e){let t=s.forwardRef((e,t)=>{let{children:n,...l}=e;if(o(n)&&"function"==typeof c&&(n=c(n._payload)),s.isValidElement(n)){var r;let e,i;let c=(r=n,(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref),o=function(e,t){let n={...t};for(let l in t){let s=e[l],a=t[l];/^on[A-Z]/.test(l)?s&&a?n[l]=(...e)=>{let t=a(...e);return s(...e),t}:s&&(n[l]=s):"style"===l?n[l]={...s,...a}:"className"===l&&(n[l]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}(l,n.props);return n.type!==s.Fragment&&(o.ref=t?(0,a.F)(t,c):c),s.cloneElement(n,o)}return s.Children.count(n)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),n=s.forwardRef((e,n)=>{let{children:l,...a}=e;o(l)&&"function"==typeof c&&(l=c(l._payload));let i=s.Children.toArray(l),d=i.find(m);if(d){let e=d.props.children,l=i.map(t=>t!==d?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,r.jsx)(t,{...a,ref:n,children:s.isValidElement(e)?s.cloneElement(e,void 0,l):null})}return(0,r.jsx)(t,{...a,ref:n,children:l})});return n.displayName=`${e}.Slot`,n}("Slot"),u=Symbol("radix.slottable");function m(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===u}}},function(e){e.O(0,[225,145,648,92,452,971,117,744],function(){return e(e.s=21969)}),_N_E=e.O()}]);