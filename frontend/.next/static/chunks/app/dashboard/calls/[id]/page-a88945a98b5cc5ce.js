(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[425],{1360:function(e,t,s){Promise.resolve().then(s.bind(s,9754))},9205:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var r=s(2265);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ")};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...l,width:n,height:n,stroke:s,strokeWidth:c?24*Number(i)/Number(n):i,className:a("lucide",o),...m},[...u.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let s=(0,r.forwardRef)((s,l)=>{let{className:c,...o}=s;return(0,r.createElement)(i,{ref:l,iconNode:t,className:a("lucide-".concat(n(e)),c),...o})});return s.displayName="".concat(e),s}},1866:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]])},2660:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7580:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},2222:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},9322:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1671:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9388:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1817:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2194:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]])},3041:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},9754:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return E}});var r=s(7437),n=s(2265),a=s(9376),l=s(7648),i=s(3145),c=s(1671),o=s(9388),d=s(1817),u=s(9322),m=s(2660),h=s(3041),x=s(2194),f=s(1866),p=s(7580),j=s(2222),g=s(9820),y=s(2381),N=s(1837),v=s(3340),w=s(8705);let b=e=>{if(!e)return null;let t=w.Cy.find(t=>t.id===e.toLowerCase());return(null==t?void 0:t.avatar)||null},S=e=>e&&0!==e?"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0")):"0:00",Z=e=>{let t=new Date(e),s=t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),r=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return"".concat(s," at ").concat(r)},k=e=>{if(!e)return"Unknown";let t=e.replace(/\D/g,"");return 11===t.length&&t.startsWith("1")?"(".concat(t.slice(1,4),") ").concat(t.slice(4,7),"-").concat(t.slice(7)):e},A=e=>{switch(e){case"completed":return(0,r.jsx)(c.Z,{className:"h-5 w-5 text-green-500"});case"failed":return(0,r.jsx)(o.Z,{className:"h-5 w-5 text-red-500"});case"in-progress":return(0,r.jsx)(d.Z,{className:"h-5 w-5 text-blue-500 animate-spin"});case"ringing":return(0,r.jsx)(u.Z,{className:"h-5 w-5 text-yellow-500"});default:return(0,r.jsx)(u.Z,{className:"h-5 w-5 text-slate-500"})}},C=e=>w.yh[e]||w.yh.default;function E(){var e,t;let s=(0,a.useParams)(),c=(0,a.useRouter)(),{toast:o}=(0,v.pm)(),[u,E]=(0,n.useState)(null),[z,O]=(0,n.useState)(!0),T=s.id;(0,n.useEffect)(()=>{let e=()=>{window.innerWidth>=1024?document.body.style.overflow="hidden":document.body.style.overflow=""};return e(),window.addEventListener("resize",e),()=>{document.body.style.overflow="",window.removeEventListener("resize",e)}},[]),(0,n.useEffect)(()=>{T&&M()},[T]);let M=async()=>{try{let e=await N.h.getCall(T);E(e.data)}catch(e){o({title:"Error",description:e instanceof N.M?e.message:"Failed to fetch call details",variant:"destructive"}),e instanceof N.M&&404===e.status&&c.push("/dashboard/calls")}finally{O(!1)}};if(z)return(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)(d.Z,{className:"h-8 w-8 animate-spin text-teal-600"})});if(!u)return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsx)(l.default,{href:"/dashboard/calls",children:(0,r.jsxs)(y.z,{variant:"ghost",size:"sm",className:"text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Back to Calls"]})})}),(0,r.jsx)(g.Zb,{children:(0,r.jsxs)(g.aY,{className:"flex flex-col items-center justify-center py-16",children:[(0,r.jsx)(h.Z,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Call not found"}),(0,r.jsx)("p",{className:"text-muted-foreground text-center",children:"The call you're looking for doesn't exist or has been deleted."})]})})]});let _=u.agentVoice||(null===(e=u.agent)||void 0===e?void 0:e.voice),D=u.agentName||(null===(t=u.agent)||void 0===t?void 0:t.name),P=_?b(_):null;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(l.default,{href:"/dashboard/calls",children:(0,r.jsxs)(y.z,{variant:"ghost",size:"sm",className:"text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Back"]})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(x.Z,{className:"h-7 w-7 sm:h-8 sm:w-8 text-slate-600"}),(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-600",children:"Call Details"})]}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:Z(u.startTime||u.createdAt)})]})]}),(0,r.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ".concat(C(u.status)),children:[A(u.status),u.status.charAt(0).toUpperCase()+u.status.slice(1).replace("-"," ")]})]}),(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,r.jsxs)(g.Zb,{children:[(0,r.jsx)(g.Ol,{children:(0,r.jsx)(g.ll,{className:"text-lg text-slate-600",children:"Call Information"})}),(0,r.jsxs)(g.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-lg",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat("inbound"===u.direction?w.zl.inbound.bg:w.zl.outbound.bg),children:"inbound"===u.direction?(0,r.jsx)(f.Z,{className:"h-5 w-5 ".concat(w.zl.inbound.icon)}):(0,r.jsx)(p.Z,{className:"h-5 w-5 ".concat(w.zl.outbound.icon)})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"inbound"===u.direction?"Inbound Call":"Outbound Call"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("span",{className:"font-mono text-slate-600",children:k(u.from)}),(0,r.jsx)("span",{className:"text-muted-foreground",children:"â†’"}),(0,r.jsx)("span",{className:"font-mono text-slate-600",children:k(u.to)})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Duration"}),(0,r.jsx)("p",{className:"font-medium text-slate-600",children:S(u.duration||0)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Date"}),(0,r.jsx)("p",{className:"font-medium text-sm text-slate-600",children:new Date(u.startTime||u.createdAt).toLocaleDateString()})]})]}),void 0!==u.costUsd&&Number(u.costUsd)>0&&(0,r.jsxs)("div",{className:"pt-2 border-t",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Estimated Cost"}),(0,r.jsxs)("p",{className:"font-medium text-slate-600",children:["$",Number(u.costUsd).toFixed(4)]})]})]})]}),(0,r.jsxs)(g.Zb,{children:[(0,r.jsx)(g.Ol,{children:(0,r.jsx)(g.ll,{className:"text-lg text-slate-600",children:"AI Agent"})}),(0,r.jsx)(g.aY,{children:D||u.agent?(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[P?(0,r.jsx)(i.default,{src:P,alt:D||"Agent",width:48,height:48,className:"rounded-full"}):(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:(0,r.jsx)(j.Z,{className:"h-6 w-6 text-primary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-slate-600",children:D}),_&&(0,r.jsxs)("p",{className:"text-sm text-muted-foreground capitalize",children:["Voice: ",_]})]}),u.agent&&(0,r.jsx)(l.default,{href:"/dashboard/agents/".concat(u.agent.id),className:"ml-auto",children:(0,r.jsx)(y.z,{variant:"outline",size:"sm",className:"text-teal-600 border-teal-600 hover:bg-teal-50",children:"View Agent"})})]}):(0,r.jsxs)("div",{className:"flex items-center gap-4 text-muted-foreground",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-slate-100 flex items-center justify-center",children:(0,r.jsx)(j.Z,{className:"h-6 w-6"})}),(0,r.jsx)("p",{children:"Agent information unavailable"})]})})]})]}),u.transcript&&(0,r.jsxs)(g.Zb,{children:[(0,r.jsx)(g.Ol,{children:(0,r.jsx)(g.ll,{className:"text-lg text-slate-600",children:"Transcript"})}),(0,r.jsx)(g.aY,{children:(0,r.jsx)("div",{className:"bg-slate-50 rounded-lg p-4 max-h-[400px] overflow-y-auto",children:Array.isArray(u.transcript)?(0,r.jsx)("div",{className:"space-y-3",children:u.transcript.map((e,t)=>(0,r.jsx)("div",{className:"flex gap-3 ".concat("assistant"===e.role?"justify-start":"justify-end"),children:(0,r.jsxs)("div",{className:"max-w-[80%] p-3 rounded-lg text-sm ".concat("assistant"===e.role?"bg-white border":"bg-blue-100 text-blue-900"),children:[(0,r.jsx)("p",{className:"text-xs text-muted-foreground mb-1 capitalize",children:e.role||"Unknown"}),(0,r.jsx)("p",{children:e.content||e.text||JSON.stringify(e)})]})},t))}):"string"==typeof u.transcript?(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-sm font-mono",children:u.transcript}):(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-sm font-mono",children:JSON.stringify(u.transcript,null,2)})})})]}),u.summary&&(0,r.jsxs)(g.Zb,{children:[(0,r.jsxs)(g.Ol,{children:[(0,r.jsx)(g.ll,{className:"text-lg text-slate-600",children:"Call Summary"}),u.sentiment&&(0,r.jsxs)(g.SZ,{children:["Sentiment: ",(0,r.jsx)("span",{className:"capitalize",children:u.sentiment})]})]}),(0,r.jsx)(g.aY,{children:(0,r.jsx)("p",{className:"text-sm",children:u.summary})})]}),u.recordingUrl&&(0,r.jsxs)(g.Zb,{children:[(0,r.jsx)(g.Ol,{children:(0,r.jsx)(g.ll,{className:"text-lg text-slate-600",children:"Recording"})}),(0,r.jsx)(g.aY,{children:(0,r.jsxs)("audio",{controls:!0,className:"w-full",children:[(0,r.jsx)("source",{src:u.recordingUrl,type:"audio/mpeg"}),"Your browser does not support the audio element."]})})]})]})}},3340:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var r=s(2265);let n=0,a=new Map,l=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function d(e){o=i(o,e),c.forEach(e=>{e(o)})}function u(e){let{...t}=e,s=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(o);return r.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},4169:function(e,t,s){"use strict";s.d(t,{g7:function(){return d}});var r,n=s(2265),a=s(6923),l=s(7437),i=Symbol.for("react.lazy"),c=(r||(r=s.t(n,2)))[" use ".trim().toString()];function o(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var d=function(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:s,...r}=e;if(o(s)&&"function"==typeof c&&(s=c(s._payload)),n.isValidElement(s)){var l;let e,i;let c=(l=s,(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?l.ref:(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?l.props.ref:l.props.ref||l.ref),o=function(e,t){let s={...t};for(let r in t){let n=e[r],a=t[r];/^on[A-Z]/.test(r)?n&&a?s[r]=(...e)=>{let t=a(...e);return n(...e),t}:n&&(s[r]=n):"style"===r?s[r]={...n,...a}:"className"===r&&(s[r]=[n,a].filter(Boolean).join(" "))}return{...e,...s}}(r,s.props);return s.type!==n.Fragment&&(o.ref=t?(0,a.F)(t,c):c),n.cloneElement(s,o)}return n.Children.count(s)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),s=n.forwardRef((e,s)=>{let{children:r,...a}=e;o(r)&&"function"==typeof c&&(r=c(r._payload));let i=n.Children.toArray(r),d=i.find(m);if(d){let e=d.props.children,r=i.map(t=>t!==d?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,l.jsx)(t,{...a,ref:s,children:n.isValidElement(e)?n.cloneElement(e,void 0,r):null})}return(0,l.jsx)(t,{...a,ref:s,children:r})});return s.displayName=`${e}.Slot`,s}("Slot"),u=Symbol("radix.slottable");function m(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===u}}},function(e){e.O(0,[225,145,648,798,971,117,744],function(){return e(e.s=1360)}),_N_E=e.O()}]);