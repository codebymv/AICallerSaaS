(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[425],{19726:function(e,t,s){Promise.resolve().then(s.bind(s,59754))},79205:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var a=s(2265);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ")};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...r,width:n,height:n,stroke:s,strokeWidth:c?24*Number(i)/Number(n):i,className:l("lucide",o),...m},[...u.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{className:c,...o}=s;return(0,a.createElement)(i,{ref:r,iconNode:t,className:l("lucide-".concat(n(e)),c),...o})});return s.displayName="".concat(e),s}},71866:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]])},68428:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]])},32660:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},17580:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},82222:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},49322:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},41671:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},99388:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},51817:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},12194:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]])},13041:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},37806:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},92369:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},95805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},32489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},99376:function(e,t,s){"use strict";var a=s(35475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},59754:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return O}});var a=s(57437),n=s(2265),l=s(99376),r=s(27648),i=s(33145),c=s(71866),o=s(17580),d=s(68428),u=s(41671),m=s(99388),x=s(51817),h=s(49322),f=s(32660),p=s(13041),j=s(12194),g=s(37806),y=s(92369),N=s(82222),v=s(79820),b=s(12381),w=s(71837),k=s(23340),Z=s(78705),C=s(62532);let S=e=>{switch(e){case"INBOUND":return(0,a.jsx)(c.Z,{className:"h-3.5 w-3.5 text-teal-600"});case"OUTBOUND":return(0,a.jsx)(o.Z,{className:"h-3.5 w-3.5 text-teal-600"});case"HYBRID":return(0,a.jsx)(d.Z,{className:"h-3.5 w-3.5 text-teal-600"});default:return null}},A=e=>{if(!e)return null;let t=Z.Cy.find(t=>t.id===e.toLowerCase());return(null==t?void 0:t.avatar)||null},z=e=>e&&0!==e?"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0")):"0:00",M=e=>{let t=new Date(e),s=t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),a=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return"".concat(s," at ").concat(a)},E=e=>{if(!e)return"Unknown";let t=e.replace(/\D/g,"");return 11===t.length&&t.startsWith("1")?"(".concat(t.slice(1,4),") ").concat(t.slice(4,7),"-").concat(t.slice(7)):e},P=e=>{switch(e){case"completed":return(0,a.jsx)(u.Z,{className:"h-5 w-5 text-green-500"});case"failed":return(0,a.jsx)(m.Z,{className:"h-5 w-5 text-red-500"});case"in-progress":return(0,a.jsx)(x.Z,{className:"h-5 w-5 text-blue-500 animate-spin"});case"ringing":return(0,a.jsx)(h.Z,{className:"h-5 w-5 text-yellow-500"});default:return(0,a.jsx)(h.Z,{className:"h-5 w-5 text-slate-500"})}},L=e=>Z.yh[e]||Z.yh.default;function O(){var e,t;let s=(0,l.useParams)(),d=(0,l.useRouter)(),{toast:u}=(0,k.pm)(),[m,h]=(0,n.useState)(null),[O,R]=(0,n.useState)(!0),[_,D]=(0,n.useState)(null),[U,I]=(0,n.useState)(!1),[B,F]=(0,n.useState)(""),[q,V]=(0,n.useState)(null),$=s.id;(0,n.useEffect)(()=>{let e=()=>{window.innerWidth>=1024?document.body.style.overflow="hidden":document.body.style.overflow=""};return e(),window.addEventListener("resize",e),()=>{document.body.style.overflow="",window.removeEventListener("resize",e)}},[]),(0,n.useEffect)(()=>{$&&H()},[$]);let H=async()=>{try{let t=await w.h.getCall($);h(t.data);let s=t.data;if(s){var e;let t="inbound"===s.direction?s.from:s.to;try{let e=await w.h.getContactByPhone(t);e.data&&D(e.data)}catch(e){}if(null===(e=s.agent)||void 0===e?void 0:e.id)try{let e=await w.h.getAgent(s.agent.id);e.data&&V(e.data)}catch(e){}}}catch(e){u({title:"Error",description:e instanceof w.M?e.message:"Failed to fetch call details",variant:"destructive"}),e instanceof w.M&&404===e.status&&d.push("/dashboard/calls")}finally{R(!1)}},W=e=>{F(e),I(!0)},Y=async e=>{try{if(await w.h.createContact(e),u({title:"Contact added",description:"The contact has been saved"}),I(!1),m){let e="inbound"===m.direction?m.from:m.to;if(e)try{let t=await w.h.getContactByPhone(e);t.data&&D(t.data)}catch(e){}}}catch(e){throw u({title:"Error",description:e.message||"Failed to save contact",variant:"destructive"}),e}};if(O)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)(x.Z,{className:"h-8 w-8 animate-spin text-teal-600"})});if(!m)return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsx)(r.default,{href:"/dashboard/calls",children:(0,a.jsxs)(b.z,{variant:"ghost",size:"sm",className:"text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Back to Calls"]})})}),(0,a.jsx)(v.Zb,{children:(0,a.jsxs)(v.aY,{className:"flex flex-col items-center justify-center py-16",children:[(0,a.jsx)(p.Z,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Call not found"}),(0,a.jsx)("p",{className:"text-muted-foreground text-center",children:"The call you're looking for doesn't exist or has been deleted."})]})})]});let T=m.agentVoice||(null===(e=m.agent)||void 0===e?void 0:e.voice),J=m.agentName||(null===(t=m.agent)||void 0===t?void 0:t.name),X=T?A(T):null;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(r.default,{href:"/dashboard/calls",children:(0,a.jsxs)(b.z,{variant:"ghost",size:"sm",className:"text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Back"]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(j.Z,{className:"h-7 w-7 sm:h-8 sm:w-8 text-slate-600"}),(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-600",children:"Call Details"})]}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:M(m.startTime||m.createdAt)})]})]}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ".concat(L(m.status)),children:[P(m.status),m.status.charAt(0).toUpperCase()+m.status.slice(1).replace("-"," ")]})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)(v.Zb,{children:[(0,a.jsx)(v.Ol,{children:(0,a.jsx)(v.ll,{className:"text-lg text-slate-600",children:"Call Information"})}),(0,a.jsxs)(v.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat("inbound"===m.direction?Z.zl.inbound.bg:Z.zl.outbound.bg),children:"inbound"===m.direction?(0,a.jsx)(c.Z,{className:"h-5 w-5 ".concat(Z.zl.inbound.icon)}):(0,a.jsx)(o.Z,{className:"h-5 w-5 ".concat(Z.zl.outbound.icon)})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"inbound"===m.direction?"Inbound Call":"Outbound Call"}),_?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-slate-600",children:_.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("span",{className:"font-mono text-muted-foreground",children:E(m.from)}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"→"}),(0,a.jsx)("span",{className:"font-mono text-muted-foreground",children:E(m.to)})]})]}):(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("span",{className:"font-mono text-slate-600",children:E(m.from)}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"→"}),(0,a.jsx)("span",{className:"font-mono text-slate-600",children:E(m.to)}),(0,a.jsx)("button",{onClick:()=>{let e="inbound"===m.direction?m.from:m.to;e&&W(e)},className:"text-slate-400 hover:text-teal-600 transition-colors ml-1",title:"Add to contacts",children:(0,a.jsx)(g.Z,{className:"h-4 w-4"})})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Duration"}),(0,a.jsx)("p",{className:"font-medium text-slate-600",children:z(m.duration||0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Date"}),(0,a.jsx)("p",{className:"font-medium text-sm text-slate-600",children:new Date(m.startTime||m.createdAt).toLocaleDateString()})]})]}),void 0!==m.costUsd&&Number(m.costUsd)>0&&(0,a.jsxs)("div",{className:"pt-2 border-t",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Estimated Cost"}),(0,a.jsxs)("p",{className:"font-medium text-slate-600",children:["$",Number(m.costUsd).toFixed(4)]})]})]})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsx)(v.Ol,{children:(0,a.jsx)(v.ll,{className:"text-lg text-slate-600",children:"AI Agent"})}),(0,a.jsx)(v.aY,{children:J||m.agent?m.agent&&q?(0,a.jsx)(r.default,{href:"/dashboard/agents/".concat(m.agent.id),className:"flex items-center p-3 rounded-lg border hover:bg-slate-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:X?(0,a.jsx)(i.default,{src:X,alt:J||"Agent",width:40,height:40,className:"w-full h-full object-cover"}):(0,a.jsx)(y.Z,{className:"h-5 w-5 text-slate-400"})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-slate-600 truncate",children:J}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground truncate",children:[q.totalCalls||0," calls",q.callPurpose&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"mx-1.5",children:"•"}),q.callPurpose]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-1 flex-shrink-0 ml-3",children:[(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(q.isActive?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"),children:q.isActive?"Active":"Inactive"}),q.mode&&Z.jt[q.mode]&&(0,a.jsxs)("span",{className:"flex items-center gap-1.5 text-xs text-muted-foreground whitespace-nowrap",children:[(0,a.jsx)("span",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-teal-100",children:S(q.mode)}),Z.jt[q.mode].label]})]})]})}):(0,a.jsxs)("div",{className:"flex items-center p-3 rounded-lg border bg-slate-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:X?(0,a.jsx)(i.default,{src:X,alt:J||"Agent",width:40,height:40,className:"w-full h-full object-cover"}):(0,a.jsx)(y.Z,{className:"h-5 w-5 text-slate-400"})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-slate-600 truncate",children:J}),T&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground capitalize truncate",children:["Voice: ",T]})]})]}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-slate-100 text-slate-600 flex-shrink-0 ml-3",children:"Deleted"})]}):(0,a.jsxs)("div",{className:"flex items-center gap-4 text-muted-foreground p-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center",children:(0,a.jsx)(N.Z,{className:"h-5 w-5"})}),(0,a.jsx)("p",{className:"text-sm",children:"Agent information unavailable"})]})})]})]}),m.transcript&&(0,a.jsxs)(v.Zb,{children:[(0,a.jsx)(v.Ol,{children:(0,a.jsx)(v.ll,{className:"text-lg text-slate-600",children:"Transcript"})}),(0,a.jsx)(v.aY,{children:(0,a.jsx)("div",{className:"bg-slate-50 rounded-lg p-4 max-h-[400px] overflow-y-auto",children:Array.isArray(m.transcript)?(0,a.jsx)("div",{className:"space-y-3",children:m.transcript.map((e,t)=>(0,a.jsx)("div",{className:"flex gap-3 ".concat("assistant"===e.role?"justify-start":"justify-end"),children:(0,a.jsxs)("div",{className:"max-w-[80%] p-3 rounded-lg text-sm ".concat("assistant"===e.role?"bg-white border":"bg-teal-100 text-teal-900"),children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1 capitalize",children:e.role||"Unknown"}),(0,a.jsx)("p",{children:e.content||e.text||JSON.stringify(e)})]})},t))}):"string"==typeof m.transcript?(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-sm font-mono",children:m.transcript}):(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-sm font-mono",children:JSON.stringify(m.transcript,null,2)})})})]}),m.summary&&(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[(0,a.jsx)(v.ll,{className:"text-lg text-slate-600",children:"Call Summary"}),m.sentiment&&(0,a.jsxs)(v.SZ,{children:["Sentiment: ",(0,a.jsx)("span",{className:"capitalize",children:m.sentiment})]})]}),(0,a.jsx)(v.aY,{children:(0,a.jsx)("p",{className:"text-sm",children:m.summary})})]}),m.recordingUrl&&(0,a.jsxs)(v.Zb,{children:[(0,a.jsx)(v.Ol,{children:(0,a.jsx)(v.ll,{className:"text-lg text-slate-600",children:"Recording"})}),(0,a.jsx)(v.aY,{children:(0,a.jsxs)("audio",{controls:!0,className:"w-full",children:[(0,a.jsx)("source",{src:"".concat("http://localhost:3001","/api/calls/").concat(m.id,"/recording"),type:"audio/mpeg"}),"Your browser does not support the audio element."]})})]}),(0,a.jsx)(C.N,{open:U,onClose:()=>{I(!1),F("")},onSave:Y,initialPhoneNumber:B})]})}},62532:function(e,t,s){"use strict";s.d(t,{N:function(){return m}});var a=s(57437),n=s(2265),l=s(54887),r=s(12381),i=s(40279),c=s(75060),o=s(95805),d=s(32489),u=s(51817);function m(e){let{open:t,onClose:s,onSave:m,contact:x,initialPhoneNumber:h}=e,[f,p]=(0,n.useState)(""),[j,g]=(0,n.useState)(""),[y,N]=(0,n.useState)(""),[v,b]=(0,n.useState)(!1),[w,k]=(0,n.useState)(!1);(0,n.useEffect)(()=>{k(!0)},[]),(0,n.useEffect)(()=>{x?(p(x.name),g(x.phoneNumber),N(x.notes||"")):(p(""),g(h?Z(h):""),N(""))},[x,t,h]),(0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&s()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,s]);let Z=e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?"(".concat(t.slice(0,3),") ").concat(t.slice(3)):t.length<=10?"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6)):"+1 (".concat(t.slice(1,4),") ").concat(t.slice(4,7),"-").concat(t.slice(7,11))},C=async e=>{if(e.preventDefault(),f.trim()&&j.trim()){b(!0);try{await m({name:f.trim(),phoneNumber:j.trim(),notes:y.trim()||void 0})}finally{b(!1)}}};if(!t||!w)return null;let S=(0,a.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:s}),(0,a.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-md mx-4 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 text-slate-600"}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-600",children:x?"Edit Contact":"Add Contact"})]}),(0,a.jsx)("button",{onClick:s,className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:(0,a.jsx)(d.Z,{className:"h-5 w-5 text-slate-500"})})]}),(0,a.jsxs)("form",{onSubmit:C,className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(c._,{htmlFor:"name",className:"text-muted-foreground",children:["Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(i.I,{id:"name",placeholder:"John Smith",value:f,onChange:e=>p(e.target.value),required:!0,autoFocus:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(c._,{htmlFor:"phone",className:"text-muted-foreground",children:["Phone Number ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(i.I,{id:"phone",type:"tel",placeholder:"(555) 123-4567",value:j,onChange:e=>{g(Z(e.target.value))},required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{htmlFor:"notes",className:"text-muted-foreground",children:"Notes"}),(0,a.jsx)("textarea",{id:"notes",placeholder:"Add any notes about this contact...",value:y,onChange:e=>N(e.target.value),rows:3,className:"w-full px-3 py-2 border rounded-md text-sm resize-none focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,a.jsx)(r.z,{type:"button",variant:"outline",onClick:s,className:"flex-1",disabled:v,children:"Cancel"}),(0,a.jsx)(r.z,{type:"submit",className:"flex-1 bg-teal-600 hover:bg-teal-700",disabled:v||!f.trim()||!j.trim(),children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):x?"Save Changes":"Add Contact"})]})]})]})]});return(0,l.createPortal)(S,document.body)}},40279:function(e,t,s){"use strict";s.d(t,{I:function(){return r}});var a=s(57437),n=s(2265),l=s(93448);let r=n.forwardRef((e,t)=>{let{className:s,type:n,...r}=e;return(0,a.jsx)("input",{type:n,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});r.displayName="Input"},75060:function(e,t,s){"use strict";s.d(t,{_:function(){return r}});var a=s(57437),n=s(2265),l=s(93448);let r=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("label",{ref:t,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s),...n})});r.displayName="Label"},94169:function(e,t,s){"use strict";s.d(t,{g7:function(){return d}});var a,n=s(2265),l=s(96923),r=s(57437),i=Symbol.for("react.lazy"),c=(a||(a=s.t(n,2)))[" use ".trim().toString()];function o(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var d=function(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:s,...a}=e;if(o(s)&&"function"==typeof c&&(s=c(s._payload)),n.isValidElement(s)){var r;let e,i;let c=(r=s,(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref),o=function(e,t){let s={...t};for(let a in t){let n=e[a],l=t[a];/^on[A-Z]/.test(a)?n&&l?s[a]=(...e)=>{let t=l(...e);return n(...e),t}:n&&(s[a]=n):"style"===a?s[a]={...n,...l}:"className"===a&&(s[a]=[n,l].filter(Boolean).join(" "))}return{...e,...s}}(a,s.props);return s.type!==n.Fragment&&(o.ref=t?(0,l.F)(t,c):c),n.cloneElement(s,o)}return n.Children.count(s)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),s=n.forwardRef((e,s)=>{let{children:a,...l}=e;o(a)&&"function"==typeof c&&(a=c(a._payload));let i=n.Children.toArray(a),d=i.find(m);if(d){let e=d.props.children,a=i.map(t=>t!==d?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,r.jsx)(t,{...l,ref:s,children:n.isValidElement(e)?n.cloneElement(e,void 0,a):null})}return(0,r.jsx)(t,{...l,ref:s,children:a})});return s.displayName=`${e}.Slot`,s}("Slot"),u=Symbol("radix.slottable");function m(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===u}}},function(e){e.O(0,[225,145,648,92,452,971,117,744],function(){return e(e.s=19726)}),_N_E=e.O()}]);