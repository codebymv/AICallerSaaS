(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[425],{19726:function(e,t,s){Promise.resolve().then(s.bind(s,59754))},79205:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var a=s(2265);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ")};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...r,width:n,height:n,stroke:s,strokeWidth:c?24*Number(i)/Number(n):i,className:l("lucide",d),...m},[...u.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(o)?o:[o]])}),c=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{className:c,...d}=s;return(0,a.createElement)(i,{ref:r,iconNode:t,className:l("lucide-".concat(n(e)),c),...d})});return s.displayName="".concat(e),s}},71866:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]])},68428:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]])},32660:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},76858:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},17580:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},82222:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},49322:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},41671:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},99388:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},46211:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]])},51817:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},12194:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]])},13041:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},37806:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},92369:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},95805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},32489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},99376:function(e,t,s){"use strict";var a=s(35475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},59754:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return U}});var a=s(57437),n=s(2265),l=s(99376),r=s(27648),i=s(33145),c=s(71866),d=s(17580),o=s(68428),u=s(41671),m=s(99388),x=s(51817),h=s(49322),f=s(32660),p=s(13041),g=s(12194),j=s(37806),y=s(92369),N=s(82222),v=s(46211),b=s(76858),w=s(79820),k=s(12381),Z=s(71837),C=s(23340),S=s(78705),z=s(62532);let A=e=>{switch(e){case"INBOUND":return(0,a.jsx)(c.Z,{className:"h-3.5 w-3.5 text-teal-600"});case"OUTBOUND":return(0,a.jsx)(d.Z,{className:"h-3.5 w-3.5 text-teal-600"});case"HYBRID":return(0,a.jsx)(o.Z,{className:"h-3.5 w-3.5 text-teal-600"});default:return null}},M=e=>{if(!e)return null;let t=S.Cy.find(t=>t.id===e.toLowerCase());return(null==t?void 0:t.avatar)||null},E=e=>e&&0!==e?"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0")):"0:00",L=e=>{let t=new Date(e),s=t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),a=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return"".concat(s," at ").concat(a)},P=e=>{if(!e)return"Unknown";let t=e.replace(/\D/g,"");return 11===t.length&&t.startsWith("1")?"(".concat(t.slice(1,4),") ").concat(t.slice(4,7),"-").concat(t.slice(7)):e},D=e=>{switch(e){case"completed":return(0,a.jsx)(u.Z,{className:"h-5 w-5 text-green-500"});case"failed":return(0,a.jsx)(m.Z,{className:"h-5 w-5 text-red-500"});case"in-progress":return(0,a.jsx)(x.Z,{className:"h-5 w-5 text-blue-500 animate-spin"});case"ringing":return(0,a.jsx)(h.Z,{className:"h-5 w-5 text-yellow-500"});default:return(0,a.jsx)(h.Z,{className:"h-5 w-5 text-slate-500"})}},R=e=>S.yh[e]||S.yh.default;function U(){var e,t,s,o;let u=(0,l.useParams)(),m=(0,l.useRouter)(),{toast:h}=(0,C.pm)(),[U,O]=(0,n.useState)(null),[_,F]=(0,n.useState)(!0),[B,I]=(0,n.useState)(null),[q,V]=(0,n.useState)(!1),[$,H]=(0,n.useState)(""),[W,Y]=(0,n.useState)(null),[T,J]=(0,n.useState)(null),X=u.id;(0,n.useEffect)(()=>{let e=()=>{window.innerWidth>=1024?document.body.style.overflow="hidden":document.body.style.overflow=""};return e(),window.addEventListener("resize",e),()=>{document.body.style.overflow="",window.removeEventListener("resize",e)}},[]),(0,n.useEffect)(()=>{X&&G()},[X]),(0,n.useEffect)(()=>{if(!(null==U?void 0:U.recordingUrl)){J(null);return}let e=null;return(async()=>{try{let t=await Z.h.fetchBlob("/api/calls/".concat(X,"/recording"));e=URL.createObjectURL(t),J(e)}catch(e){console.error("Failed to load recording:",e),J(null)}})(),()=>{e&&URL.revokeObjectURL(e)}},[null==U?void 0:U.recordingUrl,X]);let G=async()=>{try{let t=await Z.h.getCall(X);O(t.data);let s=t.data;if(s){var e;let t="inbound"===s.direction?s.from:s.to;try{let e=await Z.h.getContactByPhone(t);e.data&&I(e.data)}catch(e){}if(null===(e=s.agent)||void 0===e?void 0:e.id)try{let e=await Z.h.getAgent(s.agent.id);e.data&&Y(e.data)}catch(e){}}}catch(e){h({title:"Error",description:e instanceof Z.M?e.message:"Failed to fetch call details",variant:"destructive"}),e instanceof Z.M&&404===e.status&&m.push("/dashboard/calls")}finally{F(!1)}},K=e=>{H(e),V(!0)},Q=async e=>{try{if(await Z.h.createContact(e),h({title:"Contact added",description:"The contact has been saved"}),V(!1),U){let e="inbound"===U.direction?U.from:U.to;if(e)try{let t=await Z.h.getContactByPhone(e);t.data&&I(t.data)}catch(e){}}}catch(e){throw h({title:"Error",description:e.message||"Failed to save contact",variant:"destructive"}),e}};if(_)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)(x.Z,{className:"h-8 w-8 animate-spin text-teal-600"})});if(!U)return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)(r.default,{href:"/dashboard/calls",children:[(0,a.jsx)(k.z,{variant:"ghost",size:"icon",className:"sm:hidden text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:(0,a.jsx)(f.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(k.z,{variant:"ghost",size:"sm",className:"hidden sm:flex text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Back to Calls"]})]})}),(0,a.jsx)(w.Zb,{children:(0,a.jsxs)(w.aY,{className:"flex flex-col items-center justify-center py-16",children:[(0,a.jsx)(p.Z,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Call not found"}),(0,a.jsx)("p",{className:"text-muted-foreground text-center",children:"The call you're looking for doesn't exist or has been deleted."})]})})]});let ee=U.agentVoice||(null===(e=U.agent)||void 0===e?void 0:e.voice),et=U.agentName||(null===(t=U.agent)||void 0===t?void 0:t.name),es=ee?M(ee):null;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(r.default,{href:"/dashboard/calls",children:[(0,a.jsx)(k.z,{variant:"ghost",size:"icon",className:"sm:hidden text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:(0,a.jsx)(f.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(k.z,{variant:"ghost",size:"sm",className:"hidden sm:flex text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Back"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(g.Z,{className:"h-7 w-7 sm:h-8 sm:w-8 text-slate-600"}),(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-600",children:"Call Details"})]}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:L(U.startTime||U.createdAt)})]})]}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ".concat(R(U.status)),children:[D(U.status),U.status.charAt(0).toUpperCase()+U.status.slice(1).replace("-"," ")]})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-2 w-full max-w-full",children:[(0,a.jsxs)(w.Zb,{className:"min-w-0 overflow-hidden",children:[(0,a.jsx)(w.Ol,{children:(0,a.jsx)(w.ll,{className:"text-lg text-slate-600",children:"Call Information"})}),(0,a.jsxs)(w.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 sm:p-4 bg-slate-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ".concat("inbound"===U.direction?S.zl.inbound.bg:S.zl.outbound.bg),children:"inbound"===U.direction?(0,a.jsx)(c.Z,{className:"h-5 w-5 ".concat(S.zl.inbound.icon)}):(0,a.jsx)(d.Z,{className:"h-5 w-5 ".concat(S.zl.outbound.icon)})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"inbound"===U.direction?"Inbound Call":"Outbound Call"}),B?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-slate-600",children:B.name}),(0,a.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm flex-wrap",children:[(0,a.jsx)("span",{className:"font-mono text-muted-foreground",children:P(U.from)}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"→"}),(0,a.jsx)("span",{className:"font-mono text-muted-foreground",children:P(U.to)})]})]}):(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm flex-wrap",children:[(0,a.jsx)("span",{className:"font-mono text-slate-600",children:P(U.from)}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"→"}),(0,a.jsx)("span",{className:"font-mono text-slate-600",children:P(U.to)}),(0,a.jsx)("button",{onClick:()=>{let e="inbound"===U.direction?U.from:U.to;e&&K(e)},className:"text-slate-400 hover:text-teal-600 transition-colors",title:"Add to contacts",children:(0,a.jsx)(j.Z,{className:"h-4 w-4"})})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Duration"}),(0,a.jsx)("p",{className:"font-medium text-slate-600",children:E(U.duration||0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Date"}),(0,a.jsx)("p",{className:"font-medium text-sm text-slate-600",children:new Date(U.startTime||U.createdAt).toLocaleDateString()})]})]}),void 0!==U.costUsd&&Number(U.costUsd)>0&&(0,a.jsxs)("div",{className:"pt-2 border-t",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Estimated Cost"}),(0,a.jsxs)("p",{className:"font-medium text-slate-600",children:["$",Number(U.costUsd).toFixed(4)]})]})]})]}),(0,a.jsxs)(w.Zb,{className:"min-w-0 overflow-hidden",children:[(0,a.jsx)(w.Ol,{children:(0,a.jsx)(w.ll,{className:"text-lg text-slate-600",children:"AI Agent"})}),(0,a.jsxs)(w.aY,{children:[et||U.agent?U.agent&&W?(0,a.jsx)(r.default,{href:"/dashboard/agents/".concat(U.agent.id),className:"flex items-center p-3 rounded-lg border hover:bg-slate-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:es?(0,a.jsx)(i.default,{src:es,alt:et||"Agent",width:40,height:40,className:"w-full h-full object-cover"}):(0,a.jsx)(y.Z,{className:"h-5 w-5 text-slate-400"})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-slate-600 truncate",children:et}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground truncate",children:[W.totalCalls||0," calls",W.callPurpose&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"mx-1.5",children:"•"}),W.callPurpose]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-1 ml-2 sm:ml-3",children:[(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full flex-shrink-0 ".concat(W.isActive?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"),children:W.isActive?"Active":"Inactive"}),W.mode&&S.jt[W.mode]&&(0,a.jsxs)("span",{className:"flex items-center gap-1.5 text-xs text-muted-foreground flex-shrink-0",children:[(0,a.jsx)("span",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-teal-100 flex-shrink-0",children:A(W.mode)}),(0,a.jsx)("span",{className:"hidden sm:inline",children:S.jt[W.mode].label})]})]})]})}):(0,a.jsxs)("div",{className:"flex items-center p-3 rounded-lg border bg-slate-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:es?(0,a.jsx)(i.default,{src:es,alt:et||"Agent",width:40,height:40,className:"w-full h-full object-cover"}):(0,a.jsx)(y.Z,{className:"h-5 w-5 text-slate-400"})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-slate-600 truncate",children:et}),ee&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground capitalize truncate",children:["Voice: ",ee]})]})]}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-slate-100 text-slate-600 flex-shrink-0 ml-3",children:"Deleted"})]}):(0,a.jsxs)("div",{className:"flex items-center gap-4 text-muted-foreground p-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center",children:(0,a.jsx)(N.Z,{className:"h-5 w-5"})}),(0,a.jsx)("p",{className:"text-sm",children:"Agent information unavailable"})]}),U.recordingUrl&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t",children:T?(0,a.jsxs)("audio",{controls:!0,className:"w-full",children:[(0,a.jsx)("source",{src:T,type:"audio/mpeg"}),"Your browser does not support the audio element."]},T):(0,a.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5 animate-spin text-teal-600"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading recording..."})]})})]})]}),(null===(s=U.campaignData)||void 0===s?void 0:s.campaign)&&(0,a.jsxs)(w.Zb,{className:"min-w-0 overflow-hidden",children:[(0,a.jsx)(w.Ol,{children:(0,a.jsx)(w.ll,{className:"text-lg text-slate-600",children:"Campaign"})}),(0,a.jsx)(w.aY,{children:(0,a.jsxs)(r.default,{href:"/dashboard/campaigns/".concat(U.campaignData.campaign.id),className:"flex items-center p-3 rounded-lg border hover:bg-slate-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-teal-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(v.Z,{className:"h-5 w-5 text-teal-600"})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-slate-600 truncate",children:U.campaignData.campaign.name}),(null===(o=U.campaignData.lead)||void 0===o?void 0:o.name)&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground truncate",children:["Lead: ",U.campaignData.lead.name]})]})]}),(0,a.jsx)(b.Z,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]})})]})]}),U.transcript&&(0,a.jsxs)(w.Zb,{children:[(0,a.jsx)(w.Ol,{children:(0,a.jsx)(w.ll,{className:"text-lg text-slate-600",children:"Transcript"})}),(0,a.jsx)(w.aY,{children:(0,a.jsx)("div",{className:"bg-slate-50 rounded-lg p-4 max-h-[400px] overflow-y-auto",children:Array.isArray(U.transcript)?(0,a.jsx)("div",{className:"space-y-3",children:U.transcript.map((e,t)=>(0,a.jsx)("div",{className:"flex gap-3 ".concat("assistant"===e.role?"justify-start":"justify-end"),children:(0,a.jsxs)("div",{className:"max-w-[80%] p-3 rounded-lg text-sm ".concat("assistant"===e.role?"bg-white border":"bg-teal-100 text-teal-900"),children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1 capitalize",children:e.role||"Unknown"}),(0,a.jsx)("p",{children:e.content||e.text||JSON.stringify(e)})]})},t))}):"string"==typeof U.transcript?(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-sm font-mono",children:U.transcript}):(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-sm font-mono",children:JSON.stringify(U.transcript,null,2)})})})]}),U.summary&&(0,a.jsxs)(w.Zb,{children:[(0,a.jsxs)(w.Ol,{children:[(0,a.jsx)(w.ll,{className:"text-lg text-slate-600",children:"Call Summary"}),U.sentiment&&(0,a.jsxs)(w.SZ,{children:["Sentiment: ",(0,a.jsx)("span",{className:"capitalize",children:U.sentiment})]})]}),(0,a.jsx)(w.aY,{children:(0,a.jsx)("p",{className:"text-sm",children:U.summary})})]}),(0,a.jsx)(z.N,{open:q,onClose:()=>{V(!1),H("")},onSave:Q,initialPhoneNumber:$})]})}},62532:function(e,t,s){"use strict";s.d(t,{N:function(){return m}});var a=s(57437),n=s(2265),l=s(54887),r=s(12381),i=s(40279),c=s(75060),d=s(95805),o=s(32489),u=s(51817);function m(e){let{open:t,onClose:s,onSave:m,contact:x,initialPhoneNumber:h}=e,[f,p]=(0,n.useState)(""),[g,j]=(0,n.useState)(""),[y,N]=(0,n.useState)(""),[v,b]=(0,n.useState)(!1),[w,k]=(0,n.useState)(!1);(0,n.useEffect)(()=>{k(!0)},[]),(0,n.useEffect)(()=>{x?(p(x.name),j(x.phoneNumber),N(x.notes||"")):(p(""),j(h?Z(h):""),N(""))},[x,t,h]),(0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&s()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,s]);let Z=e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?"(".concat(t.slice(0,3),") ").concat(t.slice(3)):t.length<=10?"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6)):"+1 (".concat(t.slice(1,4),") ").concat(t.slice(4,7),"-").concat(t.slice(7,11))},C=async e=>{if(e.preventDefault(),f.trim()&&g.trim()){b(!0);try{await m({name:f.trim(),phoneNumber:g.trim(),notes:y.trim()||void 0})}finally{b(!1)}}};if(!t||!w)return null;let S=(0,a.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:s}),(0,a.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-md mx-4 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 text-slate-600"}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-600",children:x?"Edit Contact":"Add Contact"})]}),(0,a.jsx)("button",{onClick:s,className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:(0,a.jsx)(o.Z,{className:"h-5 w-5 text-slate-500"})})]}),(0,a.jsxs)("form",{onSubmit:C,className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(c._,{htmlFor:"name",className:"text-muted-foreground",children:["Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(i.I,{id:"name",placeholder:"John Smith",value:f,onChange:e=>p(e.target.value),required:!0,autoFocus:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(c._,{htmlFor:"phone",className:"text-muted-foreground",children:["Phone Number ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(i.I,{id:"phone",type:"tel",placeholder:"(555) 123-4567",value:g,onChange:e=>{j(Z(e.target.value))},required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{htmlFor:"notes",className:"text-muted-foreground",children:"Notes"}),(0,a.jsx)("textarea",{id:"notes",placeholder:"Add any notes about this contact...",value:y,onChange:e=>N(e.target.value),rows:3,className:"w-full px-3 py-2 border rounded-md text-sm resize-none focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,a.jsx)(r.z,{type:"button",variant:"outline",onClick:s,className:"flex-1",disabled:v,children:"Cancel"}),(0,a.jsx)(r.z,{type:"submit",className:"flex-1 bg-teal-600 hover:bg-teal-700",disabled:v||!f.trim()||!g.trim(),children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):x?"Save Changes":"Add Contact"})]})]})]})]});return(0,l.createPortal)(S,document.body)}},40279:function(e,t,s){"use strict";s.d(t,{I:function(){return r}});var a=s(57437),n=s(2265),l=s(93448);let r=n.forwardRef((e,t)=>{let{className:s,type:n,...r}=e;return(0,a.jsx)("input",{type:n,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});r.displayName="Input"},75060:function(e,t,s){"use strict";s.d(t,{_:function(){return r}});var a=s(57437),n=s(2265),l=s(93448);let r=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("label",{ref:t,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s),...n})});r.displayName="Label"},94169:function(e,t,s){"use strict";s.d(t,{g7:function(){return o}});var a,n=s(2265),l=s(96923),r=s(57437),i=Symbol.for("react.lazy"),c=(a||(a=s.t(n,2)))[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var o=function(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:s,...a}=e;if(d(s)&&"function"==typeof c&&(s=c(s._payload)),n.isValidElement(s)){var r;let e,i;let c=(r=s,(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref),d=function(e,t){let s={...t};for(let a in t){let n=e[a],l=t[a];/^on[A-Z]/.test(a)?n&&l?s[a]=(...e)=>{let t=l(...e);return n(...e),t}:n&&(s[a]=n):"style"===a?s[a]={...n,...l}:"className"===a&&(s[a]=[n,l].filter(Boolean).join(" "))}return{...e,...s}}(a,s.props);return s.type!==n.Fragment&&(d.ref=t?(0,l.F)(t,c):c),n.cloneElement(s,d)}return n.Children.count(s)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),s=n.forwardRef((e,s)=>{let{children:a,...l}=e;d(a)&&"function"==typeof c&&(a=c(a._payload));let i=n.Children.toArray(a),o=i.find(m);if(o){let e=o.props.children,a=i.map(t=>t!==o?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,r.jsx)(t,{...l,ref:s,children:n.isValidElement(e)?n.cloneElement(e,void 0,a):null})}return(0,r.jsx)(t,{...l,ref:s,children:a})});return s.displayName=`${e}.Slot`,s}("Slot"),u=Symbol("radix.slottable");function m(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===u}}},function(e){e.O(0,[225,145,648,92,452,971,117,744],function(){return e(e.s=19726)}),_N_E=e.O()}]);