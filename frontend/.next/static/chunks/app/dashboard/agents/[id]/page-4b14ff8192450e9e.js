(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{67601:function(e,t,s){Promise.resolve().then(s.bind(s,30922))},22135:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},96362:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},69658:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]])},76980:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]])},83229:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},44743:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},18930:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},30922:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return q}});var a=s(57437),l=s(2265),n=s(99376),r=s(27648),i=s(33145),d=s(12381),c=s(79820),o=s(40279),m=s(75060),x=s(71837),h=s(23340),u=s(78705),f=s(69173),g=s(21688),N=s(58006),j=s(33041),p=s(71866),v=s(17580),b=s(68428),w=s(13041),y=s(53417),C=s(28124),k=s(31047),S=s(75368),E=s(43044),Z=s(94766),O=s(15868),M=s(32660),_=s(82222),I=s(32489),T=s(51817),z=s(83229),D=s(98420),A=s(40875),L=s(98728),P=s(49322),F=s(53113),U=s(48736),G=s(29374),H=s(92369);let Y=e=>{let t=e.replace(/\D/g,"");return 11===t.length&&t.startsWith("1")?"(".concat(t.slice(1,4),") ").concat(t.slice(4,7),"-").concat(t.slice(7)):e},B=e=>{switch(e){case"INBOUND":return(0,a.jsx)(p.Z,{className:"h-4 w-4 text-teal-600"});case"OUTBOUND":return(0,a.jsx)(v.Z,{className:"h-4 w-4 text-teal-600"});case"HYBRID":return(0,a.jsx)(b.Z,{className:"h-4 w-4 text-teal-600"});default:return null}},R=e=>{let t="h-4 w-4 text-teal-600";switch(e){case"VOICE_ONLY":return(0,a.jsx)(w.Z,{className:t});case"MESSAGING_ONLY":return(0,a.jsx)(y.Z,{className:t});case"OMNICHANNEL":return(0,a.jsx)(C.Z,{className:t});default:return null}},V=e=>{let t="h-3 w-3 text-teal-600";switch(e){case"SCHEDULE_APPOINTMENTS":return(0,a.jsx)(k.Z,{className:t});case"ANSWER_SUPPORT":return(0,a.jsx)(S.Z,{className:t});case"COLLECT_INFO":return(0,a.jsx)(E.Z,{className:t});case"SEND_REMINDERS":return(0,a.jsx)(Z.Z,{className:t});case"GENERAL_INQUIRIES":return(0,a.jsx)(y.Z,{className:t});case"CUSTOM":return(0,a.jsx)(O.Z,{className:t});default:return null}},W=e=>{if(!e)return"CUSTOM";for(let[t,s]of Object.entries(u.mN))if(s.value&&e.trim()===s.value.trim())return t;return"CUSTOM"};function q(){var e,t,s,p,v,b,C,S;let E=(0,n.useParams)(),Z=(0,n.useRouter)(),q=(0,n.useSearchParams)(),{toast:$}=(0,h.pm)(),[Q,J]=(0,l.useState)(null),[K,X]=(0,l.useState)(!0),[ee,et]=(0,l.useState)(!1),[es,ea]=(0,l.useState)("true"===q.get("edit")),[el,en]=(0,l.useState)(!1),[er,ei]=(0,l.useState)(!1),[ed,ec]=(0,l.useState)(""),[eo,em]=(0,l.useState)(""),[ex,eh]=(0,l.useState)(""),[eu,ef]=(0,l.useState)(""),[eg,eN]=(0,l.useState)("INBOUND"),[ej,ep]=(0,l.useState)(""),[ev,eb]=(0,l.useState)(""),[ew,ey]=(0,l.useState)(""),[eC,ek]=(0,l.useState)(!1),[eS,eE]=(0,l.useState)(null),[eZ,eO]=(0,l.useState)(""),[eM,e_]=(0,l.useState)(["read_calendar","create_events","reschedule_events"]),[eI,eT]=(0,l.useState)(""),[ez,eD]=(0,l.useState)(""),[eA,eL]=(0,l.useState)(30),[eP,eF]=(0,l.useState)([]),[eU,eG]=(0,l.useState)(!1),[eH,eY]=(0,l.useState)(""),[eB,eR]=(0,l.useState)("CUSTOM"),[eV,eW]=(0,l.useState)("VOICE_ONLY"),[eq,e$]=(0,l.useState)(!1),[eQ,eJ]=(0,l.useState)(!1),[eK,eX]=(0,l.useState)(!1),[e0,e1]=(0,l.useState)(null),[e2,e4]=(0,l.useState)([]),[e6,e5]=(0,l.useState)(null),[e3,e8]=(0,l.useState)(""),[e7,e9]=(0,l.useState)(!0),[te,tt]=(0,l.useState)(!1),[ts,ta]=(0,l.useState)(!1),[tl,tn]=(0,l.useState)(!1),tr=(0,l.useRef)(null),[ti,td]=(0,l.useState)(!1),tc=(0,l.useRef)(null);(0,l.useEffect)(()=>{tf(),tm(),th(),to()},[E.id]);let to=async()=>{try{let e=await x.h.getBusinessProfile();e1(e.data||null)}catch(e){}};(0,l.useEffect)(()=>{let e=e=>{tr.current&&!tr.current.contains(e.target)&&ta(!1),tc.current&&!tc.current.contains(e.target)&&td(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let tm=async()=>{try{let e=await x.h.getCalendarStatus();eE(e.data||null)}catch(e){console.error("Failed to fetch calendar status:",e)}},tx=async e=>{if(!e||!(null==eS?void 0:eS.calendars))return;let t=eS.calendars.find(t=>t.id===e);if(t){eG(!0);try{let e=[];"calcom"===t.provider?e=((await x.h.getCalcomEventTypes()).data||[]).map(e=>({id:String(e.id),name:e.title,duration:e.duration})):"calendly"===t.provider&&(e=((await x.h.getCalendarEventTypes()).data||[]).map(e=>({id:e.uri,name:e.name,duration:e.duration}))),eF(e)}catch(e){console.error("Failed to fetch event types:",e)}finally{eG(!1)}}};(0,l.useEffect)(()=>{eZ&&eC&&(null==eS?void 0:eS.calendars)&&tx(eZ)},[eZ,eC,null==eS?void 0:eS.calendars]);let th=async()=>{e9(!0);try{var e,t;let s=await x.h.getTwilioSettings();if(tt((null===(e=s.data)||void 0===e?void 0:e.configured)||!1),null===(t=s.data)||void 0===t?void 0:t.configured){let e=(await x.h.getPhoneNumbers()).data||[];e4(e);let t=e.find(e=>{var t;return(null===(t=e.agent)||void 0===t?void 0:t.id)===E.id});e5(t||null),e8((null==t?void 0:t.id)||"")}}catch(e){}finally{e9(!1)}},tu=async e=>{tn(!0),ta(!1);try{e6&&e6.id!==e&&await x.h.updatePhoneNumber(e6.id,{agentId:null}),e&&await x.h.updatePhoneNumber(e,{agentId:E.id}),e8(e),await th(),$({title:e?"Phone number assigned":"Phone number unassigned",description:e?"The phone number has been assigned to this agent.":"The phone number has been removed from this agent."})}catch(e){$({title:"Error",description:e instanceof x.M?e.message:"Failed to update phone number",variant:"destructive"}),e8((null==e6?void 0:e6.id)||"")}finally{tn(!1)}},tf=async()=>{try{let e=await x.h.getAgent(E.id);if(e.data){J(e.data),ec(e.data.name),em(e.data.systemPrompt),eh(e.data.greeting||""),ef(e.data.voice||u.Cy[0].id),eN(e.data.mode||"INBOUND"),ep(e.data.outboundGreeting||""),eb(e.data.callWindowStart||""),ey(e.data.callWindowEnd||""),ek(e.data.calendarEnabled||!1),eO(e.data.calendarIntegrationId||""),e_(e.data.calendarScopes||["read_calendar","create_events","reschedule_events"]),eT(e.data.defaultEventTypeId||""),eD(e.data.defaultEventTypeName||""),eL(e.data.defaultEventDuration||30);let t=e.data.callPurpose||"";eY(t),eR(W(t)),eW(e.data.communicationChannel||"VOICE_ONLY"),e$(e.data.imageToolEnabled||!1),eJ(e.data.documentToolEnabled||!1),eX(e.data.videoToolEnabled||!1)}}catch(e){$({title:"Error",description:e instanceof x.M?e.message:"Failed to load agent",variant:"destructive"}),Z.push("/dashboard/agents")}finally{X(!1)}},tg=async()=>{et(!0);try{var e;await x.h.updateAgent(E.id,{name:ed,systemPrompt:eo,greeting:ex,voiceId:eu,mode:eg,outboundGreeting:ej||void 0,callWindowStart:ev||void 0,callWindowEnd:ew||void 0,calendarEnabled:eC,calendarIntegrationId:eC&&eZ||void 0,calendarScopes:eC?eM:void 0,defaultEventTypeId:eC&&eI||void 0,defaultEventTypeName:eC&&ez||void 0,defaultEventDuration:eC?eA:void 0,personaName:(null===(e=u.Cy.find(e=>e.id===eu))||void 0===e?void 0:e.name)||void 0,callPurpose:eH||void 0,communicationChannel:eV,imageToolEnabled:eq,documentToolEnabled:eQ,videoToolEnabled:eK}),$({title:"Agent updated",description:"Your changes have been saved."}),ea(!1),tf()}catch(e){$({title:"Error",description:e instanceof x.M?e.message:"Failed to update agent",variant:"destructive"})}finally{et(!1)}},tN=async()=>{try{await x.h.deleteAgent(E.id),$({title:"Agent deleted",description:"The agent has been removed."}),Z.push("/dashboard/agents")}catch(e){throw $({title:"Error",description:e instanceof x.M?e.message:"Failed to delete agent",variant:"destructive"}),e}};return K?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"text-muted-foreground",children:"Loading agent..."})}):Q?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4 min-w-0 flex-1",children:[(0,a.jsxs)(r.default,{href:"/dashboard/agents",className:"flex-shrink-0",children:[(0,a.jsx)(d.z,{variant:"ghost",size:"icon",className:"sm:hidden text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:(0,a.jsx)(M.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(d.z,{variant:"ghost",size:"sm",className:"hidden sm:flex text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:[(0,a.jsx)(M.Z,{className:"h-4 w-4 mr-2"}),"Back"]})]}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(_.Z,{className:"h-6 w-6 text-slate-600 flex-shrink-0"}),(0,a.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-slate-600 truncate max-w-[120px] sm:max-w-none",title:Q.name,children:Q.name})]}),(0,a.jsxs)("p",{className:"text-muted-foreground text-xs mt-1",children:[(null===(e=u.jt[Q.mode])||void 0===e?void 0:e.label)||Q.mode," agent"]})]})]}),(0,a.jsx)("div",{className:"flex gap-2 flex-shrink-0 lg:hidden",children:es?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.z,{variant:"outline",size:"icon",onClick:()=>ea(!1),className:"sm:hidden text-teal-600 border-teal-600 hover:bg-teal-50",children:(0,a.jsx)(I.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(d.z,{variant:"outline",onClick:()=>ea(!1),className:"hidden sm:flex text-teal-600 border-teal-600 hover:bg-teal-50",children:[(0,a.jsx)(I.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,a.jsx)(d.z,{size:"icon",onClick:tg,disabled:ee,className:"sm:hidden bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:ee?(0,a.jsx)(T.Z,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(z.Z,{className:"h-4 w-4"})}),(0,a.jsx)(d.z,{onClick:tg,disabled:ee,className:"hidden sm:flex bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:ee?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.Z,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.z,{variant:"outline",size:"icon",onClick:()=>ea(!0),className:"sm:hidden text-teal-600 border-teal-600 hover:bg-teal-50",children:(0,a.jsx)(O.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(d.z,{variant:"outline",onClick:()=>ea(!0),className:"hidden sm:flex text-teal-600 border-teal-600 hover:bg-teal-50",children:[(0,a.jsx)(O.Z,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,a.jsx)(j.m,{variant:"full",onDelete:tN,itemName:Q.name,title:"Delete Agent"})]})}),(0,a.jsxs)("div",{className:"hidden lg:flex items-stretch gap-3 flex-1 mx-6",children:["VOICE_ONLY"===Q.communicationChannel?(0,a.jsxs)("div",{className:"flex flex-col justify-center px-4 py-2 bg-white rounded-lg border flex-1",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Total Calls"}),(0,a.jsx)("span",{className:"text-lg font-semibold text-slate-600",children:Q.totalCalls||"—"})]}):"MESSAGING_ONLY"===Q.communicationChannel?(0,a.jsxs)("div",{className:"flex flex-col justify-center px-4 py-2 bg-white rounded-lg border flex-1",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Total Messages"}),(0,a.jsx)("span",{className:"text-lg font-semibold text-slate-600",children:Q.totalMessages||"—"})]}):(0,a.jsxs)("div",{className:"flex flex-col justify-center px-4 py-2 bg-white rounded-lg border flex-1",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Total Communications"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg font-semibold text-slate-600",children:(Q.totalCalls||0)+(Q.totalMessages||0)||"—"}),(Q.totalCalls||0)+(Q.totalMessages||0)>0&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",Q.totalCalls||0," calls, ",Q.totalMessages||0," msgs)"]})]})]}),("VOICE_ONLY"===Q.communicationChannel||"OMNICHANNEL"===Q.communicationChannel)&&(0,a.jsxs)("div",{className:"flex flex-col justify-center px-4 py-2 bg-white rounded-lg border flex-1",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Avg Duration"}),(0,a.jsx)("span",{className:"text-lg font-semibold text-slate-600",children:Q.avgDuration?"".concat(Math.round(Q.avgDuration),"s"):"—"})]})]}),(0,a.jsx)("div",{className:"hidden lg:flex gap-2 flex-shrink-0",children:es?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d.z,{variant:"outline",onClick:()=>ea(!1),className:"text-teal-600 border-teal-600 hover:bg-teal-50",children:[(0,a.jsx)(I.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,a.jsx)(d.z,{onClick:tg,disabled:ee,className:"bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:ee?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.Z,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]}):(0,a.jsxs)(a.Fragment,{children:[("OUTBOUND"===Q.mode||"HYBRID"===Q.mode)&&(!Q.communicationChannel||"VOICE_ONLY"===Q.communicationChannel||"OMNICHANNEL"===Q.communicationChannel)&&(0,a.jsxs)(d.z,{onClick:()=>en(!0),className:"bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"Make Call"]}),("OUTBOUND"===Q.mode||"HYBRID"===Q.mode)&&("MESSAGING_ONLY"===Q.communicationChannel||"OMNICHANNEL"===Q.communicationChannel)&&(0,a.jsxs)(d.z,{onClick:()=>ei(!0),className:"bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Send Message"]}),(0,a.jsxs)(d.z,{variant:"outline",onClick:()=>ea(!0),className:"text-teal-600 border-teal-600 hover:bg-teal-50",children:[(0,a.jsx)(O.Z,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,a.jsx)(j.m,{variant:"full",onDelete:tN,itemName:Q.name,title:"Delete Agent"})]})})]}),!es&&(0,a.jsxs)("div",{className:"flex gap-2 lg:hidden",children:[("OUTBOUND"===Q.mode||"HYBRID"===Q.mode)&&(!Q.communicationChannel||"VOICE_ONLY"===Q.communicationChannel||"OMNICHANNEL"===Q.communicationChannel)&&(0,a.jsxs)(d.z,{onClick:()=>en(!0),className:"flex-1 bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"Make Call"]}),("OUTBOUND"===Q.mode||"HYBRID"===Q.mode)&&("MESSAGING_ONLY"===Q.communicationChannel||"OMNICHANNEL"===Q.communicationChannel)&&(0,a.jsxs)(d.z,{onClick:()=>ei(!0),className:"flex-1 bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Send Message"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 lg:hidden",children:["VOICE_ONLY"===Q.communicationChannel?(0,a.jsx)(c.Zb,{children:(0,a.jsxs)(c.Ol,{className:"p-3",children:[(0,a.jsx)(c.SZ,{className:"text-xs",children:"Total Calls"}),(0,a.jsx)(c.ll,{className:"text-xl text-slate-600",children:Q.totalCalls||"—"})]})}):"MESSAGING_ONLY"===Q.communicationChannel?(0,a.jsx)(c.Zb,{children:(0,a.jsxs)(c.Ol,{className:"p-3",children:[(0,a.jsx)(c.SZ,{className:"text-xs",children:"Total Messages"}),(0,a.jsx)(c.ll,{className:"text-xl text-slate-600",children:Q.totalMessages||"—"})]})}):(0,a.jsx)(c.Zb,{children:(0,a.jsxs)(c.Ol,{className:"p-3",children:[(0,a.jsx)(c.SZ,{className:"text-xs",children:"Communications"}),(0,a.jsx)(c.ll,{className:"text-xl text-slate-600",children:(Q.totalCalls||0)+(Q.totalMessages||0)||"—"}),(Q.totalCalls||0)+(Q.totalMessages||0)>0&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[Q.totalCalls||0," calls \xb7 ",Q.totalMessages||0," msgs"]})]})}),("VOICE_ONLY"===Q.communicationChannel||"OMNICHANNEL"===Q.communicationChannel)&&(0,a.jsx)(c.Zb,{children:(0,a.jsxs)(c.Ol,{className:"p-3",children:[(0,a.jsx)(c.SZ,{className:"text-xs",children:"Avg Duration"}),(0,a.jsx)(c.ll,{className:"text-xl text-slate-600",children:Q.avgDuration?"".concat(Math.round(Q.avgDuration),"s"):"—"})]})})]})]}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsx)(c.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.ll,{className:"text-slate-600",children:"Agent Configuration"}),(0,a.jsx)(c.SZ,{children:"Voice and AI model settings"})]}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat(Q.isActive?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"),children:Q.isActive?"Active":"Inactive"})]})}),(0,a.jsx)(c.aY,{className:"space-y-6",children:es?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"name",className:"text-muted-foreground",children:"Agent Name *"}),(0,a.jsx)(o.I,{id:"name",value:ed,onChange:e=>ec(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Organization *"}),(null==e0?void 0:e0.organizationName)?(0,a.jsxs)("div",{className:"relative",ref:tc,children:[(0,a.jsxs)("button",{type:"button",onClick:()=>td(!ti),className:"flex items-center gap-3 px-3 py-2.5 text-sm border rounded-md w-full justify-between transition-colors border-teal-500 bg-teal-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2.5 min-w-0",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-teal-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(D.Z,{className:"h-4 w-4 text-teal-600"})}),(0,a.jsx)("span",{className:"font-medium text-slate-600",children:e0.organizationName})]}),(0,a.jsx)(A.Z,{className:"h-4 w-4 text-muted-foreground flex-shrink-0 transition-transform ".concat(ti?"rotate-180":"")})]}),ti&&(0,a.jsx)("div",{className:"absolute z-50 mt-1 w-full bg-white border rounded-md shadow-lg py-1",children:(0,a.jsxs)("div",{className:"px-3 py-2 text-sm text-slate-600",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(D.Z,{className:"h-4 w-4 text-teal-600"}),(0,a.jsx)("span",{className:"font-medium",children:e0.organizationName})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"From Organization Profile"}),(0,a.jsxs)(r.default,{href:"/dashboard/settings?tab=preferences",className:"inline-flex items-center gap-1 mt-2 text-xs text-teal-600 hover:underline",onClick:()=>td(!1),children:[(0,a.jsx)(L.Z,{className:"h-3 w-3"}),"Update in Settings"]})]})})]}):(0,a.jsx)(r.default,{href:"/dashboard/settings?tab=preferences",className:"block",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 px-3 py-2.5 text-sm border rounded-md w-full border-amber-300 bg-amber-50 hover:border-amber-400 transition-colors",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(P.Z,{className:"h-4 w-4 text-amber-600"})}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("span",{className:"font-medium text-amber-800",children:"Not configured"}),(0,a.jsx)("p",{className:"text-xs text-amber-700 mt-0.5",children:"Click to set up your organization profile in Settings"})]})]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Phone Number *"}),e7?(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading phone numbers..."}):te?0===e2.length?(0,a.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-slate-100 border border-slate-200 rounded-md",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 text-slate-500 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"No phone numbers available"}),(0,a.jsx)("p",{className:"text-xs text-slate-600 mt-1",children:"Import phone numbers from your Twilio account to assign to this agent."}),(0,a.jsxs)(r.default,{href:"/dashboard/settings",className:"inline-flex items-center gap-1 mt-2 text-xs text-teal-600 hover:underline",children:[(0,a.jsx)(L.Z,{className:"h-3 w-3"}),"Manage Phone Numbers"]})]})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"relative",ref:tr,children:[(0,a.jsxs)("button",{type:"button",onClick:()=>ta(!ts),disabled:tl,className:"flex items-center gap-3 px-3 py-2.5 text-sm border rounded-md w-full justify-between transition-colors disabled:opacity-50 ".concat(e3?"border-teal-500 bg-teal-50":"bg-white hover:bg-slate-50"),children:[(0,a.jsx)("div",{className:"flex items-center gap-2.5 min-w-0",children:e3?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-teal-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(w.Z,{className:"h-4 w-4 text-teal-600"})}),(0,a.jsx)("span",{className:"font-medium text-slate-600",children:Y((null===(t=e2.find(e=>e.id===e3))||void 0===t?void 0:t.phoneNumber)||"")})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(w.Z,{className:"h-4 w-4 text-muted-foreground"})}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"No phone number assigned"})]})}),tl?(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Saving..."}):(0,a.jsx)(A.Z,{className:"h-4 w-4 text-muted-foreground flex-shrink-0 transition-transform ".concat(ts?"rotate-180":"")})]}),ts&&(0,a.jsxs)("div",{className:"absolute z-50 mt-1 w-full bg-white border rounded-md shadow-lg py-1 max-h-60 overflow-auto",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>tu(""),className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm hover:bg-slate-50 text-left",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(w.Z,{className:"h-4 w-4 text-muted-foreground"})}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"No phone number"})]}),e2.map(e=>{var t,s;let l=e.agent&&e.agent.id&&e.agent.id!==E.id,n=(null===(t=e.agent)||void 0===t?void 0:t.id)===E.id;return(0,a.jsxs)("button",{type:"button",onClick:()=>tu(e.id),className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm hover:bg-slate-50 text-left ".concat(n?"bg-teal-50":""),children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ".concat(l?"bg-amber-100":"bg-teal-100"),children:(0,a.jsx)(w.Z,{className:"h-4 w-4 ".concat(l?"text-amber-600":"text-teal-600")})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("span",{className:"font-medium block truncate",children:Y(e.phoneNumber)}),l&&(0,a.jsxs)("span",{className:"text-xs text-amber-600 block",children:["Currently assigned to: ",null===(s=e.agent)||void 0===s?void 0:s.name]}),n&&(0,a.jsx)("span",{className:"text-xs text-teal-600 block",children:"Currently assigned to this agent"})]})]},e.id)}),(0,a.jsx)("div",{className:"border-t mt-1 pt-1",children:(0,a.jsxs)(r.default,{href:"/dashboard/settings",className:"flex items-center gap-2 px-3 py-2 text-sm text-slate-600 hover:bg-slate-50",onClick:()=>ta(!1),children:[(0,a.jsx)(L.Z,{className:"h-4 w-4 text-teal-600"}),(0,a.jsx)("span",{className:"text-xs text-teal-600 hover:underline",children:"Manage Phone Numbers"})]})})]})]})}):(0,a.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-md",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-amber-800",children:"Twilio not configured"}),(0,a.jsx)("p",{className:"text-xs text-amber-700 mt-1",children:"Configure your Twilio credentials in Settings to enable phone number assignment."}),(0,a.jsxs)(r.default,{href:"/dashboard/settings",className:"inline-flex items-center gap-1 mt-2 text-xs text-teal-600 hover:underline",children:[(0,a.jsx)(L.Z,{className:"h-3 w-3"}),"Go to Settings"]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Communication Channel *"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:Object.entries(u.sR).map(e=>{let[t,s]=e,l=eV===t;return(0,a.jsxs)("button",{type:"button",className:"p-3 border rounded-lg text-left hover:border-teal-500 transition-colors ".concat(l?"border-teal-500 bg-teal-50":""),onClick:()=>eW(t),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-teal-100",children:R(t)}),(0,a.jsx)("h3",{className:"font-semibold text-xs text-slate-600",children:s.label})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:s.description})]},t)})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Agent Mode *"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:Object.entries(u.jt).map(e=>{let[t,s]=e;return(0,a.jsxs)("button",{type:"button",className:"p-3 border rounded-lg text-left hover:border-teal-500 transition-colors ".concat(eg===t?"border-teal-500 bg-teal-50":""),onClick:()=>eN(t),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-teal-100",children:B(t)}),(0,a.jsx)("h3",{className:"font-semibold text-xs text-slate-600",children:s.label})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,u.iA)(t,eV)})]},t)})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Call Purpose *"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.entries(u.mN).map(e=>{let[t,s]=e,l=eB===t;return(0,a.jsxs)("button",{type:"button",onClick:()=>{let e="CUSTOM"===t?"":s.value;eR(t),eY(e)},className:"p-3 border rounded-lg text-left hover:border-teal-400 transition-colors ".concat(l?"border-teal-500 bg-teal-50":""),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-teal-100",children:V(t)}),(0,a.jsx)("h3",{className:"font-semibold text-xs text-slate-600",children:s.label})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:s.description})]},t)})}),"CUSTOM"===eB&&(0,a.jsx)(o.I,{id:"callPurpose",placeholder:"Enter your custom call purpose...",value:eH,onChange:e=>eY(e.target.value)})]}),(0,u.Vt)(eV)&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"voice",className:"text-muted-foreground",children:"Voice *"}),(0,a.jsx)(f.$,{value:eu,onChange:ef})]}),("INBOUND"===eg||"HYBRID"===eg)&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"greeting",className:"text-muted-foreground",children:"Inbound Greeting (optional)"}),(0,a.jsx)(o.I,{id:"greeting",value:ex,onChange:e=>eh(e.target.value),placeholder:"e.g., Hi, this is ".concat((null===(s=u.Cy.find(e=>e.id===eu))||void 0===s?void 0:s.name)||"your assistant",". How can I help you today?")})]}),("OUTBOUND"===eg||"HYBRID"===eg)&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"outboundGreeting",className:"text-muted-foreground",children:"Outbound Greeting (optional)"}),(0,a.jsx)(o.I,{id:"outboundGreeting",value:ej,onChange:e=>ep(e.target.value),placeholder:"e.g., Hi, this is ".concat((null===(p=u.Cy.find(e=>e.id===eu))||void 0===p?void 0:p.name)||"your assistant"," calling from ").concat((null==e0?void 0:e0.organizationName)||"[company]","...")})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Call Window (optional)"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"From"}),(0,a.jsx)(o.I,{type:"time",value:ev,onChange:e=>eb(e.target.value),placeholder:"Start time",className:"flex-1 [&::-webkit-calendar-picker-indicator]:opacity-100 [&::-webkit-calendar-picker-indicator]:brightness-0 [&::-webkit-calendar-picker-indicator]:saturate-100 [&::-webkit-calendar-picker-indicator]:invert-[.5] [&::-webkit-calendar-picker-indicator]:sepia-[1] [&::-webkit-calendar-picker-indicator]:saturate-[10] [&::-webkit-calendar-picker-indicator]:hue-rotate-[130deg]"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"To"}),(0,a.jsx)(o.I,{type:"time",value:ew,onChange:e=>ey(e.target.value),placeholder:"End time",className:"flex-1 [&::-webkit-calendar-picker-indicator]:opacity-100 [&::-webkit-calendar-picker-indicator]:brightness-0 [&::-webkit-calendar-picker-indicator]:saturate-100 [&::-webkit-calendar-picker-indicator]:invert-[.5] [&::-webkit-calendar-picker-indicator]:sepia-[1] [&::-webkit-calendar-picker-indicator]:saturate-[10] [&::-webkit-calendar-picker-indicator]:hue-rotate-[130deg]"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"systemPrompt",className:"text-muted-foreground",children:"System Prompt *"}),(0,a.jsx)("textarea",{id:"systemPrompt",value:eo,onChange:e=>em(e.target.value),className:"w-full min-h-[200px] px-3 py-2 border rounded-md bg-background"})]}),((null==eS?void 0:eS.calendars)&&eS.calendars.length>0||(0,u.TR)(eV))&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Tool Access (optional)"}),(null==eS?void 0:eS.calendars)&&eS.calendars.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border cursor-pointer hover:bg-slate-50 transition-colors",children:[(0,a.jsx)("input",{type:"checkbox",checked:eC,onChange:e=>ek(e.target.checked),className:"mt-0.5 h-4 w-4 rounded border-gray-300 accent-teal-600 focus:ring-teal-500"}),(0,a.jsx)(k.Z,{className:"h-4 w-4 text-teal-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"font-medium text-sm text-slate-600",children:"Calendar Tool"})}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Check availability and book appointments"})]})]}),eC&&(0,a.jsxs)("div",{className:"ml-7 pl-4 border-l-2 border-teal-200 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground text-xs",children:"Calendar"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 text-sm border rounded-md bg-white",value:eZ,onChange:e=>{eO(e.target.value),eT(""),eD("")},children:[(0,a.jsx)("option",{value:"",children:"Select a calendar"}),eS.calendars.map(e=>(0,a.jsxs)("option",{value:e.id,children:["google"===e.provider?"Google Calendar":"calcom"===e.provider?"Cal.com":"Calendly"," - ",e.email||e.username||"Connected"]},e.id))]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground text-xs",children:"Permissions"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:eM.includes("read_calendar"),onChange:e=>{e_(t=>e.target.checked?[...t,"read_calendar"]:t.filter(e=>"read_calendar"!==e))},className:"h-4 w-4 rounded border-gray-300 accent-teal-600"}),(0,a.jsx)("span",{className:"text-slate-600",children:"Read Calendar"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"(check availability)"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:eM.includes("create_events"),onChange:e=>{e_(t=>e.target.checked?[...t,"create_events"]:t.filter(e=>"create_events"!==e))},className:"h-4 w-4 rounded border-gray-300 accent-teal-600"}),(0,a.jsx)("span",{className:"text-slate-600",children:"Create Events"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"(book appointments)"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:eM.includes("reschedule_events"),onChange:e=>{e_(t=>e.target.checked?[...t,"reschedule_events"]:t.filter(e=>"reschedule_events"!==e))},className:"h-4 w-4 rounded border-gray-300 accent-teal-600"}),(0,a.jsx)("span",{className:"text-slate-600",children:"Reschedule Events"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"(modify bookings)"})]})]})]}),(()=>{var e;let t=null==eS?void 0:null===(e=eS.calendars)||void 0===e?void 0:e.find(e=>e.id===eZ);return(null==t?void 0:t.provider)==="google"?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground text-xs",children:"Default Duration"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 text-sm border rounded-md bg-white",value:eA,onChange:e=>eL(parseInt(e.target.value)),children:[(0,a.jsx)("option",{value:15,children:"15 minutes"}),(0,a.jsx)("option",{value:30,children:"30 minutes"}),(0,a.jsx)("option",{value:45,children:"45 minutes"}),(0,a.jsx)("option",{value:60,children:"60 minutes"}),(0,a.jsx)("option",{value:90,children:"90 minutes"})]})]}):eP.length>0?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground text-xs",children:"Default Event Type"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 text-sm border rounded-md bg-white",value:eI,onChange:e=>{let t=eP.find(t=>t.id===e.target.value);eT(e.target.value),eD((null==t?void 0:t.name)||"")},disabled:eU,children:[(0,a.jsx)("option",{value:"",children:"Select event type"}),eU?(0,a.jsx)("option",{children:"Loading..."}):eP.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.duration," min)"]},e.id))]})]}):null})()]})]}),(0,u.TR)(eV)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border cursor-pointer hover:bg-slate-50 transition-colors",children:[(0,a.jsx)("input",{type:"checkbox",checked:eq,onChange:e=>e$(e.target.checked),className:"mt-0.5 h-4 w-4 rounded border-gray-300 accent-teal-600 focus:ring-teal-500"}),(0,a.jsx)(F.Z,{className:"h-4 w-4 text-teal-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"font-medium text-sm text-slate-600",children:"Images"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Send photos, screenshots, and graphics via MMS"})]})]}),(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border cursor-pointer hover:bg-slate-50 transition-colors",children:[(0,a.jsx)("input",{type:"checkbox",checked:eQ,onChange:e=>eJ(e.target.checked),className:"mt-0.5 h-4 w-4 rounded border-gray-300 accent-teal-600 focus:ring-teal-500"}),(0,a.jsx)(U.Z,{className:"h-4 w-4 text-teal-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"font-medium text-sm text-slate-600",children:"Documents"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Send PDFs, contracts, and forms via MMS"})]})]}),(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border cursor-pointer hover:bg-slate-50 transition-colors",children:[(0,a.jsx)("input",{type:"checkbox",checked:eK,onChange:e=>eX(e.target.checked),className:"mt-0.5 h-4 w-4 rounded border-gray-300 accent-teal-600 focus:ring-teal-500"}),(0,a.jsx)(G.Z,{className:"h-4 w-4 text-teal-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"font-medium text-sm text-slate-600",children:"Videos"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Share video content and tutorials via MMS"})]})]})]})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start gap-6 pb-6 border-b",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:(null===(v=u.Cy.find(e=>e.id===Q.voice))||void 0===v?void 0:v.avatar)?(0,a.jsx)(i.default,{src:u.Cy.find(e=>e.id===Q.voice).avatar,alt:(null===(b=u.Cy.find(e=>e.id===Q.voice))||void 0===b?void 0:b.name)||"Voice",width:96,height:96,className:"w-full h-full object-cover"}):(0,a.jsx)(H.Z,{className:"w-12 h-12 text-slate-400"})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Voice"}),(0,a.jsx)("p",{className:"font-medium text-lg text-slate-600",children:(null===(C=u.Cy.find(e=>e.id===Q.voice))||void 0===C?void 0:C.name)||Q.voice}),(0,a.jsx)("p",{className:"hidden sm:block text-sm text-muted-foreground",children:null===(S=u.Cy.find(e=>e.id===Q.voice))||void 0===S?void 0:S.description}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Powered by ElevenLabs and GPT-4o Mini"})]})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Tool Access"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.Z,{className:"h-4 w-4 text-teal-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"hidden sm:inline font-medium text-sm text-slate-600",children:"Calendar"}),Q.calendarEnabled&&(null==eS?void 0:eS.connected)?(0,a.jsx)("span",{className:"hidden sm:inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-teal-100 text-teal-700",children:"calcom"===eS.provider?"Cal.com":"Calendly"}):(0,a.jsx)("span",{className:"hidden sm:inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-slate-100 text-slate-500",children:"Off"})]}),("MESSAGING_ONLY"===Q.communicationChannel||"OMNICHANNEL"===Q.communicationChannel)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(F.Z,{className:"h-4 w-4 text-teal-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"hidden sm:inline font-medium text-sm text-slate-600",children:"Images"}),(0,a.jsx)("span",{className:"hidden sm:inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ".concat(Q.imageToolEnabled?"bg-teal-100 text-teal-700":"bg-slate-100 text-slate-500"),children:Q.imageToolEnabled?"MMS":"Off"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(U.Z,{className:"h-4 w-4 text-teal-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"hidden sm:inline font-medium text-sm text-slate-600",children:"Documents"}),(0,a.jsx)("span",{className:"hidden sm:inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ".concat(Q.documentToolEnabled?"bg-teal-100 text-teal-700":"bg-slate-100 text-slate-500"),children:Q.documentToolEnabled?"MMS":"Off"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(G.Z,{className:"h-4 w-4 text-teal-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"hidden sm:inline font-medium text-sm text-slate-600",children:"Videos"}),(0,a.jsx)("span",{className:"hidden sm:inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ".concat(Q.videoToolEnabled?"bg-teal-100 text-teal-700":"bg-slate-100 text-slate-500"),children:Q.videoToolEnabled?"MMS":"Off"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Organization"}),(null==e0?void 0:e0.organizationName)?(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-teal-100",children:(0,a.jsx)(D.Z,{className:"h-3 w-3 text-teal-600"})}),(0,a.jsx)("span",{className:"font-medium text-slate-600",children:e0.organizationName})]})}):(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Not configured"}),(0,a.jsxs)(r.default,{href:"/dashboard/settings?tab=preferences",className:"inline-flex items-center gap-1 text-xs text-teal-600 hover:underline mt-1",children:[(0,a.jsx)(L.Z,{className:"h-3 w-3"}),"Set up in Settings"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Phone Number"}),e7?(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Loading..."}):e6?(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-teal-100",children:(0,a.jsx)(w.Z,{className:"h-3 w-3 text-teal-600"})}),(0,a.jsx)("span",{className:"font-medium text-slate-600",children:Y(e6.phoneNumber)})]})}):(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No phone number assigned"}),(0,a.jsxs)(r.default,{href:"/dashboard/settings",className:"inline-flex items-center gap-1 text-xs text-teal-600 hover:underline mt-1",children:[(0,a.jsx)(L.Z,{className:"h-3 w-3"}),"Assign in Settings"]})]})]}),Q.mode&&u.jt[Q.mode]&&(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Mode"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-teal-100",children:B(Q.mode)}),(0,a.jsx)("span",{className:"font-medium text-slate-600",children:u.jt[Q.mode].label})]})})]}),Q.callPurpose&&(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Call Purpose"}),(0,a.jsx)("p",{className:"font-medium text-slate-600 mt-1",children:Q.callPurpose})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Created"}),(0,a.jsx)("p",{className:"font-medium text-slate-600",children:new Date(Q.createdAt).toLocaleDateString()})]}),("OUTBOUND"===Q.mode||"HYBRID"===Q.mode)&&Q.callWindowStart&&Q.callWindowEnd&&(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Call Window"}),(0,a.jsxs)("p",{className:"font-medium text-slate-600",children:[Q.callWindowStart," - ",Q.callWindowEnd]})]}),Q.greeting&&(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Greeting"}),(0,a.jsx)("p",{className:"font-medium text-slate-600",children:Q.greeting})]}),("OUTBOUND"===Q.mode||"HYBRID"===Q.mode)&&Q.outboundGreeting&&(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Outbound Greeting"}),(0,a.jsx)("p",{className:"font-medium text-slate-600",children:Q.outboundGreeting})]}),(0,a.jsxs)("div",{className:"md:col-span-2 border-t pt-4 mt-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"System Prompt"}),(0,a.jsx)("p",{className:"font-medium text-slate-600 whitespace-pre-wrap bg-muted p-3 rounded-md text-sm mt-1",children:Q.systemPrompt})]})]})]})})]}),el&&Q&&(0,a.jsx)(g.P,{agentId:Q.id,agentName:Q.name,callWindow:Q.callWindowStart&&Q.callWindowEnd?{start:Q.callWindowStart,end:Q.callWindowEnd}:void 0,onClose:()=>en(!1),onCallInitiated:e=>{console.log("Call initiated:",e)}}),er&&Q&&(0,a.jsx)(N.n,{agentId:Q.id,agentName:Q.name,imageToolEnabled:Q.imageToolEnabled||!1,documentToolEnabled:Q.documentToolEnabled||!1,videoToolEnabled:Q.videoToolEnabled||!1,onClose:()=>ei(!1),onMessageSent:e=>{console.log("Message sent:",e)}})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4",children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Agent not found"}),(0,a.jsxs)(r.default,{href:"/dashboard/agents",children:[(0,a.jsx)(d.z,{variant:"ghost",size:"icon",className:"sm:hidden text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:(0,a.jsx)(M.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(d.z,{variant:"ghost",className:"hidden sm:flex text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:[(0,a.jsx)(M.Z,{className:"h-4 w-4 mr-2"}),"Back to Agents"]})]})]})}},33041:function(e,t,s){"use strict";s.d(t,{m:function(){return x}});var a=s(57437),l=s(2265),n=s(12381),r=s(54887);let i=(0,s(79205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var d=s(32489),c=s(51817);function o(e){let{open:t,onClose:s,onConfirm:o,title:m="Confirm Delete",description:x,itemName:h,confirmText:u="Delete",cancelText:f="Cancel"}=e,[g,N]=(0,l.useState)(!1),[j,p]=(0,l.useState)(!1);(0,l.useEffect)(()=>{p(!0)},[]),(0,l.useEffect)(()=>{t||N(!1)},[t]),(0,l.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&!g&&s()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,s,g]),(0,l.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]);let v=async()=>{N(!0);try{await o(),s()}catch(e){N(!1)}};if(!t||!j)return null;let b=(0,a.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:g?void 0:s}),(0,a.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-md mx-4 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(i,{className:"h-5 w-5 text-red-600"})}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-600",children:m})]}),(0,a.jsx)("button",{onClick:s,disabled:g,className:"p-2 hover:bg-slate-100 rounded-full transition-colors disabled:opacity-50",children:(0,a.jsx)(d.Z,{className:"h-5 w-5 text-slate-500"})})]}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:x||(h?'Are you sure you want to delete "'.concat(h,'"? This action cannot be undone.'):"Are you sure you want to delete this? This action cannot be undone.")})}),(0,a.jsxs)("div",{className:"flex gap-3 p-4 pt-0",children:[(0,a.jsx)(n.z,{type:"button",variant:"outline",onClick:s,className:"flex-1",disabled:g,children:f}),(0,a.jsx)(n.z,{type:"button",variant:"destructive",onClick:v,className:"flex-1",disabled:g,children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):u})]})]})]});return(0,r.createPortal)(b,document.body)}var m=s(18930);function x(e){let{onDelete:t,itemName:s,title:r,description:i,confirmText:d,variant:c="icon",size:x,className:h="",disabled:u=!1}=e,[f,g]=(0,l.useState)(!1),N=async()=>{await t()};return"full"===c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.z,{variant:"destructive",size:"icon",onClick:()=>g(!0),disabled:u,className:"sm:hidden ".concat(h),children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(n.z,{variant:"destructive",size:x,onClick:()=>g(!0),disabled:u,className:"hidden sm:flex ".concat(h),children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Delete"]}),(0,a.jsx)(o,{open:f,onClose:()=>g(!1),onConfirm:N,title:r,description:i,itemName:s,confirmText:d})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.z,{variant:"ghost",size:x||"icon",onClick:()=>g(!0),disabled:u,className:"text-destructive hover:text-destructive hover:bg-destructive/10 ".concat(h),children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})}),(0,a.jsx)(o,{open:f,onClose:()=>g(!1),onConfirm:N,title:r,description:i,itemName:s,confirmText:d})]})}},69173:function(e,t,s){"use strict";s.d(t,{$:function(){return c}});var a=s(57437),l=s(2265),n=s(33145),r=s(78705),i=s(92369),d=s(40875);function c(e){let{value:t,onChange:s,disabled:c=!1}=e,[o,m]=(0,l.useState)(!1),x=(0,l.useRef)(null),h=r.Cy.find(e=>e.id===t)||r.Cy[0];(0,l.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&m(!1)};return o&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]);let u=e=>{s(e),m(!1)};return(0,a.jsxs)("div",{className:"relative",ref:x,children:[(0,a.jsxs)("button",{type:"button",onClick:()=>!c&&m(!o),disabled:c,className:"w-full flex items-center gap-3 px-3 py-2.5 border rounded-md justify-between transition-colors disabled:opacity-50 disabled:cursor-not-allowed ".concat(t?"border-teal-500 bg-teal-50":"bg-white hover:bg-slate-50"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center overflow-hidden flex-shrink-0 ".concat(t?"bg-teal-100":"bg-slate-100"),children:h.avatar?(0,a.jsx)(n.default,{src:h.avatar,alt:h.name,width:48,height:48,className:"w-full h-full object-cover"}):(0,a.jsx)(i.Z,{className:"w-6 h-6 ".concat(t?"text-teal-600":"text-slate-400")})}),(0,a.jsxs)("div",{className:"flex-1 text-left min-w-0",children:[(0,a.jsx)("div",{className:"font-medium text-sm text-slate-600",children:h.name}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:h.description})]})]}),(0,a.jsx)(d.Z,{className:"w-4 h-4 text-muted-foreground flex-shrink-0 transition-transform ".concat(o?"rotate-180":"")})]}),o&&(0,a.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg max-h-80 overflow-y-auto",children:r.Cy.map(e=>{let s=e.id===t;return(0,a.jsxs)("button",{type:"button",onClick:()=>u(e.id),className:"w-full flex items-center gap-3 px-3 py-2.5 hover:bg-slate-50 transition-colors ".concat(s?"bg-teal-50":""),children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center overflow-hidden flex-shrink-0 ".concat(s?"bg-teal-100":"bg-slate-100"),children:e.avatar?(0,a.jsx)(n.default,{src:e.avatar,alt:e.name,width:48,height:48,className:"w-full h-full object-cover"}):(0,a.jsx)(i.Z,{className:"w-6 h-6 ".concat(s?"text-teal-600":"text-slate-400")})}),(0,a.jsxs)("div",{className:"flex-1 text-left min-w-0",children:[(0,a.jsx)("div",{className:"font-medium text-sm text-slate-600",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]}),s&&(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-teal-600 flex-shrink-0"})]},e.id)})})]})}}},function(e){e.O(0,[225,145,648,437,92,452,6,972,971,117,744],function(){return e(e.s=67601)}),_N_E=e.O()}]);