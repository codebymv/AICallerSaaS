(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{67601:function(e,t,s){Promise.resolve().then(s.bind(s,30922))},22135:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},96362:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},69658:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]])},76980:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]])},99397:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},44743:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},18930:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},30922:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return F}});var a=s(57437),l=s(2265),n=s(99376),r=s(27648),i=s(33145),d=s(12381),c=s(79820),o=s(40279),m=s(75060),x=s(71837),u=s(23340),h=s(78705),g=s(69173),f=s(21688),p=s(58006),j=s(33041),N=s(71866),v=s(17580),b=s(68428),y=s(13041),w=s(53417),C=s(28124),k=s(32660),S=s(82222),E=s(98420),Z=s(49322),O=s(98728),M=s(40875),_=s(31047),I=s(53113),T=s(48736),A=s(29374),D=s(92369);let P=e=>{let t=e.replace(/\D/g,"");return 11===t.length&&t.startsWith("1")?"(".concat(t.slice(1,4),") ").concat(t.slice(4,7),"-").concat(t.slice(7)):e},L=e=>{switch(e){case"INBOUND":return(0,a.jsx)(N.Z,{className:"h-4 w-4 text-teal-600"});case"OUTBOUND":return(0,a.jsx)(v.Z,{className:"h-4 w-4 text-teal-600"});case"HYBRID":return(0,a.jsx)(b.Z,{className:"h-4 w-4 text-teal-600"});default:return null}},z=e=>{let t="h-4 w-4 text-teal-600";switch(e){case"VOICE_ONLY":return(0,a.jsx)(y.Z,{className:t});case"MESSAGING_ONLY":return(0,a.jsx)(w.Z,{className:t});case"OMNICHANNEL":return(0,a.jsx)(C.Z,{className:t});default:return null}};function F(){var e,t,s,N,v,b,C,F;let G=(0,n.useParams)(),Y=(0,n.useRouter)(),B=(0,n.useSearchParams)(),{toast:H}=(0,u.pm)(),[V,U]=(0,l.useState)(null),[W,R]=(0,l.useState)(!0),[q,$]=(0,l.useState)(!1),[J,K]=(0,l.useState)("true"===B.get("edit")),[Q,X]=(0,l.useState)(!1),[ee,et]=(0,l.useState)(!1),[es,ea]=(0,l.useState)(""),[el,en]=(0,l.useState)(""),[er,ei]=(0,l.useState)(""),[ed,ec]=(0,l.useState)(""),[eo,em]=(0,l.useState)("INBOUND"),[ex,eu]=(0,l.useState)(""),[eh,eg]=(0,l.useState)(""),[ef,ep]=(0,l.useState)(""),[ej,eN]=(0,l.useState)(!1),[ev,eb]=(0,l.useState)(null),[ey,ew]=(0,l.useState)(""),[eC,ek]=(0,l.useState)(["read_calendar","create_events","reschedule_events"]),[eS,eE]=(0,l.useState)(""),[eZ,eO]=(0,l.useState)(""),[eM,e_]=(0,l.useState)(30),[eI,eT]=(0,l.useState)([]),[eA,eD]=(0,l.useState)(!1),[eP,eL]=(0,l.useState)(""),[ez,eF]=(0,l.useState)("VOICE_ONLY"),[eG,eY]=(0,l.useState)(!1),[eB,eH]=(0,l.useState)(!1),[eV,eU]=(0,l.useState)(!1),[eW,eR]=(0,l.useState)(null),[eq,e$]=(0,l.useState)([]),[eJ,eK]=(0,l.useState)(null),[eQ,eX]=(0,l.useState)(""),[e0,e1]=(0,l.useState)(!0),[e2,e4]=(0,l.useState)(!1),[e6,e5]=(0,l.useState)(!1),[e3,e7]=(0,l.useState)(!1),e8=(0,l.useRef)(null);(0,l.useEffect)(()=>{tl(),te(),ts(),e9()},[G.id]);let e9=async()=>{try{let e=await x.h.getBusinessProfile();eR(e.data||null)}catch(e){}};(0,l.useEffect)(()=>{let e=e=>{e8.current&&!e8.current.contains(e.target)&&e5(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let te=async()=>{try{let e=await x.h.getCalendarStatus();eb(e.data||null)}catch(e){console.error("Failed to fetch calendar status:",e)}},tt=async e=>{if(!e||!(null==ev?void 0:ev.calendars))return;let t=ev.calendars.find(t=>t.id===e);if(t){eD(!0);try{let e=[];"calcom"===t.provider?e=((await x.h.getCalcomEventTypes()).data||[]).map(e=>({id:String(e.id),name:e.title,duration:e.duration})):"calendly"===t.provider&&(e=((await x.h.getCalendarEventTypes()).data||[]).map(e=>({id:e.uri,name:e.name,duration:e.duration}))),eT(e)}catch(e){console.error("Failed to fetch event types:",e)}finally{eD(!1)}}};(0,l.useEffect)(()=>{ey&&ej&&(null==ev?void 0:ev.calendars)&&tt(ey)},[ey,ej,null==ev?void 0:ev.calendars]);let ts=async()=>{e1(!0);try{var e,t;let s=await x.h.getTwilioSettings();if(e4((null===(e=s.data)||void 0===e?void 0:e.configured)||!1),null===(t=s.data)||void 0===t?void 0:t.configured){let e=(await x.h.getPhoneNumbers()).data||[];e$(e);let t=e.find(e=>{var t;return(null===(t=e.agent)||void 0===t?void 0:t.id)===G.id});eK(t||null),eX((null==t?void 0:t.id)||"")}}catch(e){}finally{e1(!1)}},ta=async e=>{e7(!0),e5(!1);try{eJ&&eJ.id!==e&&await x.h.updatePhoneNumber(eJ.id,{agentId:null}),e&&await x.h.updatePhoneNumber(e,{agentId:G.id}),eX(e),await ts(),H({title:e?"Phone number assigned":"Phone number unassigned",description:e?"The phone number has been assigned to this agent.":"The phone number has been removed from this agent."})}catch(e){H({title:"Error",description:e instanceof x.M?e.message:"Failed to update phone number",variant:"destructive"}),eX((null==eJ?void 0:eJ.id)||"")}finally{e7(!1)}},tl=async()=>{try{let e=await x.h.getAgent(G.id);e.data&&(U(e.data),ea(e.data.name),en(e.data.systemPrompt),ei(e.data.greeting||""),ec(e.data.voice||h.Cy[0].id),em(e.data.mode||"INBOUND"),eu(e.data.outboundGreeting||""),eg(e.data.callWindowStart||""),ep(e.data.callWindowEnd||""),eN(e.data.calendarEnabled||!1),ew(e.data.calendarIntegrationId||""),ek(e.data.calendarScopes||["read_calendar","create_events","reschedule_events"]),eE(e.data.defaultEventTypeId||""),eO(e.data.defaultEventTypeName||""),e_(e.data.defaultEventDuration||30),eL(e.data.callPurpose||""),eF(e.data.communicationChannel||"VOICE_ONLY"),eY(e.data.imageToolEnabled||!1),eH(e.data.documentToolEnabled||!1),eU(e.data.videoToolEnabled||!1))}catch(e){H({title:"Error",description:e instanceof x.M?e.message:"Failed to load agent",variant:"destructive"}),Y.push("/dashboard/agents")}finally{R(!1)}},tn=async()=>{$(!0);try{var e;await x.h.updateAgent(G.id,{name:es,systemPrompt:el,greeting:er,voiceId:ed,mode:eo,outboundGreeting:ex||void 0,callWindowStart:eh||void 0,callWindowEnd:ef||void 0,calendarEnabled:ej,calendarIntegrationId:ej&&ey||void 0,calendarScopes:ej?eC:void 0,defaultEventTypeId:ej&&eS||void 0,defaultEventTypeName:ej&&eZ||void 0,defaultEventDuration:ej?eM:void 0,personaName:(null===(e=h.Cy.find(e=>e.id===ed))||void 0===e?void 0:e.name)||void 0,callPurpose:eP||void 0,communicationChannel:ez,imageToolEnabled:eG,documentToolEnabled:eB,videoToolEnabled:eV}),H({title:"Agent updated",description:"Your changes have been saved."}),K(!1),tl()}catch(e){H({title:"Error",description:e instanceof x.M?e.message:"Failed to update agent",variant:"destructive"})}finally{$(!1)}},tr=async()=>{try{await x.h.deleteAgent(G.id),H({title:"Agent deleted",description:"The agent has been removed."}),Y.push("/dashboard/agents")}catch(e){throw H({title:"Error",description:e instanceof x.M?e.message:"Failed to delete agent",variant:"destructive"}),e}};return W?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"text-muted-foreground",children:"Loading agent..."})}):V?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 min-w-0",children:[(0,a.jsx)(r.default,{href:"/dashboard/agents",className:"flex-shrink-0",children:(0,a.jsxs)(d.z,{variant:"ghost",size:"sm",className:"text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:[(0,a.jsx)(k.Z,{className:"h-4 w-4 mr-2"}),"Back"]})}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(S.Z,{className:"h-6 w-6 text-slate-600 flex-shrink-0"}),(0,a.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-slate-600 truncate max-w-[200px] sm:max-w-[250px]",title:V.name,children:V.name})]}),(0,a.jsxs)("p",{className:"text-muted-foreground text-xs",children:[(null===(e=h.jt[V.mode])||void 0===e?void 0:e.label)||V.mode," agent"]})]})]}),(0,a.jsxs)("div",{className:"hidden lg:flex items-stretch gap-3 flex-1 mx-6",children:["VOICE_ONLY"===V.communicationChannel?(0,a.jsxs)("div",{className:"flex flex-col justify-center px-4 py-2 bg-white rounded-lg border flex-1",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Total Calls"}),(0,a.jsx)("span",{className:"text-lg font-semibold text-slate-600",children:V.totalCalls||"—"})]}):"MESSAGING_ONLY"===V.communicationChannel?(0,a.jsxs)("div",{className:"flex flex-col justify-center px-4 py-2 bg-white rounded-lg border flex-1",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Total Messages"}),(0,a.jsx)("span",{className:"text-lg font-semibold text-slate-600",children:V.totalMessages||"—"})]}):(0,a.jsxs)("div",{className:"flex flex-col justify-center px-4 py-2 bg-white rounded-lg border flex-1",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Total Communications"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg font-semibold text-slate-600",children:(V.totalCalls||0)+(V.totalMessages||0)||"—"}),(V.totalCalls||0)+(V.totalMessages||0)>0&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",V.totalCalls||0," calls, ",V.totalMessages||0," msgs)"]})]})]}),("VOICE_ONLY"===V.communicationChannel||"OMNICHANNEL"===V.communicationChannel)&&(0,a.jsxs)("div",{className:"flex flex-col justify-center px-4 py-2 bg-white rounded-lg border flex-1",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Avg Duration"}),(0,a.jsx)("span",{className:"text-lg font-semibold text-slate-600",children:V.avgDuration?"".concat(Math.round(V.avgDuration),"s"):"—"})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-center px-4 py-2 bg-white rounded-lg border flex-1",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Status"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat(V.isActive?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"),children:V.isActive?"Active":"Inactive"}),V.mode&&h.jt[V.mode]&&(0,a.jsxs)("span",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,a.jsx)("span",{className:"w-4 h-4 rounded-full flex items-center justify-center bg-teal-100",children:L(V.mode)}),h.jt[V.mode].label]})]})]})]}),(0,a.jsx)("div",{className:"flex gap-2 flex-shrink-0",children:J?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.z,{variant:"outline",onClick:()=>K(!1),className:"text-teal-600 border-teal-600 hover:bg-teal-50",children:"Cancel"}),(0,a.jsx)(d.z,{onClick:tn,disabled:q,className:"bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:q?"Saving...":"Save Changes"})]}):(0,a.jsxs)(a.Fragment,{children:[("OUTBOUND"===V.mode||"HYBRID"===V.mode)&&(!V.communicationChannel||"VOICE_ONLY"===V.communicationChannel||"OMNICHANNEL"===V.communicationChannel)&&(0,a.jsxs)(d.z,{onClick:()=>X(!0),className:"bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Make Call"]}),("OUTBOUND"===V.mode||"HYBRID"===V.mode)&&("MESSAGING_ONLY"===V.communicationChannel||"OMNICHANNEL"===V.communicationChannel)&&(0,a.jsxs)(d.z,{onClick:()=>et(!0),className:"bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"Send Message"]}),(0,a.jsx)(d.z,{variant:"outline",onClick:()=>K(!0),className:"text-teal-600 border-teal-600 hover:bg-teal-50",children:"Edit"}),(0,a.jsx)(j.m,{variant:"full",onDelete:tr,itemName:V.name,title:"Delete Agent"})]})})]}),(0,a.jsxs)("div",{className:"grid gap-4 lg:hidden ".concat("OMNICHANNEL"===V.communicationChannel?"grid-cols-2":"grid-cols-3"),children:["VOICE_ONLY"===V.communicationChannel?(0,a.jsx)(c.Zb,{children:(0,a.jsxs)(c.Ol,{className:"p-3",children:[(0,a.jsx)(c.SZ,{className:"text-xs",children:"Total Calls"}),(0,a.jsx)(c.ll,{className:"text-xl text-slate-600",children:V.totalCalls||"—"})]})}):"MESSAGING_ONLY"===V.communicationChannel?(0,a.jsx)(c.Zb,{children:(0,a.jsxs)(c.Ol,{className:"p-3",children:[(0,a.jsx)(c.SZ,{className:"text-xs",children:"Total Messages"}),(0,a.jsx)(c.ll,{className:"text-xl text-slate-600",children:V.totalMessages||"—"})]})}):(0,a.jsx)(c.Zb,{children:(0,a.jsxs)(c.Ol,{className:"p-3",children:[(0,a.jsx)(c.SZ,{className:"text-xs",children:"Communications"}),(0,a.jsx)(c.ll,{className:"text-xl text-slate-600",children:(V.totalCalls||0)+(V.totalMessages||0)||"—"}),(V.totalCalls||0)+(V.totalMessages||0)>0&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[V.totalCalls||0," calls \xb7 ",V.totalMessages||0," msgs"]})]})}),("VOICE_ONLY"===V.communicationChannel||"OMNICHANNEL"===V.communicationChannel)&&(0,a.jsx)(c.Zb,{children:(0,a.jsxs)(c.Ol,{className:"p-3",children:[(0,a.jsx)(c.SZ,{className:"text-xs",children:"Avg Duration"}),(0,a.jsx)(c.ll,{className:"text-xl text-slate-600",children:V.avgDuration?"".concat(Math.round(V.avgDuration),"s"):"—"})]})}),(0,a.jsx)(c.Zb,{children:(0,a.jsxs)(c.Ol,{className:"p-3",children:[(0,a.jsx)(c.SZ,{className:"text-xs",children:"Status"}),(0,a.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat(V.isActive?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"),children:V.isActive?"Active":"Inactive"})})]})})]})]}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsx)(c.ll,{className:"text-slate-600",children:"Agent Configuration"}),(0,a.jsx)(c.SZ,{children:"Voice and AI model settings"})]}),(0,a.jsx)(c.aY,{className:"space-y-6",children:J?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"name",className:"text-muted-foreground",children:"Agent Name"}),(0,a.jsx)(o.I,{id:"name",value:es,onChange:e=>ea(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Organization"}),(null==eW?void 0:eW.organizationName)?(0,a.jsx)("div",{className:"p-4 border rounded-lg border-teal-500 bg-teal-50",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-teal-100",children:(0,a.jsx)(E.Z,{className:"h-3 w-3 text-teal-600"})}),(0,a.jsx)("h3",{className:"font-semibold text-sm text-muted-foreground",children:eW.organizationName})]})}):(0,a.jsx)(r.default,{href:"/dashboard/settings?tab=preferences",className:"block",children:(0,a.jsxs)("div",{className:"p-4 border rounded-lg border-amber-300 bg-amber-50 hover:border-amber-400 transition-colors cursor-pointer",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-amber-100",children:(0,a.jsx)(Z.Z,{className:"h-3 w-3 text-amber-600"})}),(0,a.jsx)("h3",{className:"font-semibold text-sm text-amber-800",children:"Not configured"})]}),(0,a.jsx)("p",{className:"text-xs text-amber-700",children:"Click to set up your organization profile in Settings"})]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Phone Number"}),e0?(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading phone numbers..."}):e2?0===eq.length?(0,a.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-slate-100 border border-slate-200 rounded-md",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 text-slate-500 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"No phone numbers available"}),(0,a.jsx)("p",{className:"text-xs text-slate-600 mt-1",children:"Import phone numbers from your Twilio account to assign to this agent."}),(0,a.jsxs)(r.default,{href:"/dashboard/settings",className:"inline-flex items-center gap-1 mt-2 text-xs text-teal-600 hover:underline",children:[(0,a.jsx)(O.Z,{className:"h-3 w-3"}),"Manage Phone Numbers"]})]})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"relative",ref:e8,children:[(0,a.jsxs)("button",{type:"button",onClick:()=>e5(!e6),disabled:e3,className:"flex items-center gap-3 px-3 py-2.5 text-sm border rounded-md w-full justify-between transition-colors disabled:opacity-50 ".concat(eQ?"border-teal-500 bg-teal-50":"bg-white hover:bg-slate-50"),children:[(0,a.jsx)("div",{className:"flex items-center gap-2.5 min-w-0",children:eQ?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-teal-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(y.Z,{className:"h-4 w-4 text-teal-600"})}),(0,a.jsx)("span",{className:"font-medium text-slate-600",children:P((null===(t=eq.find(e=>e.id===eQ))||void 0===t?void 0:t.phoneNumber)||"")})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(y.Z,{className:"h-4 w-4 text-muted-foreground"})}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"No phone number assigned"})]})}),e3?(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Saving..."}):(0,a.jsx)(M.Z,{className:"h-4 w-4 text-muted-foreground flex-shrink-0 transition-transform ".concat(e6?"rotate-180":"")})]}),e6&&(0,a.jsxs)("div",{className:"absolute z-50 mt-1 w-full bg-white border rounded-md shadow-lg py-1 max-h-60 overflow-auto",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>ta(""),className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm hover:bg-slate-50 text-left",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(y.Z,{className:"h-4 w-4 text-muted-foreground"})}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"No phone number"})]}),eq.map(e=>{var t,s;let l=e.agent&&e.agent.id&&e.agent.id!==G.id,n=(null===(t=e.agent)||void 0===t?void 0:t.id)===G.id;return(0,a.jsxs)("button",{type:"button",onClick:()=>ta(e.id),className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm hover:bg-slate-50 text-left ".concat(n?"bg-teal-50":""),children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ".concat(l?"bg-amber-100":"bg-teal-100"),children:(0,a.jsx)(y.Z,{className:"h-4 w-4 ".concat(l?"text-amber-600":"text-teal-600")})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("span",{className:"font-medium block truncate",children:P(e.phoneNumber)}),l&&(0,a.jsxs)("span",{className:"text-xs text-amber-600 block",children:["Currently assigned to: ",null===(s=e.agent)||void 0===s?void 0:s.name]}),n&&(0,a.jsx)("span",{className:"text-xs text-teal-600 block",children:"Currently assigned to this agent"})]})]},e.id)})]})]})}):(0,a.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-md",children:[(0,a.jsx)(Z.Z,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-amber-800",children:"Twilio not configured"}),(0,a.jsx)("p",{className:"text-xs text-amber-700 mt-1",children:"Configure your Twilio credentials in Settings to enable phone number assignment."}),(0,a.jsxs)(r.default,{href:"/dashboard/settings",className:"inline-flex items-center gap-1 mt-2 text-xs text-teal-600 hover:underline",children:[(0,a.jsx)(O.Z,{className:"h-3 w-3"}),"Go to Settings"]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Communication Channel"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:Object.entries(h.sR).map(e=>{let[t,s]=e,l=ez===t;return(0,a.jsxs)("button",{type:"button",className:"p-3 border rounded-lg text-left hover:border-teal-500 transition-colors ".concat(l?"border-teal-500 bg-teal-50":""),onClick:()=>eF(t),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-teal-100",children:z(t)}),(0,a.jsx)("h3",{className:"font-semibold text-xs text-slate-600",children:s.label})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:s.description})]},t)})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Agent Mode"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(h.jt).map(e=>{let[t,s]=e;return(0,a.jsxs)("button",{type:"button",className:"p-3 border rounded-lg text-left hover:border-teal-500 transition-colors ".concat(eo===t?"border-teal-500 bg-teal-50":""),onClick:()=>em(t),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-teal-100",children:L(t)}),(0,a.jsx)("h3",{className:"font-semibold text-xs text-slate-600",children:s.label})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,h.iA)(t,ez)})]},t)})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"callPurpose",className:"text-muted-foreground",children:"Call Purpose"}),(0,a.jsx)(o.I,{id:"callPurpose",value:eP,onChange:e=>eL(e.target.value),placeholder:"e.g., Schedule appointments, Answer support questions"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"voice",className:"text-muted-foreground",children:"Voice"}),(0,a.jsx)(g.$,{value:ed,onChange:ec})]}),("INBOUND"===eo||"HYBRID"===eo)&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"greeting",className:"text-muted-foreground",children:"Inbound Greeting (optional)"}),(0,a.jsx)(o.I,{id:"greeting",value:er,onChange:e=>ei(e.target.value),placeholder:"e.g., Hi, this is ".concat((null===(s=h.Cy.find(e=>e.id===ed))||void 0===s?void 0:s.name)||"your assistant",". How can I help you today?")})]}),("OUTBOUND"===eo||"HYBRID"===eo)&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"outboundGreeting",className:"text-muted-foreground",children:"Outbound Greeting (optional)"}),(0,a.jsx)(o.I,{id:"outboundGreeting",value:ex,onChange:e=>eu(e.target.value),placeholder:"e.g., Hi, this is ".concat((null===(N=h.Cy.find(e=>e.id===ed))||void 0===N?void 0:N.name)||"your assistant"," calling from ").concat((null==eW?void 0:eW.organizationName)||"[company]","...")})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Call Window (optional)"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"From"}),(0,a.jsx)(o.I,{type:"time",value:eh,onChange:e=>eg(e.target.value),placeholder:"Start time",className:"flex-1 [&::-webkit-calendar-picker-indicator]:opacity-100 [&::-webkit-calendar-picker-indicator]:brightness-0 [&::-webkit-calendar-picker-indicator]:saturate-100 [&::-webkit-calendar-picker-indicator]:invert-[.5] [&::-webkit-calendar-picker-indicator]:sepia-[1] [&::-webkit-calendar-picker-indicator]:saturate-[10] [&::-webkit-calendar-picker-indicator]:hue-rotate-[130deg]"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"To"}),(0,a.jsx)(o.I,{type:"time",value:ef,onChange:e=>ep(e.target.value),placeholder:"End time",className:"flex-1 [&::-webkit-calendar-picker-indicator]:opacity-100 [&::-webkit-calendar-picker-indicator]:brightness-0 [&::-webkit-calendar-picker-indicator]:saturate-100 [&::-webkit-calendar-picker-indicator]:invert-[.5] [&::-webkit-calendar-picker-indicator]:sepia-[1] [&::-webkit-calendar-picker-indicator]:saturate-[10] [&::-webkit-calendar-picker-indicator]:hue-rotate-[130deg]"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"systemPrompt",className:"text-muted-foreground",children:"System Prompt"}),(0,a.jsx)("textarea",{id:"systemPrompt",value:el,onChange:e=>en(e.target.value),className:"w-full min-h-[200px] px-3 py-2 border rounded-md bg-background"})]}),((null==ev?void 0:ev.calendars)&&ev.calendars.length>0||(0,h.TR)(ez))&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Tool Access (optional)"}),(null==ev?void 0:ev.calendars)&&ev.calendars.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border cursor-pointer hover:bg-slate-50 transition-colors",children:[(0,a.jsx)("input",{type:"checkbox",checked:ej,onChange:e=>eN(e.target.checked),className:"mt-0.5 h-4 w-4 rounded border-gray-300 accent-teal-600 focus:ring-teal-500"}),(0,a.jsx)(_.Z,{className:"h-4 w-4 text-teal-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"font-medium text-sm text-slate-600",children:"Calendar Tool"})}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Check availability and book appointments"})]})]}),ej&&(0,a.jsxs)("div",{className:"ml-7 pl-4 border-l-2 border-teal-200 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground text-xs",children:"Calendar"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 text-sm border rounded-md bg-white",value:ey,onChange:e=>{ew(e.target.value),eE(""),eO("")},children:[(0,a.jsx)("option",{value:"",children:"Select a calendar"}),ev.calendars.map(e=>(0,a.jsxs)("option",{value:e.id,children:["google"===e.provider?"Google Calendar":"calcom"===e.provider?"Cal.com":"Calendly"," - ",e.email||e.username||"Connected"]},e.id))]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground text-xs",children:"Permissions"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:eC.includes("read_calendar"),onChange:e=>{ek(t=>e.target.checked?[...t,"read_calendar"]:t.filter(e=>"read_calendar"!==e))},className:"h-4 w-4 rounded border-gray-300 accent-teal-600"}),(0,a.jsx)("span",{className:"text-slate-600",children:"Read Calendar"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"(check availability)"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:eC.includes("create_events"),onChange:e=>{ek(t=>e.target.checked?[...t,"create_events"]:t.filter(e=>"create_events"!==e))},className:"h-4 w-4 rounded border-gray-300 accent-teal-600"}),(0,a.jsx)("span",{className:"text-slate-600",children:"Create Events"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"(book appointments)"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:eC.includes("reschedule_events"),onChange:e=>{ek(t=>e.target.checked?[...t,"reschedule_events"]:t.filter(e=>"reschedule_events"!==e))},className:"h-4 w-4 rounded border-gray-300 accent-teal-600"}),(0,a.jsx)("span",{className:"text-slate-600",children:"Reschedule Events"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"(modify bookings)"})]})]})]}),(()=>{var e;let t=null==ev?void 0:null===(e=ev.calendars)||void 0===e?void 0:e.find(e=>e.id===ey);return(null==t?void 0:t.provider)==="google"?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground text-xs",children:"Default Duration"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 text-sm border rounded-md bg-white",value:eM,onChange:e=>e_(parseInt(e.target.value)),children:[(0,a.jsx)("option",{value:15,children:"15 minutes"}),(0,a.jsx)("option",{value:30,children:"30 minutes"}),(0,a.jsx)("option",{value:45,children:"45 minutes"}),(0,a.jsx)("option",{value:60,children:"60 minutes"}),(0,a.jsx)("option",{value:90,children:"90 minutes"})]})]}):eI.length>0?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground text-xs",children:"Default Event Type"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 text-sm border rounded-md bg-white",value:eS,onChange:e=>{let t=eI.find(t=>t.id===e.target.value);eE(e.target.value),eO((null==t?void 0:t.name)||"")},disabled:eA,children:[(0,a.jsx)("option",{value:"",children:"Select event type"}),eA?(0,a.jsx)("option",{children:"Loading..."}):eI.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.duration," min)"]},e.id))]})]}):null})()]})]}),(0,h.TR)(ez)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border cursor-pointer hover:bg-slate-50 transition-colors",children:[(0,a.jsx)("input",{type:"checkbox",checked:eG,onChange:e=>eY(e.target.checked),className:"mt-0.5 h-4 w-4 rounded border-gray-300 accent-teal-600 focus:ring-teal-500"}),(0,a.jsx)(I.Z,{className:"h-4 w-4 text-teal-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"font-medium text-sm text-slate-600",children:"Images"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Send photos, screenshots, and graphics via MMS"})]})]}),(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border cursor-pointer hover:bg-slate-50 transition-colors",children:[(0,a.jsx)("input",{type:"checkbox",checked:eB,onChange:e=>eH(e.target.checked),className:"mt-0.5 h-4 w-4 rounded border-gray-300 accent-teal-600 focus:ring-teal-500"}),(0,a.jsx)(T.Z,{className:"h-4 w-4 text-teal-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"font-medium text-sm text-slate-600",children:"Documents"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Send PDFs, contracts, and forms via MMS"})]})]}),(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border cursor-pointer hover:bg-slate-50 transition-colors",children:[(0,a.jsx)("input",{type:"checkbox",checked:eV,onChange:e=>eU(e.target.checked),className:"mt-0.5 h-4 w-4 rounded border-gray-300 accent-teal-600 focus:ring-teal-500"}),(0,a.jsx)(A.Z,{className:"h-4 w-4 text-teal-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"font-medium text-sm text-slate-600",children:"Videos"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Share video content and tutorials via MMS"})]})]})]})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start gap-6 pb-6 border-b",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:(null===(v=h.Cy.find(e=>e.id===V.voice))||void 0===v?void 0:v.avatar)?(0,a.jsx)(i.default,{src:h.Cy.find(e=>e.id===V.voice).avatar,alt:(null===(b=h.Cy.find(e=>e.id===V.voice))||void 0===b?void 0:b.name)||"Voice",width:96,height:96,className:"w-full h-full object-cover"}):(0,a.jsx)(D.Z,{className:"w-12 h-12 text-slate-400"})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Voice"}),(0,a.jsx)("p",{className:"font-medium text-lg text-slate-600",children:(null===(C=h.Cy.find(e=>e.id===V.voice))||void 0===C?void 0:C.name)||V.voice}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:null===(F=h.Cy.find(e=>e.id===V.voice))||void 0===F?void 0:F.description}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Powered by ElevenLabs and GPT-4o Mini"})]})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Tool Access"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(_.Z,{className:"h-4 w-4 text-teal-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"font-medium text-sm text-slate-600",children:"Calendar"}),V.calendarEnabled&&(null==ev?void 0:ev.connected)?(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-teal-100 text-teal-700",children:"calcom"===ev.provider?"Cal.com":"Calendly"}):(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-slate-100 text-slate-500",children:"Off"})]}),("MESSAGING_ONLY"===V.communicationChannel||"OMNICHANNEL"===V.communicationChannel)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(I.Z,{className:"h-4 w-4 text-teal-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"font-medium text-sm text-slate-600",children:"Images"}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ".concat(V.imageToolEnabled?"bg-teal-100 text-teal-700":"bg-slate-100 text-slate-500"),children:V.imageToolEnabled?"MMS":"Off"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(T.Z,{className:"h-4 w-4 text-teal-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"font-medium text-sm text-slate-600",children:"Documents"}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ".concat(V.documentToolEnabled?"bg-teal-100 text-teal-700":"bg-slate-100 text-slate-500"),children:V.documentToolEnabled?"MMS":"Off"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.Z,{className:"h-4 w-4 text-teal-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"font-medium text-sm text-slate-600",children:"Videos"}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ".concat(V.videoToolEnabled?"bg-teal-100 text-teal-700":"bg-slate-100 text-slate-500"),children:V.videoToolEnabled?"MMS":"Off"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Organization"}),(null==eW?void 0:eW.organizationName)?(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-teal-100",children:(0,a.jsx)(E.Z,{className:"h-3 w-3 text-teal-600"})}),(0,a.jsx)("span",{className:"font-medium text-slate-600",children:eW.organizationName})]})}):(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Not configured"}),(0,a.jsxs)(r.default,{href:"/dashboard/settings?tab=preferences",className:"inline-flex items-center gap-1 text-xs text-teal-600 hover:underline mt-1",children:[(0,a.jsx)(O.Z,{className:"h-3 w-3"}),"Set up in Settings"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Phone Number"}),e0?(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Loading..."}):eJ?(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-teal-100",children:(0,a.jsx)(y.Z,{className:"h-3 w-3 text-teal-600"})}),(0,a.jsx)("span",{className:"font-medium text-slate-600",children:P(eJ.phoneNumber)})]})}):(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No phone number assigned"}),(0,a.jsxs)(r.default,{href:"/dashboard/settings",className:"inline-flex items-center gap-1 text-xs text-teal-600 hover:underline mt-1",children:[(0,a.jsx)(O.Z,{className:"h-3 w-3"}),"Assign in Settings"]})]})]}),V.mode&&h.jt[V.mode]&&(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Mode"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-teal-100",children:L(V.mode)}),(0,a.jsx)("span",{className:"font-medium text-slate-600",children:h.jt[V.mode].label})]})})]}),V.callPurpose&&(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Call Purpose"}),(0,a.jsx)("p",{className:"font-medium text-slate-600 mt-1",children:V.callPurpose})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Created"}),(0,a.jsx)("p",{className:"font-medium text-slate-600",children:new Date(V.createdAt).toLocaleDateString()})]}),("OUTBOUND"===V.mode||"HYBRID"===V.mode)&&V.callWindowStart&&V.callWindowEnd&&(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Call Window"}),(0,a.jsxs)("p",{className:"font-medium text-slate-600",children:[V.callWindowStart," - ",V.callWindowEnd]})]}),V.greeting&&(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Greeting"}),(0,a.jsx)("p",{className:"font-medium text-slate-600",children:V.greeting})]}),("OUTBOUND"===V.mode||"HYBRID"===V.mode)&&V.outboundGreeting&&(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Outbound Greeting"}),(0,a.jsx)("p",{className:"font-medium text-slate-600",children:V.outboundGreeting})]}),(0,a.jsxs)("div",{className:"md:col-span-2 border-t pt-4 mt-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"System Prompt"}),(0,a.jsx)("p",{className:"font-medium text-slate-600 whitespace-pre-wrap bg-muted p-3 rounded-md text-sm mt-1",children:V.systemPrompt})]})]})]})})]}),Q&&V&&(0,a.jsx)(f.P,{agentId:V.id,agentName:V.name,callWindow:V.callWindowStart&&V.callWindowEnd?{start:V.callWindowStart,end:V.callWindowEnd}:void 0,onClose:()=>X(!1),onCallInitiated:e=>{console.log("Call initiated:",e)}}),ee&&V&&(0,a.jsx)(p.n,{agentId:V.id,agentName:V.name,imageToolEnabled:V.imageToolEnabled||!1,documentToolEnabled:V.documentToolEnabled||!1,videoToolEnabled:V.videoToolEnabled||!1,onClose:()=>et(!1),onMessageSent:e=>{console.log("Message sent:",e)}})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4",children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Agent not found"}),(0,a.jsx)(r.default,{href:"/dashboard/agents",children:(0,a.jsxs)(d.z,{variant:"ghost",className:"text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:[(0,a.jsx)(k.Z,{className:"h-4 w-4 mr-2"}),"Back to Agents"]})})]})}},33041:function(e,t,s){"use strict";s.d(t,{m:function(){return x}});var a=s(57437),l=s(2265),n=s(12381),r=s(54887);let i=(0,s(79205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var d=s(32489),c=s(51817);function o(e){let{open:t,onClose:s,onConfirm:o,title:m="Confirm Delete",description:x,itemName:u,confirmText:h="Delete",cancelText:g="Cancel"}=e,[f,p]=(0,l.useState)(!1),[j,N]=(0,l.useState)(!1);(0,l.useEffect)(()=>{N(!0)},[]),(0,l.useEffect)(()=>{t||p(!1)},[t]),(0,l.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&!f&&s()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,s,f]),(0,l.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]);let v=async()=>{p(!0);try{await o(),s()}catch(e){p(!1)}};if(!t||!j)return null;let b=(0,a.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:f?void 0:s}),(0,a.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-md mx-4 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(i,{className:"h-5 w-5 text-red-600"})}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-600",children:m})]}),(0,a.jsx)("button",{onClick:s,disabled:f,className:"p-2 hover:bg-slate-100 rounded-full transition-colors disabled:opacity-50",children:(0,a.jsx)(d.Z,{className:"h-5 w-5 text-slate-500"})})]}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:x||(u?'Are you sure you want to delete "'.concat(u,'"? This action cannot be undone.'):"Are you sure you want to delete this? This action cannot be undone.")})}),(0,a.jsxs)("div",{className:"flex gap-3 p-4 pt-0",children:[(0,a.jsx)(n.z,{type:"button",variant:"outline",onClick:s,className:"flex-1",disabled:f,children:g}),(0,a.jsx)(n.z,{type:"button",variant:"destructive",onClick:v,className:"flex-1",disabled:f,children:f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):h})]})]})]});return(0,r.createPortal)(b,document.body)}var m=s(18930);function x(e){let{onDelete:t,itemName:s,title:r,description:i,confirmText:d,variant:c="icon",size:x,className:u="",disabled:h=!1}=e,[g,f]=(0,l.useState)(!1),p=async()=>{await t()};return"full"===c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.z,{variant:"destructive",size:x,onClick:()=>f(!0),disabled:h,className:u,children:"Delete"}),(0,a.jsx)(o,{open:g,onClose:()=>f(!1),onConfirm:p,title:r,description:i,itemName:s,confirmText:d})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.z,{variant:"ghost",size:x||"icon",onClick:()=>f(!0),disabled:h,className:"text-destructive hover:text-destructive hover:bg-destructive/10 ".concat(u),children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})}),(0,a.jsx)(o,{open:g,onClose:()=>f(!1),onConfirm:p,title:r,description:i,itemName:s,confirmText:d})]})}},69173:function(e,t,s){"use strict";s.d(t,{$:function(){return c}});var a=s(57437),l=s(2265),n=s(33145),r=s(78705),i=s(92369),d=s(40875);function c(e){let{value:t,onChange:s,disabled:c=!1}=e,[o,m]=(0,l.useState)(!1),x=(0,l.useRef)(null),u=r.Cy.find(e=>e.id===t)||r.Cy[0];(0,l.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&m(!1)};return o&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]);let h=e=>{s(e),m(!1)};return(0,a.jsxs)("div",{className:"relative",ref:x,children:[(0,a.jsxs)("button",{type:"button",onClick:()=>!c&&m(!o),disabled:c,className:"w-full flex items-center gap-3 px-3 py-2.5 border rounded-md bg-white hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:u.avatar?(0,a.jsx)(n.default,{src:u.avatar,alt:u.name,width:48,height:48,className:"w-full h-full object-cover"}):(0,a.jsx)(i.Z,{className:"w-6 h-6 text-slate-400"})}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("div",{className:"font-medium text-sm text-slate-600",children:u.name}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:u.description})]}),(0,a.jsx)(d.Z,{className:"w-4 h-4 text-slate-400 transition-transform ".concat(o?"rotate-180":"")})]}),o&&(0,a.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg max-h-80 overflow-y-auto",children:r.Cy.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>h(e.id),className:"w-full flex items-center gap-3 px-3 py-2.5 hover:bg-slate-50 transition-colors ".concat(e.id===t?"bg-primary/5":""),children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:e.avatar?(0,a.jsx)(n.default,{src:e.avatar,alt:e.name,width:48,height:48,className:"w-full h-full object-cover"}):(0,a.jsx)(i.Z,{className:"w-6 h-6 text-slate-400"})}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("div",{className:"font-medium text-sm text-slate-600",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]}),e.id===t&&(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary flex-shrink-0"})]},e.id))})]})}}},function(e){e.O(0,[225,145,648,694,92,452,6,688,971,117,744],function(){return e(e.s=67601)}),_N_E=e.O()}]);