(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{67601:function(e,t,s){Promise.resolve().then(s.bind(s,30922))},22135:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},96362:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},69658:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]])},76980:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]])},83229:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},44743:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},18930:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},76865:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},30922:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Q}});var a=s(57437),l=s(2265),n=s(99376),i=s(27648),r=s(33145),d=s(12381),c=s(79820),o=s(40279),m=s(75060),x=s(71837),u=s(23340),h=s(78705),g=s(69173),f=s(21688),N=s(58006),j=s(57790),p=s(43328),v=s(71866),b=s(17580),w=s(68428),y=s(13041),C=s(53417),E=s(28124),k=s(31047),S=s(75368),O=s(43044),I=s(94766),Z=s(15868),T=s(32660),R=s(82222),M=s(32489),_=s(51817),A=s(83229),P=s(98420),L=s(40875),D=s(98728),z=s(49322),F=s(66337),U=s(53113),H=s(48736),B=s(29374),Y=s(92369);let G=e=>{let t=e.replace(/\D/g,"");return 11===t.length&&t.startsWith("1")?"(".concat(t.slice(1,4),") ").concat(t.slice(4,7),"-").concat(t.slice(7)):e},V=e=>{switch(e){case"INBOUND":return(0,a.jsx)(v.Z,{className:"h-4 w-4 text-teal-600"});case"OUTBOUND":return(0,a.jsx)(b.Z,{className:"h-4 w-4 text-teal-600"});case"HYBRID":return(0,a.jsx)(w.Z,{className:"h-4 w-4 text-teal-600"});default:return null}},W=e=>{let t="h-4 w-4 text-teal-600";switch(e){case"VOICE_ONLY":return(0,a.jsx)(y.Z,{className:t});case"MESSAGING_ONLY":return(0,a.jsx)(C.Z,{className:t});case"OMNICHANNEL":return(0,a.jsx)(E.Z,{className:t});default:return null}},q=e=>{let t="h-3 w-3 text-teal-600";switch(e){case"SCHEDULE_APPOINTMENTS":return(0,a.jsx)(k.Z,{className:t});case"ANSWER_SUPPORT":return(0,a.jsx)(S.Z,{className:t});case"COLLECT_INFO":return(0,a.jsx)(O.Z,{className:t});case"SEND_REMINDERS":return(0,a.jsx)(I.Z,{className:t});case"GENERAL_INQUIRIES":return(0,a.jsx)(C.Z,{className:t});case"CUSTOM":return(0,a.jsx)(Z.Z,{className:t});default:return null}},$=e=>{if(!e)return"CUSTOM";for(let[t,s]of Object.entries(h.mN))if(s.value&&e.trim()===s.value.trim())return t;return"CUSTOM"};function Q(){var e,t,s,v,b,w,E,S;let O=(0,n.useParams)(),I=(0,n.useRouter)(),Q=(0,n.useSearchParams)(),{toast:J}=(0,u.pm)(),[K,X]=(0,l.useState)(null),[ee,et]=(0,l.useState)(!0),[es,ea]=(0,l.useState)(!1),[el,en]=(0,l.useState)("true"===Q.get("edit")),[ei,er]=(0,l.useState)(!1),[ed,ec]=(0,l.useState)(!1),[eo,em]=(0,l.useState)(""),[ex,eu]=(0,l.useState)(""),[eh,eg]=(0,l.useState)(""),[ef,eN]=(0,l.useState)(""),[ej,ep]=(0,l.useState)("INBOUND"),[ev,eb]=(0,l.useState)(""),[ew,ey]=(0,l.useState)(""),[eC,eE]=(0,l.useState)(""),[ek,eS]=(0,l.useState)(!1),[eO,eI]=(0,l.useState)(null),[eZ,eT]=(0,l.useState)(""),[eR,eM]=(0,l.useState)(["read_calendar","create_events","reschedule_events"]),[e_,eA]=(0,l.useState)(""),[eP,eL]=(0,l.useState)(""),[eD,ez]=(0,l.useState)(30),[eF,eU]=(0,l.useState)([]),[eH,eB]=(0,l.useState)(!1),[eY,eG]=(0,l.useState)(""),[eV,eW]=(0,l.useState)("CUSTOM"),[eq,e$]=(0,l.useState)("VOICE_ONLY"),[eQ,eJ]=(0,l.useState)(!1),[eK,eX]=(0,l.useState)(!1),[e0,e1]=(0,l.useState)(!1),[e2,e4]=(0,l.useState)(null),[e6,e5]=(0,l.useState)([]),[e3,e7]=(0,l.useState)(null),[e8,e9]=(0,l.useState)(""),[te,tt]=(0,l.useState)(!0),[ts,ta]=(0,l.useState)("FREE");(0,l.useEffect)(()=>{x.h.getBillingStatus().then(e=>{e.data&&ta(e.data.plan)}).catch(e=>console.error("Failed to load plan",e))},[]);let[tl,tn]=(0,l.useState)(!1),[ti,tr]=(0,l.useState)(!1),[td,tc]=(0,l.useState)(!1),to=(0,l.useRef)(null),[tm,tx]=(0,l.useState)(!1),tu=(0,l.useRef)(null);(0,l.useEffect)(()=>{tp(),tg(),tN(),th()},[O.id]);let th=async()=>{try{let e=await x.h.getBusinessProfile();e4(e.data||null)}catch(e){}};(0,l.useEffect)(()=>{let e=e=>{to.current&&!to.current.contains(e.target)&&tr(!1),tu.current&&!tu.current.contains(e.target)&&tx(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let tg=async()=>{try{let e=await x.h.getCalendarStatus();eI(e.data||null)}catch(e){console.error("Failed to fetch calendar status:",e)}},tf=async e=>{if(!e||!(null==eO?void 0:eO.calendars))return;let t=eO.calendars.find(t=>t.id===e);if(t){eB(!0);try{let e=[];"calcom"===t.provider?e=((await x.h.getCalcomEventTypes()).data||[]).map(e=>({id:String(e.id),name:e.title,duration:e.duration})):"calendly"===t.provider&&(e=((await x.h.getCalendarEventTypes()).data||[]).map(e=>({id:e.uri,name:e.name,duration:e.duration}))),eU(e)}catch(e){console.error("Failed to fetch event types:",e)}finally{eB(!1)}}};(0,l.useEffect)(()=>{eZ&&ek&&(null==eO?void 0:eO.calendars)&&tf(eZ)},[eZ,ek,null==eO?void 0:eO.calendars]);let tN=async()=>{tt(!0);try{var e,t;let s=await x.h.getTwilioSettings();if(tn((null===(e=s.data)||void 0===e?void 0:e.configured)||!1),null===(t=s.data)||void 0===t?void 0:t.configured){let e=(await x.h.getPhoneNumbers()).data||[];e5(e);let t=e.find(e=>{var t;return(null===(t=e.agent)||void 0===t?void 0:t.id)===O.id});e7(t||null),e9((null==t?void 0:t.id)||"")}}catch(e){}finally{tt(!1)}},tj=async e=>{tc(!0),tr(!1);try{e3&&e3.id!==e&&await x.h.updatePhoneNumber(e3.id,{agentId:null}),e&&await x.h.updatePhoneNumber(e,{agentId:O.id}),e9(e),await tN(),J({title:e?"Phone number assigned":"Phone number unassigned",description:e?"The phone number has been assigned to this agent.":"The phone number has been removed from this agent."})}catch(e){J({title:"Error",description:e instanceof x.M?e.message:"Failed to update phone number",variant:"destructive"}),e9((null==e3?void 0:e3.id)||"")}finally{tc(!1)}},tp=async()=>{try{let e=await x.h.getAgent(O.id);if(e.data){X(e.data),em(e.data.name),eu(e.data.systemPrompt),eg(e.data.greeting||""),eN(e.data.voice||h.Cy[0].id),ep(e.data.mode||"INBOUND"),eb(e.data.outboundGreeting||""),ey(e.data.callWindowStart||""),eE(e.data.callWindowEnd||""),eS(e.data.calendarEnabled||!1),eT(e.data.calendarIntegrationId||""),eM(e.data.calendarScopes||["read_calendar","create_events","reschedule_events"]),eA(e.data.defaultEventTypeId||""),eL(e.data.defaultEventTypeName||""),ez(e.data.defaultEventDuration||30);let t=e.data.callPurpose||"";eG(t),eW($(t)),e$(e.data.communicationChannel||"VOICE_ONLY"),eJ(e.data.imageToolEnabled||!1),eX(e.data.documentToolEnabled||!1),e1(e.data.videoToolEnabled||!1)}}catch(e){J({title:"Error",description:e instanceof x.M?e.message:"Failed to load agent",variant:"destructive"}),I.push("/dashboard/agents")}finally{et(!1)}},tv=async()=>{ea(!0);try{var e;await x.h.updateAgent(O.id,{name:eo,systemPrompt:ex,greeting:eh,voiceId:ef,mode:ej,outboundGreeting:ev||void 0,callWindowStart:ew||void 0,callWindowEnd:eC||void 0,calendarEnabled:ek,calendarIntegrationId:ek&&eZ||void 0,calendarScopes:ek?eR:void 0,defaultEventTypeId:ek&&e_||void 0,defaultEventTypeName:ek&&eP||void 0,defaultEventDuration:ek?eD:void 0,personaName:(null===(e=h.Cy.find(e=>e.id===ef))||void 0===e?void 0:e.name)||void 0,callPurpose:eY||void 0,communicationChannel:eq,imageToolEnabled:eQ,documentToolEnabled:eK,videoToolEnabled:e0}),J({title:"Agent updated",description:"Your changes have been saved."}),en(!1),tp()}catch(e){J({title:"Error",description:e instanceof x.M?e.message:"Failed to update agent",variant:"destructive"})}finally{ea(!1)}},tb=async()=>{try{await x.h.deleteAgent(O.id),J({title:"Agent deleted",description:"The agent has been removed."}),I.push("/dashboard/agents")}catch(e){throw J({title:"Error",description:e instanceof x.M?e.message:"Failed to delete agent",variant:"destructive"}),e}};return ee?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"text-muted-foreground",children:"Loading agent..."})}):K?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4 min-w-0 flex-1",children:[(0,a.jsxs)(i.default,{href:"/dashboard/agents",className:"flex-shrink-0",children:[(0,a.jsx)(d.z,{variant:"ghost",size:"icon",className:"sm:hidden text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:(0,a.jsx)(T.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(d.z,{variant:"ghost",size:"sm",className:"hidden sm:flex text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:[(0,a.jsx)(T.Z,{className:"h-4 w-4 mr-2"}),"Back"]})]}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(R.Z,{className:"h-6 w-6 text-slate-600 flex-shrink-0"}),(0,a.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-slate-600 truncate max-w-[120px] sm:max-w-none",title:K.name,children:K.name})]}),(0,a.jsxs)("p",{className:"text-muted-foreground text-xs mt-1",children:[(null===(e=h.jt[K.mode])||void 0===e?void 0:e.label)||K.mode," agent"]})]})]}),(0,a.jsx)("div",{className:"flex gap-2 flex-shrink-0 lg:hidden",children:el?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.z,{variant:"outline",size:"icon",onClick:()=>en(!1),className:"sm:hidden text-teal-600 border-teal-600 hover:bg-teal-50",children:(0,a.jsx)(M.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(d.z,{variant:"outline",onClick:()=>en(!1),className:"hidden sm:flex text-teal-600 border-teal-600 hover:bg-teal-50",children:[(0,a.jsx)(M.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,a.jsx)(d.z,{size:"icon",onClick:tv,disabled:es,className:"sm:hidden bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:es?(0,a.jsx)(_.Z,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(A.Z,{className:"h-4 w-4"})}),(0,a.jsx)(d.z,{onClick:tv,disabled:es,className:"hidden sm:flex bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:es?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Z,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.z,{variant:"outline",size:"icon",onClick:()=>en(!0),className:"sm:hidden text-teal-600 border-teal-600 hover:bg-teal-50",children:(0,a.jsx)(Z.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(d.z,{variant:"outline",onClick:()=>en(!0),className:"hidden sm:flex text-teal-600 border-teal-600 hover:bg-teal-50",children:[(0,a.jsx)(Z.Z,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,a.jsx)(j.m,{variant:"full",onDelete:tb,itemName:K.name,title:"Delete Agent"})]})}),(0,a.jsxs)("div",{className:"hidden lg:flex items-stretch gap-3 flex-1 mx-6",children:["VOICE_ONLY"===K.communicationChannel?(0,a.jsxs)("div",{className:"flex flex-col justify-center px-4 py-2 bg-white rounded-lg border flex-1",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Total Calls"}),(0,a.jsx)("span",{className:"text-lg font-semibold text-slate-600",children:K.totalCalls||"—"})]}):"MESSAGING_ONLY"===K.communicationChannel?(0,a.jsxs)("div",{className:"flex flex-col justify-center px-4 py-2 bg-white rounded-lg border flex-1",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Total Messages"}),(0,a.jsx)("span",{className:"text-lg font-semibold text-slate-600",children:K.totalMessages||"—"})]}):(0,a.jsxs)("div",{className:"flex flex-col justify-center px-4 py-2 bg-white rounded-lg border flex-1",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Total Communications"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg font-semibold text-slate-600",children:(K.totalCalls||0)+(K.totalMessages||0)||"—"}),(K.totalCalls||0)+(K.totalMessages||0)>0&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",K.totalCalls||0," calls, ",K.totalMessages||0," msgs)"]})]})]}),("VOICE_ONLY"===K.communicationChannel||"OMNICHANNEL"===K.communicationChannel)&&(0,a.jsxs)("div",{className:"flex flex-col justify-center px-4 py-2 bg-white rounded-lg border flex-1",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Avg Duration"}),(0,a.jsx)("span",{className:"text-lg font-semibold text-slate-600",children:K.avgDuration?"".concat(Math.round(K.avgDuration),"s"):"—"})]})]}),(0,a.jsx)("div",{className:"hidden lg:flex gap-2 flex-shrink-0",children:el?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d.z,{variant:"outline",onClick:()=>en(!1),className:"text-teal-600 border-teal-600 hover:bg-teal-50",children:[(0,a.jsx)(M.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,a.jsx)(d.z,{onClick:tv,disabled:es,className:"bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:es?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Z,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]}):(0,a.jsxs)(a.Fragment,{children:[("OUTBOUND"===K.mode||"HYBRID"===K.mode)&&(!K.communicationChannel||"VOICE_ONLY"===K.communicationChannel||"OMNICHANNEL"===K.communicationChannel)&&(0,a.jsxs)(d.z,{onClick:()=>er(!0),className:"bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Make Call"]}),("OUTBOUND"===K.mode||"HYBRID"===K.mode)&&("MESSAGING_ONLY"===K.communicationChannel||"OMNICHANNEL"===K.communicationChannel)&&(0,a.jsxs)(d.z,{onClick:()=>ec(!0),className:"bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:[(0,a.jsx)(C.Z,{className:"h-4 w-4 mr-2"}),"Send Message"]}),(0,a.jsxs)(d.z,{variant:"outline",onClick:()=>en(!0),className:"text-teal-600 border-teal-600 hover:bg-teal-50",children:[(0,a.jsx)(Z.Z,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,a.jsx)(j.m,{variant:"full",onDelete:tb,itemName:K.name,title:"Delete Agent"})]})})]}),!el&&(0,a.jsxs)("div",{className:"flex gap-2 lg:hidden",children:[("OUTBOUND"===K.mode||"HYBRID"===K.mode)&&(!K.communicationChannel||"VOICE_ONLY"===K.communicationChannel||"OMNICHANNEL"===K.communicationChannel)&&(0,a.jsxs)(d.z,{onClick:()=>er(!0),className:"flex-1 bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Make Call"]}),("OUTBOUND"===K.mode||"HYBRID"===K.mode)&&("MESSAGING_ONLY"===K.communicationChannel||"OMNICHANNEL"===K.communicationChannel)&&(0,a.jsxs)(d.z,{onClick:()=>ec(!0),className:"flex-1 bg-gradient-to-b from-[#0fa693] to-teal-600 hover:from-[#0e9585] hover:to-teal-700",children:[(0,a.jsx)(C.Z,{className:"h-4 w-4 mr-2"}),"Send Message"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 lg:hidden",children:["VOICE_ONLY"===K.communicationChannel?(0,a.jsx)(c.Zb,{children:(0,a.jsxs)(c.Ol,{className:"p-3",children:[(0,a.jsx)(c.SZ,{className:"text-xs",children:"Total Calls"}),(0,a.jsx)(c.ll,{className:"text-xl text-slate-600",children:K.totalCalls||"—"})]})}):"MESSAGING_ONLY"===K.communicationChannel?(0,a.jsx)(c.Zb,{children:(0,a.jsxs)(c.Ol,{className:"p-3",children:[(0,a.jsx)(c.SZ,{className:"text-xs",children:"Total Messages"}),(0,a.jsx)(c.ll,{className:"text-xl text-slate-600",children:K.totalMessages||"—"})]})}):(0,a.jsx)(c.Zb,{children:(0,a.jsxs)(c.Ol,{className:"p-3",children:[(0,a.jsx)(c.SZ,{className:"text-xs",children:"Communications"}),(0,a.jsx)(c.ll,{className:"text-xl text-slate-600",children:(K.totalCalls||0)+(K.totalMessages||0)||"—"}),(K.totalCalls||0)+(K.totalMessages||0)>0&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[K.totalCalls||0," calls \xb7 ",K.totalMessages||0," msgs"]})]})}),("VOICE_ONLY"===K.communicationChannel||"OMNICHANNEL"===K.communicationChannel)&&(0,a.jsx)(c.Zb,{children:(0,a.jsxs)(c.Ol,{className:"p-3",children:[(0,a.jsx)(c.SZ,{className:"text-xs",children:"Avg Duration"}),(0,a.jsx)(c.ll,{className:"text-xl text-slate-600",children:K.avgDuration?"".concat(Math.round(K.avgDuration),"s"):"—"})]})})]})]}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsx)(c.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.ll,{className:"text-slate-600",children:"Agent Configuration"}),(0,a.jsx)(c.SZ,{children:"Voice and AI model settings"})]}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat(K.isActive?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"),children:K.isActive?"Active":"Inactive"})]})}),(0,a.jsx)(c.aY,{className:"space-y-6",children:el?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"name",className:"text-muted-foreground",children:"Agent Name *"}),(0,a.jsx)(o.I,{id:"name",value:eo,onChange:e=>em(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Organization *"}),(null==e2?void 0:e2.organizationName)?(0,a.jsxs)("div",{className:"relative",ref:tu,children:[(0,a.jsxs)("button",{type:"button",onClick:()=>tx(!tm),className:"flex items-center gap-3 px-3 py-2.5 text-sm border rounded-md w-full justify-between transition-colors border-teal-500 bg-teal-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2.5 min-w-0",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-teal-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(P.Z,{className:"h-4 w-4 text-teal-600"})}),(0,a.jsx)("span",{className:"font-medium text-slate-600",children:e2.organizationName})]}),(0,a.jsx)(L.Z,{className:"h-4 w-4 text-muted-foreground flex-shrink-0 transition-transform ".concat(tm?"rotate-180":"")})]}),tm&&(0,a.jsx)("div",{className:"absolute z-50 mt-1 w-full bg-white border rounded-md shadow-lg py-1",children:(0,a.jsxs)("div",{className:"px-3 py-2 text-sm text-slate-600",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-teal-600"}),(0,a.jsx)("span",{className:"font-medium",children:e2.organizationName})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"From Organization Profile"}),(0,a.jsxs)(i.default,{href:"/dashboard/settings?tab=preferences",className:"inline-flex items-center gap-1 mt-2 text-xs text-teal-600 hover:underline",onClick:()=>tx(!1),children:[(0,a.jsx)(D.Z,{className:"h-3 w-3"}),"Update in Settings"]})]})})]}):(0,a.jsx)(i.default,{href:"/dashboard/settings?tab=preferences",className:"block",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 px-3 py-2.5 text-sm border rounded-md w-full border-amber-300 bg-amber-50 hover:border-amber-400 transition-colors",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(z.Z,{className:"h-4 w-4 text-amber-600"})}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("span",{className:"font-medium text-amber-800",children:"Not configured"}),(0,a.jsx)("p",{className:"text-xs text-amber-700 mt-0.5",children:"Click to set up your organization profile in Settings"})]})]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Phone Number *"}),te?(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading phone numbers..."}):tl?0===e6.length?(0,a.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-slate-100 border border-slate-200 rounded-md",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 text-slate-500 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"No phone numbers available"}),(0,a.jsx)("p",{className:"text-xs text-slate-600 mt-1",children:"Import phone numbers from your Twilio account to assign to this agent."}),(0,a.jsxs)(i.default,{href:"/dashboard/settings",className:"inline-flex items-center gap-1 mt-2 text-xs text-teal-600 hover:underline",children:[(0,a.jsx)(D.Z,{className:"h-3 w-3"}),"Manage Phone Numbers"]})]})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"relative",ref:to,children:[(0,a.jsxs)("button",{type:"button",onClick:()=>tr(!ti),disabled:td,className:"flex items-center gap-3 px-3 py-2.5 text-sm border rounded-md w-full justify-between transition-colors disabled:opacity-50 ".concat(e8?"border-teal-500 bg-teal-50":"bg-white hover:bg-slate-50"),children:[(0,a.jsx)("div",{className:"flex items-center gap-2.5 min-w-0",children:e8?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-teal-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(y.Z,{className:"h-4 w-4 text-teal-600"})}),(0,a.jsx)("span",{className:"font-medium text-slate-600",children:G((null===(t=e6.find(e=>e.id===e8))||void 0===t?void 0:t.phoneNumber)||"")})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(y.Z,{className:"h-4 w-4 text-muted-foreground"})}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"No phone number assigned"})]})}),td?(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Saving..."}):(0,a.jsx)(L.Z,{className:"h-4 w-4 text-muted-foreground flex-shrink-0 transition-transform ".concat(ti?"rotate-180":"")})]}),ti&&(0,a.jsxs)("div",{className:"absolute z-50 mt-1 w-full bg-white border rounded-md shadow-lg py-1 max-h-60 overflow-auto",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>tj(""),className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm hover:bg-slate-50 text-left",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(y.Z,{className:"h-4 w-4 text-muted-foreground"})}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"No phone number"})]}),e6.map(e=>{var t,s;let l=e.agent&&e.agent.id&&e.agent.id!==O.id,n=(null===(t=e.agent)||void 0===t?void 0:t.id)===O.id;return(0,a.jsxs)("button",{type:"button",onClick:()=>tj(e.id),className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm hover:bg-slate-50 text-left ".concat(n?"bg-teal-50":""),children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ".concat(l?"bg-amber-100":"bg-teal-100"),children:(0,a.jsx)(y.Z,{className:"h-4 w-4 ".concat(l?"text-amber-600":"text-teal-600")})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("span",{className:"font-medium block truncate",children:G(e.phoneNumber)}),l&&(0,a.jsxs)("span",{className:"text-xs text-amber-600 block",children:["Currently assigned to: ",null===(s=e.agent)||void 0===s?void 0:s.name]}),n&&(0,a.jsx)("span",{className:"text-xs text-teal-600 block",children:"Currently assigned to this agent"})]})]},e.id)}),(0,a.jsx)("div",{className:"border-t mt-1 pt-1",children:(0,a.jsxs)(i.default,{href:"/dashboard/settings",className:"flex items-center gap-2 px-3 py-2 text-sm text-slate-600 hover:bg-slate-50",onClick:()=>tr(!1),children:[(0,a.jsx)(D.Z,{className:"h-4 w-4 text-teal-600"}),(0,a.jsx)("span",{className:"text-xs text-teal-600 hover:underline",children:"Manage Phone Numbers"})]})})]})]})}):(0,a.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-md",children:[(0,a.jsx)(z.Z,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-amber-800",children:"Twilio not configured"}),(0,a.jsx)("p",{className:"text-xs text-amber-700 mt-1",children:"Configure your Twilio credentials in Settings to enable phone number assignment."}),(0,a.jsxs)(i.default,{href:"/dashboard/settings",className:"inline-flex items-center gap-1 mt-2 text-xs text-teal-600 hover:underline",children:[(0,a.jsx)(D.Z,{className:"h-3 w-3"}),"Go to Settings"]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Communication Channel *"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:Object.entries(h.sR).map(e=>{let[t,s]=e,l=eq===t,n="OMNICHANNEL"===t&&!(0,p.y3)(ts,"HYBRID_MODE");return(0,a.jsxs)("button",{type:"button",disabled:n,className:"relative p-3 border rounded-lg text-left transition-colors ".concat(l?"border-teal-500 bg-teal-50":n?"opacity-60 cursor-not-allowed bg-slate-50 border-slate-200":"hover:border-teal-500"),onClick:()=>{n?J({title:"Upgrade Required",description:"Omnichannel is available on Professional plans and above.",variant:"destructive"}):e$(t)},children:[n&&(0,a.jsx)("div",{className:"absolute top-2 right-2",children:(0,a.jsx)(F.Z,{className:"h-3 w-3 text-slate-400"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"w-5 h-5 rounded-full flex items-center justify-center ".concat(n?"bg-slate-200":"bg-teal-100"),children:W(t)}),(0,a.jsx)("h3",{className:"font-semibold text-xs ".concat(n?"text-slate-500":"text-slate-600"),children:s.label})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:s.description})]},t)})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Agent Mode *"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:Object.entries(h.jt).map(e=>{let[t,s]=e,l="HYBRID"===t&&!(0,p.y3)(ts,"HYBRID_MODE");return(0,a.jsxs)("button",{type:"button",disabled:l,className:"relative p-3 border rounded-lg text-left transition-colors ".concat(ej===t?"border-teal-500 bg-teal-50":l?"opacity-60 cursor-not-allowed bg-slate-50 border-slate-200":"hover:border-teal-500"),onClick:()=>{l?J({title:"Upgrade Required",description:"Hybrid mode is available on Professional plans and above.",variant:"destructive"}):ep(t)},children:[l&&(0,a.jsx)("div",{className:"absolute top-2 right-2",children:(0,a.jsx)(F.Z,{className:"h-3 w-3 text-slate-400"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"w-5 h-5 rounded-full flex items-center justify-center ".concat(l?"bg-slate-200":"bg-teal-100"),children:V(t)}),(0,a.jsx)("h3",{className:"font-semibold text-xs ".concat(l?"text-slate-500":"text-slate-600"),children:s.label})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,h.iA)(t,eq)})]},t)})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Call Purpose *"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.entries(h.mN).map(e=>{let[t,s]=e,l=eV===t;return(0,a.jsxs)("button",{type:"button",onClick:()=>{let e="CUSTOM"===t?"":s.value;eW(t),eG(e)},className:"p-3 border rounded-lg text-left hover:border-teal-400 transition-colors ".concat(l?"border-teal-500 bg-teal-50":""),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"w-5 h-5 rounded-full flex items-center justify-center bg-teal-100",children:q(t)}),(0,a.jsx)("h3",{className:"font-semibold text-xs text-slate-600",children:s.label})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:s.description})]},t)})}),"CUSTOM"===eV&&(0,a.jsx)(o.I,{id:"callPurpose",placeholder:"Enter your custom call purpose...",value:eY,onChange:e=>eG(e.target.value)})]}),(0,h.Vt)(eq)&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"voice",className:"text-muted-foreground",children:"Voice *"}),(0,a.jsx)(g.$,{value:ef,onChange:eN,userPlan:ts})]}),("INBOUND"===ej||"HYBRID"===ej)&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"greeting",className:"text-muted-foreground",children:"Inbound Greeting (optional)"}),(0,a.jsx)(o.I,{id:"greeting",value:eh,onChange:e=>eg(e.target.value),placeholder:"e.g., Hi, this is ".concat((null===(s=h.Cy.find(e=>e.id===ef))||void 0===s?void 0:s.name)||"your assistant",". How can I help you today?")})]}),("OUTBOUND"===ej||"HYBRID"===ej)&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"outboundGreeting",className:"text-muted-foreground",children:"Outbound Greeting (optional)"}),(0,a.jsx)(o.I,{id:"outboundGreeting",value:ev,onChange:e=>eb(e.target.value),placeholder:"e.g., Hi, this is ".concat((null===(v=h.Cy.find(e=>e.id===ef))||void 0===v?void 0:v.name)||"your assistant"," calling from ").concat((null==e2?void 0:e2.organizationName)||"[company]","...")})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Call Window (optional)"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"From"}),(0,a.jsx)(o.I,{type:"time",value:ew,onChange:e=>ey(e.target.value),placeholder:"Start time",className:"flex-1 [&::-webkit-calendar-picker-indicator]:opacity-100 [&::-webkit-calendar-picker-indicator]:brightness-0 [&::-webkit-calendar-picker-indicator]:saturate-100 [&::-webkit-calendar-picker-indicator]:invert-[.5] [&::-webkit-calendar-picker-indicator]:sepia-[1] [&::-webkit-calendar-picker-indicator]:saturate-[10] [&::-webkit-calendar-picker-indicator]:hue-rotate-[130deg]"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"To"}),(0,a.jsx)(o.I,{type:"time",value:eC,onChange:e=>eE(e.target.value),placeholder:"End time",className:"flex-1 [&::-webkit-calendar-picker-indicator]:opacity-100 [&::-webkit-calendar-picker-indicator]:brightness-0 [&::-webkit-calendar-picker-indicator]:saturate-100 [&::-webkit-calendar-picker-indicator]:invert-[.5] [&::-webkit-calendar-picker-indicator]:sepia-[1] [&::-webkit-calendar-picker-indicator]:saturate-[10] [&::-webkit-calendar-picker-indicator]:hue-rotate-[130deg]"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"systemPrompt",className:"text-muted-foreground",children:"System Prompt *"}),(0,a.jsx)("textarea",{id:"systemPrompt",value:ex,onChange:e=>eu(e.target.value),className:"w-full min-h-[200px] px-3 py-2 border rounded-md bg-background"})]}),((null==eO?void 0:eO.calendars)&&eO.calendars.length>0||(0,h.TR)(eq))&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Tool Access (optional)"}),(null==eO?void 0:eO.calendars)&&eO.calendars.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border cursor-pointer hover:bg-slate-50 transition-colors",children:[(0,a.jsx)("input",{type:"checkbox",checked:ek,onChange:e=>eS(e.target.checked),className:"mt-0.5 h-4 w-4 rounded border-gray-300 accent-teal-600 focus:ring-teal-500"}),(0,a.jsx)(k.Z,{className:"h-4 w-4 text-teal-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"font-medium text-sm text-slate-600",children:"Calendar Tool"})}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Check availability and book appointments"})]})]}),ek&&(0,a.jsxs)("div",{className:"ml-7 pl-4 border-l-2 border-teal-200 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground text-xs",children:"Calendar"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 text-sm border rounded-md bg-white",value:eZ,onChange:e=>{eT(e.target.value),eA(""),eL("")},children:[(0,a.jsx)("option",{value:"",children:"Select a calendar"}),eO.calendars.map(e=>(0,a.jsxs)("option",{value:e.id,children:["google"===e.provider?"Google Calendar":"calcom"===e.provider?"Cal.com":"Calendly"," - ",e.email||e.username||"Connected"]},e.id))]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground text-xs",children:"Permissions"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:eR.includes("read_calendar"),onChange:e=>{eM(t=>e.target.checked?[...t,"read_calendar"]:t.filter(e=>"read_calendar"!==e))},className:"h-4 w-4 rounded border-gray-300 accent-teal-600"}),(0,a.jsx)("span",{className:"text-slate-600",children:"Read Calendar"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"(check availability)"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:eR.includes("create_events"),onChange:e=>{eM(t=>e.target.checked?[...t,"create_events"]:t.filter(e=>"create_events"!==e))},className:"h-4 w-4 rounded border-gray-300 accent-teal-600"}),(0,a.jsx)("span",{className:"text-slate-600",children:"Create Events"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"(book appointments)"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:eR.includes("reschedule_events"),onChange:e=>{eM(t=>e.target.checked?[...t,"reschedule_events"]:t.filter(e=>"reschedule_events"!==e))},className:"h-4 w-4 rounded border-gray-300 accent-teal-600"}),(0,a.jsx)("span",{className:"text-slate-600",children:"Reschedule Events"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"(modify bookings)"})]})]})]}),(()=>{var e;let t=null==eO?void 0:null===(e=eO.calendars)||void 0===e?void 0:e.find(e=>e.id===eZ);return(null==t?void 0:t.provider)==="google"?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground text-xs",children:"Default Duration"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 text-sm border rounded-md bg-white",value:eD,onChange:e=>ez(parseInt(e.target.value)),children:[(0,a.jsx)("option",{value:15,children:"15 minutes"}),(0,a.jsx)("option",{value:30,children:"30 minutes"}),(0,a.jsx)("option",{value:45,children:"45 minutes"}),(0,a.jsx)("option",{value:60,children:"60 minutes"}),(0,a.jsx)("option",{value:90,children:"90 minutes"})]})]}):eF.length>0?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground text-xs",children:"Default Event Type"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 text-sm border rounded-md bg-white",value:e_,onChange:e=>{let t=eF.find(t=>t.id===e.target.value);eA(e.target.value),eL((null==t?void 0:t.name)||"")},disabled:eH,children:[(0,a.jsx)("option",{value:"",children:"Select event type"}),eH?(0,a.jsx)("option",{children:"Loading..."}):eF.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.duration," min)"]},e.id))]})]}):null})()]})]}),(0,h.TR)(eq)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border cursor-pointer hover:bg-slate-50 transition-colors",children:[(0,a.jsx)("input",{type:"checkbox",checked:eQ,onChange:e=>eJ(e.target.checked),className:"mt-0.5 h-4 w-4 rounded border-gray-300 accent-teal-600 focus:ring-teal-500"}),(0,a.jsx)(U.Z,{className:"h-4 w-4 text-teal-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"font-medium text-sm text-slate-600",children:"Images"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Send photos, screenshots, and graphics via MMS"})]})]}),(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border cursor-pointer hover:bg-slate-50 transition-colors",children:[(0,a.jsx)("input",{type:"checkbox",checked:eK,onChange:e=>eX(e.target.checked),className:"mt-0.5 h-4 w-4 rounded border-gray-300 accent-teal-600 focus:ring-teal-500"}),(0,a.jsx)(H.Z,{className:"h-4 w-4 text-teal-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"font-medium text-sm text-slate-600",children:"Documents"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Send PDFs, contracts, and forms via MMS"})]})]}),(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border cursor-pointer hover:bg-slate-50 transition-colors",children:[(0,a.jsx)("input",{type:"checkbox",checked:e0,onChange:e=>e1(e.target.checked),className:"mt-0.5 h-4 w-4 rounded border-gray-300 accent-teal-600 focus:ring-teal-500"}),(0,a.jsx)(B.Z,{className:"h-4 w-4 text-teal-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"font-medium text-sm text-slate-600",children:"Videos"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Share video content and tutorials via MMS"})]})]})]})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start gap-6 pb-6 border-b",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:(null===(b=h.Cy.find(e=>e.id===K.voice))||void 0===b?void 0:b.avatar)?(0,a.jsx)(r.default,{src:h.Cy.find(e=>e.id===K.voice).avatar,alt:(null===(w=h.Cy.find(e=>e.id===K.voice))||void 0===w?void 0:w.name)||"Voice",width:96,height:96,className:"w-full h-full object-cover"}):(0,a.jsx)(Y.Z,{className:"w-12 h-12 text-slate-400"})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Voice"}),(0,a.jsx)("p",{className:"font-medium text-lg text-slate-600",children:(null===(E=h.Cy.find(e=>e.id===K.voice))||void 0===E?void 0:E.name)||K.voice}),(0,a.jsx)("p",{className:"hidden sm:block text-sm text-muted-foreground",children:null===(S=h.Cy.find(e=>e.id===K.voice))||void 0===S?void 0:S.description}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Powered by ElevenLabs and GPT-4o Mini"})]})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Tool Access"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.Z,{className:"h-4 w-4 text-teal-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"hidden sm:inline font-medium text-sm text-slate-600",children:"Calendar"}),K.calendarEnabled&&(null==eO?void 0:eO.connected)?(0,a.jsx)("span",{className:"hidden sm:inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-teal-100 text-teal-700",children:"calcom"===eO.provider?"Cal.com":"Calendly"}):(0,a.jsx)("span",{className:"hidden sm:inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-slate-100 text-slate-500",children:"Off"})]}),("MESSAGING_ONLY"===K.communicationChannel||"OMNICHANNEL"===K.communicationChannel)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(U.Z,{className:"h-4 w-4 text-teal-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"hidden sm:inline font-medium text-sm text-slate-600",children:"Images"}),(0,a.jsx)("span",{className:"hidden sm:inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ".concat(K.imageToolEnabled?"bg-teal-100 text-teal-700":"bg-slate-100 text-slate-500"),children:K.imageToolEnabled?"MMS":"Off"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(H.Z,{className:"h-4 w-4 text-teal-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"hidden sm:inline font-medium text-sm text-slate-600",children:"Documents"}),(0,a.jsx)("span",{className:"hidden sm:inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ".concat(K.documentToolEnabled?"bg-teal-100 text-teal-700":"bg-slate-100 text-slate-500"),children:K.documentToolEnabled?"MMS":"Off"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(B.Z,{className:"h-4 w-4 text-teal-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"hidden sm:inline font-medium text-sm text-slate-600",children:"Videos"}),(0,a.jsx)("span",{className:"hidden sm:inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ".concat(K.videoToolEnabled?"bg-teal-100 text-teal-700":"bg-slate-100 text-slate-500"),children:K.videoToolEnabled?"MMS":"Off"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Organization"}),(null==e2?void 0:e2.organizationName)?(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-teal-100",children:(0,a.jsx)(P.Z,{className:"h-3 w-3 text-teal-600"})}),(0,a.jsx)("span",{className:"font-medium text-slate-600",children:e2.organizationName})]})}):(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Not configured"}),(0,a.jsxs)(i.default,{href:"/dashboard/settings?tab=preferences",className:"inline-flex items-center gap-1 text-xs text-teal-600 hover:underline mt-1",children:[(0,a.jsx)(D.Z,{className:"h-3 w-3"}),"Set up in Settings"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Phone Number"}),te?(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Loading..."}):e3?(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-teal-100",children:(0,a.jsx)(y.Z,{className:"h-3 w-3 text-teal-600"})}),(0,a.jsx)("span",{className:"font-medium text-slate-600",children:G(e3.phoneNumber)})]})}):(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No phone number assigned"}),(0,a.jsxs)(i.default,{href:"/dashboard/settings",className:"inline-flex items-center gap-1 text-xs text-teal-600 hover:underline mt-1",children:[(0,a.jsx)(D.Z,{className:"h-3 w-3"}),"Assign in Settings"]})]})]}),K.mode&&h.jt[K.mode]&&(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Mode"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-teal-100",children:V(K.mode)}),(0,a.jsx)("span",{className:"font-medium text-slate-600",children:h.jt[K.mode].label})]})})]}),K.callPurpose&&(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Call Purpose"}),(0,a.jsx)("p",{className:"font-medium text-slate-600 mt-1",children:K.callPurpose})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Created"}),(0,a.jsx)("p",{className:"font-medium text-slate-600",children:new Date(K.createdAt).toLocaleDateString()})]}),("OUTBOUND"===K.mode||"HYBRID"===K.mode)&&K.callWindowStart&&K.callWindowEnd&&(0,a.jsxs)("div",{children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Call Window"}),(0,a.jsxs)("p",{className:"font-medium text-slate-600",children:[K.callWindowStart," - ",K.callWindowEnd]})]}),K.greeting&&(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Greeting"}),(0,a.jsx)("p",{className:"font-medium text-slate-600",children:K.greeting})]}),("OUTBOUND"===K.mode||"HYBRID"===K.mode)&&K.outboundGreeting&&(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"Outbound Greeting"}),(0,a.jsx)("p",{className:"font-medium text-slate-600",children:K.outboundGreeting})]}),(0,a.jsxs)("div",{className:"md:col-span-2 border-t pt-4 mt-2",children:[(0,a.jsx)(m._,{className:"text-muted-foreground",children:"System Prompt"}),(0,a.jsx)("p",{className:"font-medium text-slate-600 whitespace-pre-wrap bg-muted p-3 rounded-md text-sm mt-1",children:K.systemPrompt})]})]})]})})]}),ei&&K&&(0,a.jsx)(f.P,{agentId:K.id,agentName:K.name,callWindow:K.callWindowStart&&K.callWindowEnd?{start:K.callWindowStart,end:K.callWindowEnd}:void 0,onClose:()=>er(!1),onCallInitiated:e=>{console.log("Call initiated:",e)}}),ed&&K&&(0,a.jsx)(N.n,{agentId:K.id,agentName:K.name,imageToolEnabled:K.imageToolEnabled||!1,documentToolEnabled:K.documentToolEnabled||!1,videoToolEnabled:K.videoToolEnabled||!1,onClose:()=>ec(!1),onMessageSent:e=>{console.log("Message sent:",e)}})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4",children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Agent not found"}),(0,a.jsxs)(i.default,{href:"/dashboard/agents",children:[(0,a.jsx)(d.z,{variant:"ghost",size:"icon",className:"sm:hidden text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:(0,a.jsx)(T.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(d.z,{variant:"ghost",className:"hidden sm:flex text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:[(0,a.jsx)(T.Z,{className:"h-4 w-4 mr-2"}),"Back to Agents"]})]})]})}},57790:function(e,t,s){"use strict";s.d(t,{m:function(){return x}});var a=s(57437),l=s(2265),n=s(12381),i=s(54887),r=s(76865),d=s(32489),c=s(51817);function o(e){let{open:t,onClose:s,onConfirm:o,title:m="Confirm Delete",description:x,itemName:u,confirmText:h="Delete",cancelText:g="Cancel"}=e,[f,N]=(0,l.useState)(!1),[j,p]=(0,l.useState)(!1);(0,l.useEffect)(()=>{p(!0)},[]),(0,l.useEffect)(()=>{t||N(!1)},[t]),(0,l.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&!f&&s()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,s,f]),(0,l.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]);let v=async()=>{N(!0);try{await o(),s()}catch(e){N(!1)}};if(!t||!j)return null;let b=(0,a.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:f?void 0:s}),(0,a.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-md mx-4 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(r.Z,{className:"h-5 w-5 text-red-600"})}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-600",children:m})]}),(0,a.jsx)("button",{onClick:s,disabled:f,className:"p-2 hover:bg-slate-100 rounded-full transition-colors disabled:opacity-50",children:(0,a.jsx)(d.Z,{className:"h-5 w-5 text-slate-500"})})]}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:x||(u?'Are you sure you want to delete "'.concat(u,'"? This action cannot be undone.'):"Are you sure you want to delete this? This action cannot be undone.")})}),(0,a.jsxs)("div",{className:"flex gap-3 p-4 pt-0",children:[(0,a.jsx)(n.z,{type:"button",variant:"outline",onClick:s,className:"flex-1",disabled:f,children:g}),(0,a.jsx)(n.z,{type:"button",variant:"destructive",onClick:v,className:"flex-1",disabled:f,children:f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):h})]})]})]});return(0,i.createPortal)(b,document.body)}var m=s(18930);function x(e){let{onDelete:t,itemName:s,title:i,description:r,confirmText:d,variant:c="icon",size:x,className:u="",disabled:h=!1}=e,[g,f]=(0,l.useState)(!1),N=async()=>{await t()};return"full"===c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.z,{variant:"destructive",size:"icon",onClick:()=>f(!0),disabled:h,className:"sm:hidden ".concat(u),children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(n.z,{variant:"destructive",size:x,onClick:()=>f(!0),disabled:h,className:"hidden sm:flex ".concat(u),children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Delete"]}),(0,a.jsx)(o,{open:g,onClose:()=>f(!1),onConfirm:N,title:i,description:r,itemName:s,confirmText:d})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.z,{variant:"ghost",size:x||"icon",onClick:()=>f(!0),disabled:h,className:"text-destructive hover:text-destructive hover:bg-destructive/10 ".concat(u),children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})}),(0,a.jsx)(o,{open:g,onClose:()=>f(!1),onConfirm:N,title:i,description:r,itemName:s,confirmText:d})]})}},69173:function(e,t,s){"use strict";s.d(t,{$:function(){return x}});var a=s(57437),l=s(2265),n=s(33145),i=s(78705),r=s(43328),d=s(92369),c=s(40875),o=s(66337),m=s(23340);function x(e){let{value:t,onChange:s,disabled:x=!1,userPlan:u="FREE"}=e,[h,g]=(0,l.useState)(!1),f=(0,l.useRef)(null),{toast:N}=(0,m.pm)(),j=(0,r.zZ)(u,"VOICE_LIBRARY"),p=i.Cy.find(e=>e.id===t)||i.Cy[0];(0,l.useEffect)(()=>{let e=e=>{f.current&&!f.current.contains(e.target)&&g(!1)};return h&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[h]);let v=(e,t)=>{if(t>=j){N({title:"Upgrade Required",description:"This voice is available on higher plans. Upgrade to access more voices.",variant:"destructive"});return}s(e),g(!1)};return(0,a.jsxs)("div",{className:"relative",ref:f,children:[(0,a.jsxs)("button",{type:"button",onClick:()=>!x&&g(!h),disabled:x,className:"w-full flex items-center gap-3 px-3 py-2.5 border rounded-md justify-between transition-colors disabled:opacity-50 disabled:cursor-not-allowed ".concat(t?"border-teal-500 bg-teal-50":"bg-white hover:bg-slate-50"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center overflow-hidden flex-shrink-0 ".concat(t?"bg-teal-100":"bg-slate-100"),children:p.avatar?(0,a.jsx)(n.default,{src:p.avatar,alt:p.name,width:48,height:48,className:"w-full h-full object-cover"}):(0,a.jsx)(d.Z,{className:"w-6 h-6 ".concat(t?"text-teal-600":"text-slate-400")})}),(0,a.jsxs)("div",{className:"flex-1 text-left min-w-0",children:[(0,a.jsx)("div",{className:"font-medium text-sm text-slate-600",children:p.name}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:p.description})]})]}),(0,a.jsx)(c.Z,{className:"w-4 h-4 text-muted-foreground flex-shrink-0 transition-transform ".concat(h?"rotate-180":"")})]}),h&&(0,a.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg max-h-80 overflow-y-auto",children:i.Cy.map((e,s)=>{let l=e.id===t,i=s>=j;return(0,a.jsxs)("button",{type:"button",onClick:()=>v(e.id,s),className:"relative w-full flex items-center gap-3 px-3 py-2.5 transition-colors ".concat(i?"opacity-60 cursor-not-allowed bg-slate-50":l?"bg-teal-50":"hover:bg-slate-50"),children:[i&&(0,a.jsx)("div",{className:"absolute top-2 right-2",children:(0,a.jsx)(o.Z,{className:"h-3 w-3 text-slate-400"})}),(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center overflow-hidden flex-shrink-0 ".concat(i?"bg-slate-200":l?"bg-teal-100":"bg-slate-100"),children:e.avatar?(0,a.jsx)(n.default,{src:e.avatar,alt:e.name,width:48,height:48,className:"w-full h-full object-cover"}):(0,a.jsx)(d.Z,{className:"w-6 h-6 ".concat(i?"text-slate-400":l?"text-teal-600":"text-slate-400")})}),(0,a.jsxs)("div",{className:"flex-1 text-left min-w-0",children:[(0,a.jsx)("div",{className:"font-medium text-sm ".concat(i?"text-slate-500":"text-slate-600"),children:e.name}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]}),l&&!i&&(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-teal-600 flex-shrink-0"})]},e.id)})})]})}},43328:function(e,t,s){"use strict";s.d(t,{y3:function(){return l},zZ:function(){return n}});let a={HYBRID_MODE:{allowedPlans:["PROFESSIONAL","ENTERPRISE"],label:"Hybrid Mode",description:"Allow agents to handle both inbound and outbound calls"},CALENDAR_INTEGRATION:{allowedPlans:["PROFESSIONAL","ENTERPRISE"],label:"Calendar Integration",description:"Connect Google Calendar, Calendly, or Cal.com"},VOICE_CLONING:{allowedPlans:["PROFESSIONAL","ENTERPRISE"],label:"Voice Cloning",description:"Create custom voices from your own audio samples"},WHITE_LABEL:{allowedPlans:["ENTERPRISE"],label:"White Labeling",description:'Remove "Powered by AI Caller" branding'},MULTIPLE_AGENTS:{allowedPlans:["STARTER","PROFESSIONAL","ENTERPRISE"],limit:{FREE:1,STARTER:5,PROFESSIONAL:20,ENTERPRISE:100}},VOICE_LIBRARY:{allowedPlans:["STARTER","PROFESSIONAL","ENTERPRISE"],label:"Extended Voice Library",description:"Access to all premium AI voices",limit:{FREE:3,STARTER:5,PROFESSIONAL:11,ENTERPRISE:11}},CAMPAIGNS:{allowedPlans:["STARTER","PROFESSIONAL","ENTERPRISE"],label:"Outbound Campaigns",description:"Automated outbound calling campaigns",limit:{FREE:0,STARTER:1,PROFESSIONAL:3,ENTERPRISE:100}}};function l(e,t){let s=a[t];return!("allowedPlans"in s)||s.allowedPlans.includes(e)}function n(e,t){return a[t].limit[e]||0}}},function(e){e.O(0,[225,648,145,963,92,452,6,972,971,117,744],function(){return e(e.s=67601)}),_N_E=e.O()}]);